import{r as Ii,D as AT}from"./deckgl_react-Azql1Hzl.js";import{r as xT,a as ET,g as Lv}from"./react-Bzgz95E1.js";import{l as xd,L as Ja,p as $a,a as tr,M as ds,C as ul,b as bc,c as wT,d as Cv,U as hl,G as ka,e as $i,f as OT,T as Dv,g as MT,h as yh,i as W,j as LT,k as Pe,Q as s0,m as kd,n as sc,E as CT,o as DT,q as BT,W as a0,R as IT,r as Oa,s as RT}from"./deckgl_core-B-Jwjxqj.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function i(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=i(o);fetch(o.href,c)}})();var Ed={exports:{}},Kr={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r0;function NT(){if(r0)return Kr;r0=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(r,o,c){var d=null;if(c!==void 0&&(d=""+c),o.key!==void 0&&(d=""+o.key),"key"in o){c={};for(var h in o)h!=="key"&&(c[h]=o[h])}else c=o;return o=c.ref,{$$typeof:s,type:r,key:d,ref:o!==void 0?o:null,props:c}}return Kr.Fragment=t,Kr.jsx=i,Kr.jsxs=i,Kr}var l0;function zT(){return l0||(l0=1,Ed.exports=NT()),Ed.exports}var be=zT(),wd={exports:{}},Wr={},Od={exports:{}},Md={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o0;function UT(){return o0||(o0=1,(function(s){function t(_,x){var T=_.length;_.push(x);t:for(;0<T;){var I=T-1>>>1,R=_[I];if(0<o(R,x))_[I]=x,_[T]=R,T=I;else break t}}function i(_){return _.length===0?null:_[0]}function r(_){if(_.length===0)return null;var x=_[0],T=_.pop();if(T!==x){_[0]=T;t:for(var I=0,R=_.length,P=R>>>1;I<P;){var z=2*(I+1)-1,G=_[z],k=z+1,X=_[k];if(0>o(G,T))k<R&&0>o(X,G)?(_[I]=X,_[k]=T,I=k):(_[I]=G,_[z]=T,I=z);else if(k<R&&0>o(X,T))_[I]=X,_[k]=T,I=k;else break t}}return x}function o(_,x){var T=_.sortIndex-x.sortIndex;return T!==0?T:_.id-x.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var d=Date,h=d.now();s.unstable_now=function(){return d.now()-h}}var y=[],g=[],v=1,b=null,E=3,M=!1,V=!1,j=!1,H=!1,q=typeof setTimeout=="function"?setTimeout:null,dt=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function Nt(_){for(var x=i(g);x!==null;){if(x.callback===null)r(g);else if(x.startTime<=_)r(g),x.sortIndex=x.expirationTime,t(y,x);else break;x=i(g)}}function gt(_){if(j=!1,Nt(_),!V)if(i(y)!==null)V=!0,ht||(ht=!0,Ae());else{var x=i(g);x!==null&&Re(gt,x.startTime-_)}}var ht=!1,Jt=-1,se=5,Yt=-1;function ce(){return H?!0:!(s.unstable_now()-Yt<se)}function di(){if(H=!1,ht){var _=s.unstable_now();Yt=_;var x=!0;try{t:{V=!1,j&&(j=!1,dt(Jt),Jt=-1),M=!0;var T=E;try{e:{for(Nt(_),b=i(y);b!==null&&!(b.expirationTime>_&&ce());){var I=b.callback;if(typeof I=="function"){b.callback=null,E=b.priorityLevel;var R=I(b.expirationTime<=_);if(_=s.unstable_now(),typeof R=="function"){b.callback=R,Nt(_),x=!0;break e}b===i(y)&&r(y),Nt(_)}else r(y);b=i(y)}if(b!==null)x=!0;else{var P=i(g);P!==null&&Re(gt,P.startTime-_),x=!1}}break t}finally{b=null,E=T,M=!1}x=void 0}}finally{x?Ae():ht=!1}}}var Ae;if(typeof Q=="function")Ae=function(){Q(di)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,kt=te.port2;te.port1.onmessage=di,Ae=function(){kt.postMessage(null)}}else Ae=function(){q(di,0)};function Re(_,x){Jt=q(function(){_(s.unstable_now())},x)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(_){_.callback=null},s.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<_?Math.floor(1e3/_):5},s.unstable_getCurrentPriorityLevel=function(){return E},s.unstable_next=function(_){switch(E){case 1:case 2:case 3:var x=3;break;default:x=E}var T=E;E=x;try{return _()}finally{E=T}},s.unstable_requestPaint=function(){H=!0},s.unstable_runWithPriority=function(_,x){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var T=E;E=_;try{return x()}finally{E=T}},s.unstable_scheduleCallback=function(_,x,T){var I=s.unstable_now();switch(typeof T=="object"&&T!==null?(T=T.delay,T=typeof T=="number"&&0<T?I+T:I):T=I,_){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=T+R,_={id:v++,callback:x,priorityLevel:_,startTime:T,expirationTime:R,sortIndex:-1},T>I?(_.sortIndex=T,t(g,_),i(y)===null&&_===i(g)&&(j?(dt(Jt),Jt=-1):j=!0,Re(gt,T-I))):(_.sortIndex=R,t(y,_),V||M||(V=!0,ht||(ht=!0,Ae()))),_},s.unstable_shouldYield=ce,s.unstable_wrapCallback=function(_){var x=E;return function(){var T=E;E=x;try{return _.apply(this,arguments)}finally{E=T}}}})(Md)),Md}var c0;function FT(){return c0||(c0=1,Od.exports=UT()),Od.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u0;function PT(){if(u0)return Wr;u0=1;var s=FT(),t=xT(),i=ET();function r(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var n=e,a=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(a=n.return),e=n.return;while(e)}return n.tag===3?a:null}function d(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function h(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function y(e){if(c(e)!==e)throw Error(r(188))}function g(e){var n=e.alternate;if(!n){if(n=c(e),n===null)throw Error(r(188));return n!==e?null:e}for(var a=e,l=n;;){var u=a.return;if(u===null)break;var f=u.alternate;if(f===null){if(l=u.return,l!==null){a=l;continue}break}if(u.child===f.child){for(f=u.child;f;){if(f===a)return y(u),e;if(f===l)return y(u),n;f=f.sibling}throw Error(r(188))}if(a.return!==l.return)a=u,l=f;else{for(var p=!1,m=u.child;m;){if(m===a){p=!0,a=u,l=f;break}if(m===l){p=!0,l=u,a=f;break}m=m.sibling}if(!p){for(m=f.child;m;){if(m===a){p=!0,a=f,l=u;break}if(m===l){p=!0,l=f,a=u;break}m=m.sibling}if(!p)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?e:n}function v(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=v(e),n!==null)return n;e=e.sibling}return null}var b=Object.assign,E=Symbol.for("react.element"),M=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),dt=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),Nt=Symbol.for("react.forward_ref"),gt=Symbol.for("react.suspense"),ht=Symbol.for("react.suspense_list"),Jt=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),Yt=Symbol.for("react.activity"),ce=Symbol.for("react.memo_cache_sentinel"),di=Symbol.iterator;function Ae(e){return e===null||typeof e!="object"?null:(e=di&&e[di]||e["@@iterator"],typeof e=="function"?e:null)}var te=Symbol.for("react.client.reference");function kt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===te?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case j:return"Fragment";case q:return"Profiler";case H:return"StrictMode";case gt:return"Suspense";case ht:return"SuspenseList";case Yt:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case V:return"Portal";case Q:return e.displayName||"Context";case dt:return(e._context.displayName||"Context")+".Consumer";case Nt:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Jt:return n=e.displayName||null,n!==null?n:kt(e.type)||"Memo";case se:n=e._payload,e=e._init;try{return kt(e(n))}catch{}}return null}var Re=Array.isArray,_=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,x=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,T={pending:!1,data:null,method:null,action:null},I=[],R=-1;function P(e){return{current:e}}function z(e){0>R||(e.current=I[R],I[R]=null,R--)}function G(e,n){R++,I[R]=e.current,e.current=n}var k=P(null),X=P(null),Lt=P(null),It=P(null);function At(e,n){switch(G(Lt,n),G(X,e),G(k,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?Om(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=Om(n),e=Mm(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}z(k),G(k,e)}function re(){z(k),z(X),z(Lt)}function zt(e){e.memoizedState!==null&&G(It,e);var n=k.current,a=Mm(n,e.type);n!==a&&(G(X,e),G(k,a))}function Fi(e){X.current===e&&(z(k),z(X)),It.current===e&&(z(It),kr._currentValue=T)}var sn,nr;function Pi(e){if(sn===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);sn=n&&n[1]||"",nr=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+sn+e+nr}var wt=!1;function Ot(e,n){if(!e||wt)return"";wt=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var F=function(){throw Error()};if(Object.defineProperty(F.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(F,[])}catch(B){var D=B}Reflect.construct(e,[],F)}else{try{F.call()}catch(B){D=B}e.call(F.prototype)}}else{try{throw Error()}catch(B){D=B}(F=e())&&typeof F.catch=="function"&&F.catch(function(){})}}catch(B){if(B&&D&&typeof B.stack=="string")return[B.stack,D.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),p=f[0],m=f[1];if(p&&m){var S=p.split(`
`),C=m.split(`
`);for(u=l=0;l<S.length&&!S[l].includes("DetermineComponentFrameRoot");)l++;for(;u<C.length&&!C[u].includes("DetermineComponentFrameRoot");)u++;if(l===S.length||u===C.length)for(l=S.length-1,u=C.length-1;1<=l&&0<=u&&S[l]!==C[u];)u--;for(;1<=l&&0<=u;l--,u--)if(S[l]!==C[u]){if(l!==1||u!==1)do if(l--,u--,0>u||S[l]!==C[u]){var N=`
`+S[l].replace(" at new "," at ");return e.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",e.displayName)),N}while(1<=l&&0<=u);break}}}finally{wt=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Pi(a):""}function tS(e,n){switch(e.tag){case 26:case 27:case 5:return Pi(e.type);case 16:return Pi("Lazy");case 13:return e.child!==n&&n!==null?Pi("Suspense Fallback"):Pi("Suspense");case 19:return Pi("SuspenseList");case 0:case 15:return Ot(e.type,!1);case 11:return Ot(e.type.render,!1);case 1:return Ot(e.type,!0);case 31:return Pi("Activity");default:return""}}function sy(e){try{var n="",a=null;do n+=tS(e,a),a=e,e=e.return;while(e);return n}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var ou=Object.prototype.hasOwnProperty,cu=s.unstable_scheduleCallback,uu=s.unstable_cancelCallback,eS=s.unstable_shouldYield,iS=s.unstable_requestPaint,$e=s.unstable_now,nS=s.unstable_getCurrentPriorityLevel,ay=s.unstable_ImmediatePriority,ry=s.unstable_UserBlockingPriority,Ml=s.unstable_NormalPriority,sS=s.unstable_LowPriority,ly=s.unstable_IdlePriority,aS=s.log,rS=s.unstable_setDisableYieldValue,sr=null,ti=null;function Nn(e){if(typeof aS=="function"&&rS(e),ti&&typeof ti.setStrictMode=="function")try{ti.setStrictMode(sr,e)}catch{}}var ei=Math.clz32?Math.clz32:cS,lS=Math.log,oS=Math.LN2;function cS(e){return e>>>=0,e===0?32:31-(lS(e)/oS|0)|0}var Ll=256,Cl=262144,Dl=4194304;function vs(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Bl(e,n,a){var l=e.pendingLanes;if(l===0)return 0;var u=0,f=e.suspendedLanes,p=e.pingedLanes;e=e.warmLanes;var m=l&134217727;return m!==0?(l=m&~f,l!==0?u=vs(l):(p&=m,p!==0?u=vs(p):a||(a=m&~e,a!==0&&(u=vs(a))))):(m=l&~f,m!==0?u=vs(m):p!==0?u=vs(p):a||(a=l&~e,a!==0&&(u=vs(a)))),u===0?0:n!==0&&n!==u&&(n&f)===0&&(f=u&-u,a=n&-n,f>=a||f===32&&(a&4194048)!==0)?n:u}function ar(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function uS(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oy(){var e=Dl;return Dl<<=1,(Dl&62914560)===0&&(Dl=4194304),e}function fu(e){for(var n=[],a=0;31>a;a++)n.push(e);return n}function rr(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function fS(e,n,a,l,u,f){var p=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var m=e.entanglements,S=e.expirationTimes,C=e.hiddenUpdates;for(a=p&~a;0<a;){var N=31-ei(a),F=1<<N;m[N]=0,S[N]=-1;var D=C[N];if(D!==null)for(C[N]=null,N=0;N<D.length;N++){var B=D[N];B!==null&&(B.lane&=-536870913)}a&=~F}l!==0&&cy(e,l,0),f!==0&&u===0&&e.tag!==0&&(e.suspendedLanes|=f&~(p&~n))}function cy(e,n,a){e.pendingLanes|=n,e.suspendedLanes&=~n;var l=31-ei(n);e.entangledLanes|=n,e.entanglements[l]=e.entanglements[l]|1073741824|a&261930}function uy(e,n){var a=e.entangledLanes|=n;for(e=e.entanglements;a;){var l=31-ei(a),u=1<<l;u&n|e[l]&n&&(e[l]|=n),a&=~u}}function fy(e,n){var a=n&-n;return a=(a&42)!==0?1:du(a),(a&(e.suspendedLanes|n))!==0?0:a}function du(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function hu(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function dy(){var e=x.p;return e!==0?e:(e=window.event,e===void 0?32:Wm(e.type))}function hy(e,n){var a=x.p;try{return x.p=e,n()}finally{x.p=a}}var zn=Math.random().toString(36).slice(2),we="__reactFiber$"+zn,je="__reactProps$"+zn,Gs="__reactContainer$"+zn,yu="__reactEvents$"+zn,dS="__reactListeners$"+zn,hS="__reactHandles$"+zn,yy="__reactResources$"+zn,lr="__reactMarker$"+zn;function pu(e){delete e[we],delete e[je],delete e[yu],delete e[dS],delete e[hS]}function Hs(e){var n=e[we];if(n)return n;for(var a=e.parentNode;a;){if(n=a[Gs]||a[we]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(e=Nm(e);e!==null;){if(a=e[we])return a;e=Nm(e)}return n}e=a,a=e.parentNode}return null}function qs(e){if(e=e[we]||e[Gs]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function or(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(r(33))}function Ys(e){var n=e[yy];return n||(n=e[yy]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function xe(e){e[lr]=!0}var py=new Set,gy={};function _s(e,n){ks(e,n),ks(e+"Capture",n)}function ks(e,n){for(gy[e]=n,e=0;e<n.length;e++)py.add(n[e])}var yS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),my={},vy={};function pS(e){return ou.call(vy,e)?!0:ou.call(my,e)?!1:yS.test(e)?vy[e]=!0:(my[e]=!0,!1)}function Il(e,n,a){if(pS(n))if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+a)}}function Rl(e,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+a)}}function an(e,n,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(n,a,""+l)}}function hi(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function _y(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function gS(e,n,a){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var u=l.get,f=l.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return u.call(this)},set:function(p){a=""+p,f.call(this,p)}}),Object.defineProperty(e,n,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(p){a=""+p},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function gu(e){if(!e._valueTracker){var n=_y(e)?"checked":"value";e._valueTracker=gS(e,n,""+e[n])}}function by(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var a=n.getValue(),l="";return e&&(l=_y(e)?e.checked?"true":"false":e.value),e=l,e!==a?(n.setValue(e),!0):!1}function Nl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var mS=/[\n"\\]/g;function yi(e){return e.replace(mS,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function mu(e,n,a,l,u,f,p,m){e.name="",p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"?e.type=p:e.removeAttribute("type"),n!=null?p==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+hi(n)):e.value!==""+hi(n)&&(e.value=""+hi(n)):p!=="submit"&&p!=="reset"||e.removeAttribute("value"),n!=null?vu(e,p,hi(n)):a!=null?vu(e,p,hi(a)):l!=null&&e.removeAttribute("value"),u==null&&f!=null&&(e.defaultChecked=!!f),u!=null&&(e.checked=u&&typeof u!="function"&&typeof u!="symbol"),m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?e.name=""+hi(m):e.removeAttribute("name")}function Sy(e,n,a,l,u,f,p,m){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),n!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||n!=null)){gu(e);return}a=a!=null?""+hi(a):"",n=n!=null?""+hi(n):a,m||n===e.value||(e.value=n),e.defaultValue=n}l=l??u,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=m?e.checked:!!l,e.defaultChecked=!!l,p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(e.name=p),gu(e)}function vu(e,n,a){n==="number"&&Nl(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Qs(e,n,a,l){if(e=e.options,n){n={};for(var u=0;u<a.length;u++)n["$"+a[u]]=!0;for(a=0;a<e.length;a++)u=n.hasOwnProperty("$"+e[a].value),e[a].selected!==u&&(e[a].selected=u),u&&l&&(e[a].defaultSelected=!0)}else{for(a=""+hi(a),n=null,u=0;u<e.length;u++){if(e[u].value===a){e[u].selected=!0,l&&(e[u].defaultSelected=!0);return}n!==null||e[u].disabled||(n=e[u])}n!==null&&(n.selected=!0)}}function Ty(e,n,a){if(n!=null&&(n=""+hi(n),n!==e.value&&(e.value=n),a==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=a!=null?""+hi(a):""}function Ay(e,n,a,l){if(n==null){if(l!=null){if(a!=null)throw Error(r(92));if(Re(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),n=a}a=hi(n),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l),gu(e)}function Zs(e,n){if(n){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=n;return}}e.textContent=n}var vS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xy(e,n,a){var l=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":l?e.setProperty(n,a):typeof a!="number"||a===0||vS.has(n)?n==="float"?e.cssFloat=a:e[n]=(""+a).trim():e[n]=a+"px"}function Ey(e,n,a){if(n!=null&&typeof n!="object")throw Error(r(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var u in n)l=n[u],n.hasOwnProperty(u)&&a[u]!==l&&xy(e,u,l)}else for(var f in n)n.hasOwnProperty(f)&&xy(e,f,n[f])}function _u(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _S=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),bS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function zl(e){return bS.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function rn(){}var bu=null;function Su(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Xs=null,Ks=null;function wy(e){var n=qs(e);if(n&&(e=n.stateNode)){var a=e[je]||null;t:switch(e=n.stateNode,n.type){case"input":if(mu(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+yi(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var l=a[n];if(l!==e&&l.form===e.form){var u=l[je]||null;if(!u)throw Error(r(90));mu(l,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(n=0;n<a.length;n++)l=a[n],l.form===e.form&&by(l)}break t;case"textarea":Ty(e,a.value,a.defaultValue);break t;case"select":n=a.value,n!=null&&Qs(e,!!a.multiple,n,!1)}}}var Tu=!1;function Oy(e,n,a){if(Tu)return e(n,a);Tu=!0;try{var l=e(n);return l}finally{if(Tu=!1,(Xs!==null||Ks!==null)&&(xo(),Xs&&(n=Xs,e=Ks,Ks=Xs=null,wy(n),e)))for(n=0;n<e.length;n++)wy(e[n])}}function cr(e,n){var a=e.stateNode;if(a===null)return null;var l=a[je]||null;if(l===null)return null;a=l[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(r(231,n,typeof a));return a}var ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Au=!1;if(ln)try{var ur={};Object.defineProperty(ur,"passive",{get:function(){Au=!0}}),window.addEventListener("test",ur,ur),window.removeEventListener("test",ur,ur)}catch{Au=!1}var Un=null,xu=null,Ul=null;function My(){if(Ul)return Ul;var e,n=xu,a=n.length,l,u="value"in Un?Un.value:Un.textContent,f=u.length;for(e=0;e<a&&n[e]===u[e];e++);var p=a-e;for(l=1;l<=p&&n[a-l]===u[f-l];l++);return Ul=u.slice(e,1<l?1-l:void 0)}function Fl(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Pl(){return!0}function Ly(){return!1}function Ge(e){function n(a,l,u,f,p){this._reactName=a,this._targetInst=u,this.type=l,this.nativeEvent=f,this.target=p,this.currentTarget=null;for(var m in e)e.hasOwnProperty(m)&&(a=e[m],this[m]=a?a(f):f[m]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Pl:Ly,this.isPropagationStopped=Ly,this}return b(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Pl)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Pl)},persist:function(){},isPersistent:Pl}),n}var bs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vl=Ge(bs),fr=b({},bs,{view:0,detail:0}),SS=Ge(fr),Eu,wu,dr,jl=b({},fr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==dr&&(dr&&e.type==="mousemove"?(Eu=e.screenX-dr.screenX,wu=e.screenY-dr.screenY):wu=Eu=0,dr=e),Eu)},movementY:function(e){return"movementY"in e?e.movementY:wu}}),Cy=Ge(jl),TS=b({},jl,{dataTransfer:0}),AS=Ge(TS),xS=b({},fr,{relatedTarget:0}),Ou=Ge(xS),ES=b({},bs,{animationName:0,elapsedTime:0,pseudoElement:0}),wS=Ge(ES),OS=b({},bs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),MS=Ge(OS),LS=b({},bs,{data:0}),Dy=Ge(LS),CS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},DS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},BS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function IS(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=BS[e])?!!n[e]:!1}function Mu(){return IS}var RS=b({},fr,{key:function(e){if(e.key){var n=CS[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Fl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?DS[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mu,charCode:function(e){return e.type==="keypress"?Fl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Fl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),NS=Ge(RS),zS=b({},jl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),By=Ge(zS),US=b({},fr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mu}),FS=Ge(US),PS=b({},bs,{propertyName:0,elapsedTime:0,pseudoElement:0}),VS=Ge(PS),jS=b({},jl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),GS=Ge(jS),HS=b({},bs,{newState:0,oldState:0}),qS=Ge(HS),YS=[9,13,27,32],Lu=ln&&"CompositionEvent"in window,hr=null;ln&&"documentMode"in document&&(hr=document.documentMode);var kS=ln&&"TextEvent"in window&&!hr,Iy=ln&&(!Lu||hr&&8<hr&&11>=hr),Ry=" ",Ny=!1;function zy(e,n){switch(e){case"keyup":return YS.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Uy(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ws=!1;function QS(e,n){switch(e){case"compositionend":return Uy(n);case"keypress":return n.which!==32?null:(Ny=!0,Ry);case"textInput":return e=n.data,e===Ry&&Ny?null:e;default:return null}}function ZS(e,n){if(Ws)return e==="compositionend"||!Lu&&zy(e,n)?(e=My(),Ul=xu=Un=null,Ws=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Iy&&n.locale!=="ko"?null:n.data;default:return null}}var XS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fy(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!XS[e.type]:n==="textarea"}function Py(e,n,a,l){Xs?Ks?Ks.push(l):Ks=[l]:Xs=l,n=Do(n,"onChange"),0<n.length&&(a=new Vl("onChange","change",null,a,l),e.push({event:a,listeners:n}))}var yr=null,pr=null;function KS(e){Sm(e,0)}function Gl(e){var n=or(e);if(by(n))return e}function Vy(e,n){if(e==="change")return n}var jy=!1;if(ln){var Cu;if(ln){var Du="oninput"in document;if(!Du){var Gy=document.createElement("div");Gy.setAttribute("oninput","return;"),Du=typeof Gy.oninput=="function"}Cu=Du}else Cu=!1;jy=Cu&&(!document.documentMode||9<document.documentMode)}function Hy(){yr&&(yr.detachEvent("onpropertychange",qy),pr=yr=null)}function qy(e){if(e.propertyName==="value"&&Gl(pr)){var n=[];Py(n,pr,e,Su(e)),Oy(KS,n)}}function WS(e,n,a){e==="focusin"?(Hy(),yr=n,pr=a,yr.attachEvent("onpropertychange",qy)):e==="focusout"&&Hy()}function JS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Gl(pr)}function $S(e,n){if(e==="click")return Gl(n)}function t1(e,n){if(e==="input"||e==="change")return Gl(n)}function e1(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var ii=typeof Object.is=="function"?Object.is:e1;function gr(e,n){if(ii(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var a=Object.keys(e),l=Object.keys(n);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var u=a[l];if(!ou.call(n,u)||!ii(e[u],n[u]))return!1}return!0}function Yy(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ky(e,n){var a=Yy(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=n&&l>=n)return{node:a,offset:n-e};e=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Yy(a)}}function Qy(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Qy(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Zy(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=Nl(e.document);n instanceof e.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)e=n.contentWindow;else break;n=Nl(e.document)}return n}function Bu(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var i1=ln&&"documentMode"in document&&11>=document.documentMode,Js=null,Iu=null,mr=null,Ru=!1;function Xy(e,n,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Ru||Js==null||Js!==Nl(l)||(l=Js,"selectionStart"in l&&Bu(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),mr&&gr(mr,l)||(mr=l,l=Do(Iu,"onSelect"),0<l.length&&(n=new Vl("onSelect","select",null,n,a),e.push({event:n,listeners:l}),n.target=Js)))}function Ss(e,n){var a={};return a[e.toLowerCase()]=n.toLowerCase(),a["Webkit"+e]="webkit"+n,a["Moz"+e]="moz"+n,a}var $s={animationend:Ss("Animation","AnimationEnd"),animationiteration:Ss("Animation","AnimationIteration"),animationstart:Ss("Animation","AnimationStart"),transitionrun:Ss("Transition","TransitionRun"),transitionstart:Ss("Transition","TransitionStart"),transitioncancel:Ss("Transition","TransitionCancel"),transitionend:Ss("Transition","TransitionEnd")},Nu={},Ky={};ln&&(Ky=document.createElement("div").style,"AnimationEvent"in window||(delete $s.animationend.animation,delete $s.animationiteration.animation,delete $s.animationstart.animation),"TransitionEvent"in window||delete $s.transitionend.transition);function Ts(e){if(Nu[e])return Nu[e];if(!$s[e])return e;var n=$s[e],a;for(a in n)if(n.hasOwnProperty(a)&&a in Ky)return Nu[e]=n[a];return e}var Wy=Ts("animationend"),Jy=Ts("animationiteration"),$y=Ts("animationstart"),n1=Ts("transitionrun"),s1=Ts("transitionstart"),a1=Ts("transitioncancel"),tp=Ts("transitionend"),ep=new Map,zu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zu.push("scrollEnd");function Ci(e,n){ep.set(e,n),_s(n,[e])}var Hl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},pi=[],ta=0,Uu=0;function ql(){for(var e=ta,n=Uu=ta=0;n<e;){var a=pi[n];pi[n++]=null;var l=pi[n];pi[n++]=null;var u=pi[n];pi[n++]=null;var f=pi[n];if(pi[n++]=null,l!==null&&u!==null){var p=l.pending;p===null?u.next=u:(u.next=p.next,p.next=u),l.pending=u}f!==0&&ip(a,u,f)}}function Yl(e,n,a,l){pi[ta++]=e,pi[ta++]=n,pi[ta++]=a,pi[ta++]=l,Uu|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Fu(e,n,a,l){return Yl(e,n,a,l),kl(e)}function As(e,n){return Yl(e,null,null,n),kl(e)}function ip(e,n,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var u=!1,f=e.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(u=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,u&&n!==null&&(u=31-ei(a),e=f.hiddenUpdates,l=e[u],l===null?e[u]=[n]:l.push(n),n.lane=a|536870912),f):null}function kl(e){if(50<Pr)throw Pr=0,Zf=null,Error(r(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var ea={};function r1(e,n,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ni(e,n,a,l){return new r1(e,n,a,l)}function Pu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function on(e,n){var a=e.alternate;return a===null?(a=ni(e.tag,n,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=n,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,n=e.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function np(e,n){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,n=a.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Ql(e,n,a,l,u,f){var p=0;if(l=e,typeof e=="function")Pu(e)&&(p=1);else if(typeof e=="string")p=fT(e,a,k.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case Yt:return e=ni(31,a,n,u),e.elementType=Yt,e.lanes=f,e;case j:return xs(a.children,u,f,n);case H:p=8,u|=24;break;case q:return e=ni(12,a,n,u|2),e.elementType=q,e.lanes=f,e;case gt:return e=ni(13,a,n,u),e.elementType=gt,e.lanes=f,e;case ht:return e=ni(19,a,n,u),e.elementType=ht,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Q:p=10;break t;case dt:p=9;break t;case Nt:p=11;break t;case Jt:p=14;break t;case se:p=16,l=null;break t}p=29,a=Error(r(130,e===null?"null":typeof e,"")),l=null}return n=ni(p,a,n,u),n.elementType=e,n.type=l,n.lanes=f,n}function xs(e,n,a,l){return e=ni(7,e,l,n),e.lanes=a,e}function Vu(e,n,a){return e=ni(6,e,null,n),e.lanes=a,e}function sp(e){var n=ni(18,null,null,0);return n.stateNode=e,n}function ju(e,n,a){return n=ni(4,e.children!==null?e.children:[],e.key,n),n.lanes=a,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var ap=new WeakMap;function gi(e,n){if(typeof e=="object"&&e!==null){var a=ap.get(e);return a!==void 0?a:(n={value:e,source:n,stack:sy(n)},ap.set(e,n),n)}return{value:e,source:n,stack:sy(n)}}var ia=[],na=0,Zl=null,vr=0,mi=[],vi=0,Fn=null,Vi=1,ji="";function cn(e,n){ia[na++]=vr,ia[na++]=Zl,Zl=e,vr=n}function rp(e,n,a){mi[vi++]=Vi,mi[vi++]=ji,mi[vi++]=Fn,Fn=e;var l=Vi;e=ji;var u=32-ei(l)-1;l&=~(1<<u),a+=1;var f=32-ei(n)+u;if(30<f){var p=u-u%5;f=(l&(1<<p)-1).toString(32),l>>=p,u-=p,Vi=1<<32-ei(n)+u|a<<u|l,ji=f+e}else Vi=1<<f|a<<u|l,ji=e}function Gu(e){e.return!==null&&(cn(e,1),rp(e,1,0))}function Hu(e){for(;e===Zl;)Zl=ia[--na],ia[na]=null,vr=ia[--na],ia[na]=null;for(;e===Fn;)Fn=mi[--vi],mi[vi]=null,ji=mi[--vi],mi[vi]=null,Vi=mi[--vi],mi[vi]=null}function lp(e,n){mi[vi++]=Vi,mi[vi++]=ji,mi[vi++]=Fn,Vi=n.id,ji=n.overflow,Fn=e}var Oe=null,ee=null,xt=!1,Pn=null,_i=!1,qu=Error(r(519));function Vn(e){var n=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _r(gi(n,e)),qu}function op(e){var n=e.stateNode,a=e.type,l=e.memoizedProps;switch(n[we]=e,n[je]=l,a){case"dialog":bt("cancel",n),bt("close",n);break;case"iframe":case"object":case"embed":bt("load",n);break;case"video":case"audio":for(a=0;a<jr.length;a++)bt(jr[a],n);break;case"source":bt("error",n);break;case"img":case"image":case"link":bt("error",n),bt("load",n);break;case"details":bt("toggle",n);break;case"input":bt("invalid",n),Sy(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":bt("invalid",n);break;case"textarea":bt("invalid",n),Ay(n,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||l.suppressHydrationWarning===!0||Em(n.textContent,a)?(l.popover!=null&&(bt("beforetoggle",n),bt("toggle",n)),l.onScroll!=null&&bt("scroll",n),l.onScrollEnd!=null&&bt("scrollend",n),l.onClick!=null&&(n.onclick=rn),n=!0):n=!1,n||Vn(e,!0)}function cp(e){for(Oe=e.return;Oe;)switch(Oe.tag){case 5:case 31:case 13:_i=!1;return;case 27:case 3:_i=!0;return;default:Oe=Oe.return}}function sa(e){if(e!==Oe)return!1;if(!xt)return cp(e),xt=!0,!1;var n=e.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||cd(e.type,e.memoizedProps)),a=!a),a&&ee&&Vn(e),cp(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));ee=Rm(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));ee=Rm(e)}else n===27?(n=ee,ts(e.type)?(e=yd,yd=null,ee=e):ee=n):ee=Oe?Si(e.stateNode.nextSibling):null;return!0}function Es(){ee=Oe=null,xt=!1}function Yu(){var e=Pn;return e!==null&&(ke===null?ke=e:ke.push.apply(ke,e),Pn=null),e}function _r(e){Pn===null?Pn=[e]:Pn.push(e)}var ku=P(null),ws=null,un=null;function jn(e,n,a){G(ku,n._currentValue),n._currentValue=a}function fn(e){e._currentValue=ku.current,z(ku)}function Qu(e,n,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),e===a)break;e=e.return}}function Zu(e,n,a,l){var u=e.child;for(u!==null&&(u.return=e);u!==null;){var f=u.dependencies;if(f!==null){var p=u.child;f=f.firstContext;t:for(;f!==null;){var m=f;f=u;for(var S=0;S<n.length;S++)if(m.context===n[S]){f.lanes|=a,m=f.alternate,m!==null&&(m.lanes|=a),Qu(f.return,a,e),l||(p=null);break t}f=m.next}}else if(u.tag===18){if(p=u.return,p===null)throw Error(r(341));p.lanes|=a,f=p.alternate,f!==null&&(f.lanes|=a),Qu(p,a,e),p=null}else p=u.child;if(p!==null)p.return=u;else for(p=u;p!==null;){if(p===e){p=null;break}if(u=p.sibling,u!==null){u.return=p.return,p=u;break}p=p.return}u=p}}function aa(e,n,a,l){e=null;for(var u=n,f=!1;u!==null;){if(!f){if((u.flags&524288)!==0)f=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var p=u.alternate;if(p===null)throw Error(r(387));if(p=p.memoizedProps,p!==null){var m=u.type;ii(u.pendingProps.value,p.value)||(e!==null?e.push(m):e=[m])}}else if(u===It.current){if(p=u.alternate,p===null)throw Error(r(387));p.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(e!==null?e.push(kr):e=[kr])}u=u.return}e!==null&&Zu(n,e,a,l),n.flags|=262144}function Xl(e){for(e=e.firstContext;e!==null;){if(!ii(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Os(e){ws=e,un=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Me(e){return up(ws,e)}function Kl(e,n){return ws===null&&Os(e),up(e,n)}function up(e,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},un===null){if(e===null)throw Error(r(308));un=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else un=un.next=n;return a}var l1=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){n.aborted=!0,e.forEach(function(a){return a()})}},o1=s.unstable_scheduleCallback,c1=s.unstable_NormalPriority,pe={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xu(){return{controller:new l1,data:new Map,refCount:0}}function br(e){e.refCount--,e.refCount===0&&o1(c1,function(){e.controller.abort()})}var Sr=null,Ku=0,ra=0,la=null;function u1(e,n){if(Sr===null){var a=Sr=[];Ku=0,ra=td(),la={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Ku++,n.then(fp,fp),n}function fp(){if(--Ku===0&&Sr!==null){la!==null&&(la.status="fulfilled");var e=Sr;Sr=null,ra=0,la=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function f1(e,n){var a=[],l={status:"pending",value:null,reason:null,then:function(u){a.push(u)}};return e.then(function(){l.status="fulfilled",l.value=n;for(var u=0;u<a.length;u++)(0,a[u])(n)},function(u){for(l.status="rejected",l.reason=u,u=0;u<a.length;u++)(0,a[u])(void 0)}),l}var dp=_.S;_.S=function(e,n){Xg=$e(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&u1(e,n),dp!==null&&dp(e,n)};var Ms=P(null);function Wu(){var e=Ms.current;return e!==null?e:Kt.pooledCache}function Wl(e,n){n===null?G(Ms,Ms.current):G(Ms,n.pool)}function hp(){var e=Wu();return e===null?null:{parent:pe._currentValue,pool:e}}var oa=Error(r(460)),Ju=Error(r(474)),Jl=Error(r(542)),$l={then:function(){}};function yp(e){return e=e.status,e==="fulfilled"||e==="rejected"}function pp(e,n,a){switch(a=e[a],a===void 0?e.push(n):a!==n&&(n.then(rn,rn),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,mp(e),e;default:if(typeof n.status=="string")n.then(rn,rn);else{if(e=Kt,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=n,e.status="pending",e.then(function(l){if(n.status==="pending"){var u=n;u.status="fulfilled",u.value=l}},function(l){if(n.status==="pending"){var u=n;u.status="rejected",u.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,mp(e),e}throw Cs=n,oa}}function Ls(e){try{var n=e._init;return n(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Cs=a,oa):a}}var Cs=null;function gp(){if(Cs===null)throw Error(r(459));var e=Cs;return Cs=null,e}function mp(e){if(e===oa||e===Jl)throw Error(r(483))}var ca=null,Tr=0;function to(e){var n=Tr;return Tr+=1,ca===null&&(ca=[]),pp(ca,e,n)}function Ar(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function eo(e,n){throw n.$$typeof===E?Error(r(525)):(e=Object.prototype.toString.call(n),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function vp(e){function n(O,w){if(e){var L=O.deletions;L===null?(O.deletions=[w],O.flags|=16):L.push(w)}}function a(O,w){if(!e)return null;for(;w!==null;)n(O,w),w=w.sibling;return null}function l(O){for(var w=new Map;O!==null;)O.key!==null?w.set(O.key,O):w.set(O.index,O),O=O.sibling;return w}function u(O,w){return O=on(O,w),O.index=0,O.sibling=null,O}function f(O,w,L){return O.index=L,e?(L=O.alternate,L!==null?(L=L.index,L<w?(O.flags|=67108866,w):L):(O.flags|=67108866,w)):(O.flags|=1048576,w)}function p(O){return e&&O.alternate===null&&(O.flags|=67108866),O}function m(O,w,L,U){return w===null||w.tag!==6?(w=Vu(L,O.mode,U),w.return=O,w):(w=u(w,L),w.return=O,w)}function S(O,w,L,U){var J=L.type;return J===j?N(O,w,L.props.children,U,L.key):w!==null&&(w.elementType===J||typeof J=="object"&&J!==null&&J.$$typeof===se&&Ls(J)===w.type)?(w=u(w,L.props),Ar(w,L),w.return=O,w):(w=Ql(L.type,L.key,L.props,null,O.mode,U),Ar(w,L),w.return=O,w)}function C(O,w,L,U){return w===null||w.tag!==4||w.stateNode.containerInfo!==L.containerInfo||w.stateNode.implementation!==L.implementation?(w=ju(L,O.mode,U),w.return=O,w):(w=u(w,L.children||[]),w.return=O,w)}function N(O,w,L,U,J){return w===null||w.tag!==7?(w=xs(L,O.mode,U,J),w.return=O,w):(w=u(w,L),w.return=O,w)}function F(O,w,L){if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return w=Vu(""+w,O.mode,L),w.return=O,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case M:return L=Ql(w.type,w.key,w.props,null,O.mode,L),Ar(L,w),L.return=O,L;case V:return w=ju(w,O.mode,L),w.return=O,w;case se:return w=Ls(w),F(O,w,L)}if(Re(w)||Ae(w))return w=xs(w,O.mode,L,null),w.return=O,w;if(typeof w.then=="function")return F(O,to(w),L);if(w.$$typeof===Q)return F(O,Kl(O,w),L);eo(O,w)}return null}function D(O,w,L,U){var J=w!==null?w.key:null;if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return J!==null?null:m(O,w,""+L,U);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case M:return L.key===J?S(O,w,L,U):null;case V:return L.key===J?C(O,w,L,U):null;case se:return L=Ls(L),D(O,w,L,U)}if(Re(L)||Ae(L))return J!==null?null:N(O,w,L,U,null);if(typeof L.then=="function")return D(O,w,to(L),U);if(L.$$typeof===Q)return D(O,w,Kl(O,L),U);eo(O,L)}return null}function B(O,w,L,U,J){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return O=O.get(L)||null,m(w,O,""+U,J);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case M:return O=O.get(U.key===null?L:U.key)||null,S(w,O,U,J);case V:return O=O.get(U.key===null?L:U.key)||null,C(w,O,U,J);case se:return U=Ls(U),B(O,w,L,U,J)}if(Re(U)||Ae(U))return O=O.get(L)||null,N(w,O,U,J,null);if(typeof U.then=="function")return B(O,w,L,to(U),J);if(U.$$typeof===Q)return B(O,w,L,Kl(w,U),J);eo(w,U)}return null}function Y(O,w,L,U){for(var J=null,Ct=null,Z=w,yt=w=0,Tt=null;Z!==null&&yt<L.length;yt++){Z.index>yt?(Tt=Z,Z=null):Tt=Z.sibling;var Dt=D(O,Z,L[yt],U);if(Dt===null){Z===null&&(Z=Tt);break}e&&Z&&Dt.alternate===null&&n(O,Z),w=f(Dt,w,yt),Ct===null?J=Dt:Ct.sibling=Dt,Ct=Dt,Z=Tt}if(yt===L.length)return a(O,Z),xt&&cn(O,yt),J;if(Z===null){for(;yt<L.length;yt++)Z=F(O,L[yt],U),Z!==null&&(w=f(Z,w,yt),Ct===null?J=Z:Ct.sibling=Z,Ct=Z);return xt&&cn(O,yt),J}for(Z=l(Z);yt<L.length;yt++)Tt=B(Z,O,yt,L[yt],U),Tt!==null&&(e&&Tt.alternate!==null&&Z.delete(Tt.key===null?yt:Tt.key),w=f(Tt,w,yt),Ct===null?J=Tt:Ct.sibling=Tt,Ct=Tt);return e&&Z.forEach(function(as){return n(O,as)}),xt&&cn(O,yt),J}function $(O,w,L,U){if(L==null)throw Error(r(151));for(var J=null,Ct=null,Z=w,yt=w=0,Tt=null,Dt=L.next();Z!==null&&!Dt.done;yt++,Dt=L.next()){Z.index>yt?(Tt=Z,Z=null):Tt=Z.sibling;var as=D(O,Z,Dt.value,U);if(as===null){Z===null&&(Z=Tt);break}e&&Z&&as.alternate===null&&n(O,Z),w=f(as,w,yt),Ct===null?J=as:Ct.sibling=as,Ct=as,Z=Tt}if(Dt.done)return a(O,Z),xt&&cn(O,yt),J;if(Z===null){for(;!Dt.done;yt++,Dt=L.next())Dt=F(O,Dt.value,U),Dt!==null&&(w=f(Dt,w,yt),Ct===null?J=Dt:Ct.sibling=Dt,Ct=Dt);return xt&&cn(O,yt),J}for(Z=l(Z);!Dt.done;yt++,Dt=L.next())Dt=B(Z,O,yt,Dt.value,U),Dt!==null&&(e&&Dt.alternate!==null&&Z.delete(Dt.key===null?yt:Dt.key),w=f(Dt,w,yt),Ct===null?J=Dt:Ct.sibling=Dt,Ct=Dt);return e&&Z.forEach(function(TT){return n(O,TT)}),xt&&cn(O,yt),J}function Xt(O,w,L,U){if(typeof L=="object"&&L!==null&&L.type===j&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case M:t:{for(var J=L.key;w!==null;){if(w.key===J){if(J=L.type,J===j){if(w.tag===7){a(O,w.sibling),U=u(w,L.props.children),U.return=O,O=U;break t}}else if(w.elementType===J||typeof J=="object"&&J!==null&&J.$$typeof===se&&Ls(J)===w.type){a(O,w.sibling),U=u(w,L.props),Ar(U,L),U.return=O,O=U;break t}a(O,w);break}else n(O,w);w=w.sibling}L.type===j?(U=xs(L.props.children,O.mode,U,L.key),U.return=O,O=U):(U=Ql(L.type,L.key,L.props,null,O.mode,U),Ar(U,L),U.return=O,O=U)}return p(O);case V:t:{for(J=L.key;w!==null;){if(w.key===J)if(w.tag===4&&w.stateNode.containerInfo===L.containerInfo&&w.stateNode.implementation===L.implementation){a(O,w.sibling),U=u(w,L.children||[]),U.return=O,O=U;break t}else{a(O,w);break}else n(O,w);w=w.sibling}U=ju(L,O.mode,U),U.return=O,O=U}return p(O);case se:return L=Ls(L),Xt(O,w,L,U)}if(Re(L))return Y(O,w,L,U);if(Ae(L)){if(J=Ae(L),typeof J!="function")throw Error(r(150));return L=J.call(L),$(O,w,L,U)}if(typeof L.then=="function")return Xt(O,w,to(L),U);if(L.$$typeof===Q)return Xt(O,w,Kl(O,L),U);eo(O,L)}return typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint"?(L=""+L,w!==null&&w.tag===6?(a(O,w.sibling),U=u(w,L),U.return=O,O=U):(a(O,w),U=Vu(L,O.mode,U),U.return=O,O=U),p(O)):a(O,w)}return function(O,w,L,U){try{Tr=0;var J=Xt(O,w,L,U);return ca=null,J}catch(Z){if(Z===oa||Z===Jl)throw Z;var Ct=ni(29,Z,null,O.mode);return Ct.lanes=U,Ct.return=O,Ct}finally{}}}var Ds=vp(!0),_p=vp(!1),Gn=!1;function $u(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function tf(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Hn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function qn(e,n,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Rt&2)!==0){var u=l.pending;return u===null?n.next=n:(n.next=u.next,u.next=n),l.pending=n,n=kl(e),ip(e,null,a),n}return Yl(e,l,n,a),kl(e)}function xr(e,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var l=n.lanes;l&=e.pendingLanes,a|=l,n.lanes=a,uy(e,a)}}function ef(e,n){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var u=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var p={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?u=f=p:f=f.next=p,a=a.next}while(a!==null);f===null?u=f=n:f=f.next=n}else u=f=n;a={baseState:l.baseState,firstBaseUpdate:u,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=n:e.next=n,a.lastBaseUpdate=n}var nf=!1;function Er(){if(nf){var e=la;if(e!==null)throw e}}function wr(e,n,a,l){nf=!1;var u=e.updateQueue;Gn=!1;var f=u.firstBaseUpdate,p=u.lastBaseUpdate,m=u.shared.pending;if(m!==null){u.shared.pending=null;var S=m,C=S.next;S.next=null,p===null?f=C:p.next=C,p=S;var N=e.alternate;N!==null&&(N=N.updateQueue,m=N.lastBaseUpdate,m!==p&&(m===null?N.firstBaseUpdate=C:m.next=C,N.lastBaseUpdate=S))}if(f!==null){var F=u.baseState;p=0,N=C=S=null,m=f;do{var D=m.lane&-536870913,B=D!==m.lane;if(B?(St&D)===D:(l&D)===D){D!==0&&D===ra&&(nf=!0),N!==null&&(N=N.next={lane:0,tag:m.tag,payload:m.payload,callback:null,next:null});t:{var Y=e,$=m;D=n;var Xt=a;switch($.tag){case 1:if(Y=$.payload,typeof Y=="function"){F=Y.call(Xt,F,D);break t}F=Y;break t;case 3:Y.flags=Y.flags&-65537|128;case 0:if(Y=$.payload,D=typeof Y=="function"?Y.call(Xt,F,D):Y,D==null)break t;F=b({},F,D);break t;case 2:Gn=!0}}D=m.callback,D!==null&&(e.flags|=64,B&&(e.flags|=8192),B=u.callbacks,B===null?u.callbacks=[D]:B.push(D))}else B={lane:D,tag:m.tag,payload:m.payload,callback:m.callback,next:null},N===null?(C=N=B,S=F):N=N.next=B,p|=D;if(m=m.next,m===null){if(m=u.shared.pending,m===null)break;B=m,m=B.next,B.next=null,u.lastBaseUpdate=B,u.shared.pending=null}}while(!0);N===null&&(S=F),u.baseState=S,u.firstBaseUpdate=C,u.lastBaseUpdate=N,f===null&&(u.shared.lanes=0),Xn|=p,e.lanes=p,e.memoizedState=F}}function bp(e,n){if(typeof e!="function")throw Error(r(191,e));e.call(n)}function Sp(e,n){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)bp(a[e],n)}var ua=P(null),io=P(0);function Tp(e,n){e=bn,G(io,e),G(ua,n),bn=e|n.baseLanes}function sf(){G(io,bn),G(ua,ua.current)}function af(){bn=io.current,z(ua),z(io)}var si=P(null),bi=null;function Yn(e){var n=e.alternate;G(de,de.current&1),G(si,e),bi===null&&(n===null||ua.current!==null||n.memoizedState!==null)&&(bi=e)}function rf(e){G(de,de.current),G(si,e),bi===null&&(bi=e)}function Ap(e){e.tag===22?(G(de,de.current),G(si,e),bi===null&&(bi=e)):kn()}function kn(){G(de,de.current),G(si,si.current)}function ai(e){z(si),bi===e&&(bi=null),z(de)}var de=P(0);function no(e){for(var n=e;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||dd(a)||hd(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var dn=0,ft=null,Qt=null,ge=null,so=!1,fa=!1,Bs=!1,ao=0,Or=0,da=null,d1=0;function ue(){throw Error(r(321))}function lf(e,n){if(n===null)return!1;for(var a=0;a<n.length&&a<e.length;a++)if(!ii(e[a],n[a]))return!1;return!0}function of(e,n,a,l,u,f){return dn=f,ft=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,_.H=e===null||e.memoizedState===null?rg:Af,Bs=!1,f=a(l,u),Bs=!1,fa&&(f=Ep(n,a,l,u)),xp(e),f}function xp(e){_.H=Cr;var n=Qt!==null&&Qt.next!==null;if(dn=0,ge=Qt=ft=null,so=!1,Or=0,da=null,n)throw Error(r(300));e===null||me||(e=e.dependencies,e!==null&&Xl(e)&&(me=!0))}function Ep(e,n,a,l){ft=e;var u=0;do{if(fa&&(da=null),Or=0,fa=!1,25<=u)throw Error(r(301));if(u+=1,ge=Qt=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}_.H=lg,f=n(a,l)}while(fa);return f}function h1(){var e=_.H,n=e.useState()[0];return n=typeof n.then=="function"?Mr(n):n,e=e.useState()[0],(Qt!==null?Qt.memoizedState:null)!==e&&(ft.flags|=1024),n}function cf(){var e=ao!==0;return ao=0,e}function uf(e,n,a){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a}function ff(e){if(so){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}so=!1}dn=0,ge=Qt=ft=null,fa=!1,Or=ao=0,da=null}function Ne(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ge===null?ft.memoizedState=ge=e:ge=ge.next=e,ge}function he(){if(Qt===null){var e=ft.alternate;e=e!==null?e.memoizedState:null}else e=Qt.next;var n=ge===null?ft.memoizedState:ge.next;if(n!==null)ge=n,Qt=e;else{if(e===null)throw ft.alternate===null?Error(r(467)):Error(r(310));Qt=e,e={memoizedState:Qt.memoizedState,baseState:Qt.baseState,baseQueue:Qt.baseQueue,queue:Qt.queue,next:null},ge===null?ft.memoizedState=ge=e:ge=ge.next=e}return ge}function ro(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Mr(e){var n=Or;return Or+=1,da===null&&(da=[]),e=pp(da,e,n),n=ft,(ge===null?n.memoizedState:ge.next)===null&&(n=n.alternate,_.H=n===null||n.memoizedState===null?rg:Af),e}function lo(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Mr(e);if(e.$$typeof===Q)return Me(e)}throw Error(r(438,String(e)))}function df(e){var n=null,a=ft.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var l=ft.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(u){return u.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=ro(),ft.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(e),l=0;l<e;l++)a[l]=ce;return n.index++,a}function hn(e,n){return typeof n=="function"?n(e):n}function oo(e){var n=he();return hf(n,Qt,e)}function hf(e,n,a){var l=e.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var u=e.baseQueue,f=l.pending;if(f!==null){if(u!==null){var p=u.next;u.next=f.next,f.next=p}n.baseQueue=u=f,l.pending=null}if(f=e.baseState,u===null)e.memoizedState=f;else{n=u.next;var m=p=null,S=null,C=n,N=!1;do{var F=C.lane&-536870913;if(F!==C.lane?(St&F)===F:(dn&F)===F){var D=C.revertLane;if(D===0)S!==null&&(S=S.next={lane:0,revertLane:0,gesture:null,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null}),F===ra&&(N=!0);else if((dn&D)===D){C=C.next,D===ra&&(N=!0);continue}else F={lane:0,revertLane:C.revertLane,gesture:null,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null},S===null?(m=S=F,p=f):S=S.next=F,ft.lanes|=D,Xn|=D;F=C.action,Bs&&a(f,F),f=C.hasEagerState?C.eagerState:a(f,F)}else D={lane:F,revertLane:C.revertLane,gesture:C.gesture,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null},S===null?(m=S=D,p=f):S=S.next=D,ft.lanes|=F,Xn|=F;C=C.next}while(C!==null&&C!==n);if(S===null?p=f:S.next=m,!ii(f,e.memoizedState)&&(me=!0,N&&(a=la,a!==null)))throw a;e.memoizedState=f,e.baseState=p,e.baseQueue=S,l.lastRenderedState=f}return u===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function yf(e){var n=he(),a=n.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var l=a.dispatch,u=a.pending,f=n.memoizedState;if(u!==null){a.pending=null;var p=u=u.next;do f=e(f,p.action),p=p.next;while(p!==u);ii(f,n.memoizedState)||(me=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),a.lastRenderedState=f}return[f,l]}function wp(e,n,a){var l=ft,u=he(),f=xt;if(f){if(a===void 0)throw Error(r(407));a=a()}else a=n();var p=!ii((Qt||u).memoizedState,a);if(p&&(u.memoizedState=a,me=!0),u=u.queue,mf(Lp.bind(null,l,u,e),[e]),u.getSnapshot!==n||p||ge!==null&&ge.memoizedState.tag&1){if(l.flags|=2048,ha(9,{destroy:void 0},Mp.bind(null,l,u,a,n),null),Kt===null)throw Error(r(349));f||(dn&127)!==0||Op(l,n,a)}return a}function Op(e,n,a){e.flags|=16384,e={getSnapshot:n,value:a},n=ft.updateQueue,n===null?(n=ro(),ft.updateQueue=n,n.stores=[e]):(a=n.stores,a===null?n.stores=[e]:a.push(e))}function Mp(e,n,a,l){n.value=a,n.getSnapshot=l,Cp(n)&&Dp(e)}function Lp(e,n,a){return a(function(){Cp(n)&&Dp(e)})}function Cp(e){var n=e.getSnapshot;e=e.value;try{var a=n();return!ii(e,a)}catch{return!0}}function Dp(e){var n=As(e,2);n!==null&&Qe(n,e,2)}function pf(e){var n=Ne();if(typeof e=="function"){var a=e;if(e=a(),Bs){Nn(!0);try{a()}finally{Nn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hn,lastRenderedState:e},n}function Bp(e,n,a,l){return e.baseState=a,hf(e,Qt,typeof l=="function"?l:hn)}function y1(e,n,a,l,u){if(fo(e))throw Error(r(485));if(e=n.action,e!==null){var f={payload:u,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(p){f.listeners.push(p)}};_.T!==null?a(!0):f.isTransition=!1,l(f),a=n.pending,a===null?(f.next=n.pending=f,Ip(n,f)):(f.next=a.next,n.pending=a.next=f)}}function Ip(e,n){var a=n.action,l=n.payload,u=e.state;if(n.isTransition){var f=_.T,p={};_.T=p;try{var m=a(u,l),S=_.S;S!==null&&S(p,m),Rp(e,n,m)}catch(C){gf(e,n,C)}finally{f!==null&&p.types!==null&&(f.types=p.types),_.T=f}}else try{f=a(u,l),Rp(e,n,f)}catch(C){gf(e,n,C)}}function Rp(e,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Np(e,n,l)},function(l){return gf(e,n,l)}):Np(e,n,a)}function Np(e,n,a){n.status="fulfilled",n.value=a,zp(n),e.state=a,n=e.pending,n!==null&&(a=n.next,a===n?e.pending=null:(a=a.next,n.next=a,Ip(e,a)))}function gf(e,n,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=a,zp(n),n=n.next;while(n!==l)}e.action=null}function zp(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Up(e,n){return n}function Fp(e,n){if(xt){var a=Kt.formState;if(a!==null){t:{var l=ft;if(xt){if(ee){e:{for(var u=ee,f=_i;u.nodeType!==8;){if(!f){u=null;break e}if(u=Si(u.nextSibling),u===null){u=null;break e}}f=u.data,u=f==="F!"||f==="F"?u:null}if(u){ee=Si(u.nextSibling),l=u.data==="F!";break t}}Vn(l)}l=!1}l&&(n=a[0])}}return a=Ne(),a.memoizedState=a.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Up,lastRenderedState:n},a.queue=l,a=ng.bind(null,ft,l),l.dispatch=a,l=pf(!1),f=Tf.bind(null,ft,!1,l.queue),l=Ne(),u={state:n,dispatch:null,action:e,pending:null},l.queue=u,a=y1.bind(null,ft,u,f,a),u.dispatch=a,l.memoizedState=e,[n,a,!1]}function Pp(e){var n=he();return Vp(n,Qt,e)}function Vp(e,n,a){if(n=hf(e,n,Up)[0],e=oo(hn)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=Mr(n)}catch(p){throw p===oa?Jl:p}else l=n;n=he();var u=n.queue,f=u.dispatch;return a!==n.memoizedState&&(ft.flags|=2048,ha(9,{destroy:void 0},p1.bind(null,u,a),null)),[l,f,e]}function p1(e,n){e.action=n}function jp(e){var n=he(),a=Qt;if(a!==null)return Vp(n,a,e);he(),n=n.memoizedState,a=he();var l=a.queue.dispatch;return a.memoizedState=e,[n,l,!1]}function ha(e,n,a,l){return e={tag:e,create:a,deps:l,inst:n,next:null},n=ft.updateQueue,n===null&&(n=ro(),ft.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,n.lastEffect=e),e}function Gp(){return he().memoizedState}function co(e,n,a,l){var u=Ne();ft.flags|=e,u.memoizedState=ha(1|n,{destroy:void 0},a,l===void 0?null:l)}function uo(e,n,a,l){var u=he();l=l===void 0?null:l;var f=u.memoizedState.inst;Qt!==null&&l!==null&&lf(l,Qt.memoizedState.deps)?u.memoizedState=ha(n,f,a,l):(ft.flags|=e,u.memoizedState=ha(1|n,f,a,l))}function Hp(e,n){co(8390656,8,e,n)}function mf(e,n){uo(2048,8,e,n)}function g1(e){ft.flags|=4;var n=ft.updateQueue;if(n===null)n=ro(),ft.updateQueue=n,n.events=[e];else{var a=n.events;a===null?n.events=[e]:a.push(e)}}function qp(e){var n=he().memoizedState;return g1({ref:n,nextImpl:e}),function(){if((Rt&2)!==0)throw Error(r(440));return n.impl.apply(void 0,arguments)}}function Yp(e,n){return uo(4,2,e,n)}function kp(e,n){return uo(4,4,e,n)}function Qp(e,n){if(typeof n=="function"){e=e();var a=n(e);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Zp(e,n,a){a=a!=null?a.concat([e]):null,uo(4,4,Qp.bind(null,n,e),a)}function vf(){}function Xp(e,n){var a=he();n=n===void 0?null:n;var l=a.memoizedState;return n!==null&&lf(n,l[1])?l[0]:(a.memoizedState=[e,n],e)}function Kp(e,n){var a=he();n=n===void 0?null:n;var l=a.memoizedState;if(n!==null&&lf(n,l[1]))return l[0];if(l=e(),Bs){Nn(!0);try{e()}finally{Nn(!1)}}return a.memoizedState=[l,n],l}function _f(e,n,a){return a===void 0||(dn&1073741824)!==0&&(St&261930)===0?e.memoizedState=n:(e.memoizedState=a,e=Wg(),ft.lanes|=e,Xn|=e,a)}function Wp(e,n,a,l){return ii(a,n)?a:ua.current!==null?(e=_f(e,a,l),ii(e,n)||(me=!0),e):(dn&42)===0||(dn&1073741824)!==0&&(St&261930)===0?(me=!0,e.memoizedState=a):(e=Wg(),ft.lanes|=e,Xn|=e,n)}function Jp(e,n,a,l,u){var f=x.p;x.p=f!==0&&8>f?f:8;var p=_.T,m={};_.T=m,Tf(e,!1,n,a);try{var S=u(),C=_.S;if(C!==null&&C(m,S),S!==null&&typeof S=="object"&&typeof S.then=="function"){var N=f1(S,l);Lr(e,n,N,oi(e))}else Lr(e,n,l,oi(e))}catch(F){Lr(e,n,{then:function(){},status:"rejected",reason:F},oi())}finally{x.p=f,p!==null&&m.types!==null&&(p.types=m.types),_.T=p}}function m1(){}function bf(e,n,a,l){if(e.tag!==5)throw Error(r(476));var u=$p(e).queue;Jp(e,u,n,T,a===null?m1:function(){return tg(e),a(l)})}function $p(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:T,baseState:T,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hn,lastRenderedState:T},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hn,lastRenderedState:a},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function tg(e){var n=$p(e);n.next===null&&(n=e.alternate.memoizedState),Lr(e,n.next.queue,{},oi())}function Sf(){return Me(kr)}function eg(){return he().memoizedState}function ig(){return he().memoizedState}function v1(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var a=oi();e=Hn(a);var l=qn(n,e,a);l!==null&&(Qe(l,n,a),xr(l,n,a)),n={cache:Xu()},e.payload=n;return}n=n.return}}function _1(e,n,a){var l=oi();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},fo(e)?sg(n,a):(a=Fu(e,n,a,l),a!==null&&(Qe(a,e,l),ag(a,n,l)))}function ng(e,n,a){var l=oi();Lr(e,n,a,l)}function Lr(e,n,a,l){var u={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(fo(e))sg(n,u);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var p=n.lastRenderedState,m=f(p,a);if(u.hasEagerState=!0,u.eagerState=m,ii(m,p))return Yl(e,n,u,0),Kt===null&&ql(),!1}catch{}finally{}if(a=Fu(e,n,u,l),a!==null)return Qe(a,e,l),ag(a,n,l),!0}return!1}function Tf(e,n,a,l){if(l={lane:2,revertLane:td(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},fo(e)){if(n)throw Error(r(479))}else n=Fu(e,a,l,2),n!==null&&Qe(n,e,2)}function fo(e){var n=e.alternate;return e===ft||n!==null&&n===ft}function sg(e,n){fa=so=!0;var a=e.pending;a===null?n.next=n:(n.next=a.next,a.next=n),e.pending=n}function ag(e,n,a){if((a&4194048)!==0){var l=n.lanes;l&=e.pendingLanes,a|=l,n.lanes=a,uy(e,a)}}var Cr={readContext:Me,use:lo,useCallback:ue,useContext:ue,useEffect:ue,useImperativeHandle:ue,useLayoutEffect:ue,useInsertionEffect:ue,useMemo:ue,useReducer:ue,useRef:ue,useState:ue,useDebugValue:ue,useDeferredValue:ue,useTransition:ue,useSyncExternalStore:ue,useId:ue,useHostTransitionStatus:ue,useFormState:ue,useActionState:ue,useOptimistic:ue,useMemoCache:ue,useCacheRefresh:ue};Cr.useEffectEvent=ue;var rg={readContext:Me,use:lo,useCallback:function(e,n){return Ne().memoizedState=[e,n===void 0?null:n],e},useContext:Me,useEffect:Hp,useImperativeHandle:function(e,n,a){a=a!=null?a.concat([e]):null,co(4194308,4,Qp.bind(null,n,e),a)},useLayoutEffect:function(e,n){return co(4194308,4,e,n)},useInsertionEffect:function(e,n){co(4,2,e,n)},useMemo:function(e,n){var a=Ne();n=n===void 0?null:n;var l=e();if(Bs){Nn(!0);try{e()}finally{Nn(!1)}}return a.memoizedState=[l,n],l},useReducer:function(e,n,a){var l=Ne();if(a!==void 0){var u=a(n);if(Bs){Nn(!0);try{a(n)}finally{Nn(!1)}}}else u=n;return l.memoizedState=l.baseState=u,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:u},l.queue=e,e=e.dispatch=_1.bind(null,ft,e),[l.memoizedState,e]},useRef:function(e){var n=Ne();return e={current:e},n.memoizedState=e},useState:function(e){e=pf(e);var n=e.queue,a=ng.bind(null,ft,n);return n.dispatch=a,[e.memoizedState,a]},useDebugValue:vf,useDeferredValue:function(e,n){var a=Ne();return _f(a,e,n)},useTransition:function(){var e=pf(!1);return e=Jp.bind(null,ft,e.queue,!0,!1),Ne().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,a){var l=ft,u=Ne();if(xt){if(a===void 0)throw Error(r(407));a=a()}else{if(a=n(),Kt===null)throw Error(r(349));(St&127)!==0||Op(l,n,a)}u.memoizedState=a;var f={value:a,getSnapshot:n};return u.queue=f,Hp(Lp.bind(null,l,f,e),[e]),l.flags|=2048,ha(9,{destroy:void 0},Mp.bind(null,l,f,a,n),null),a},useId:function(){var e=Ne(),n=Kt.identifierPrefix;if(xt){var a=ji,l=Vi;a=(l&~(1<<32-ei(l)-1)).toString(32)+a,n="_"+n+"R_"+a,a=ao++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=d1++,n="_"+n+"r_"+a.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Sf,useFormState:Fp,useActionState:Fp,useOptimistic:function(e){var n=Ne();n.memoizedState=n.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=Tf.bind(null,ft,!0,a),a.dispatch=n,[e,n]},useMemoCache:df,useCacheRefresh:function(){return Ne().memoizedState=v1.bind(null,ft)},useEffectEvent:function(e){var n=Ne(),a={impl:e};return n.memoizedState=a,function(){if((Rt&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Af={readContext:Me,use:lo,useCallback:Xp,useContext:Me,useEffect:mf,useImperativeHandle:Zp,useInsertionEffect:Yp,useLayoutEffect:kp,useMemo:Kp,useReducer:oo,useRef:Gp,useState:function(){return oo(hn)},useDebugValue:vf,useDeferredValue:function(e,n){var a=he();return Wp(a,Qt.memoizedState,e,n)},useTransition:function(){var e=oo(hn)[0],n=he().memoizedState;return[typeof e=="boolean"?e:Mr(e),n]},useSyncExternalStore:wp,useId:eg,useHostTransitionStatus:Sf,useFormState:Pp,useActionState:Pp,useOptimistic:function(e,n){var a=he();return Bp(a,Qt,e,n)},useMemoCache:df,useCacheRefresh:ig};Af.useEffectEvent=qp;var lg={readContext:Me,use:lo,useCallback:Xp,useContext:Me,useEffect:mf,useImperativeHandle:Zp,useInsertionEffect:Yp,useLayoutEffect:kp,useMemo:Kp,useReducer:yf,useRef:Gp,useState:function(){return yf(hn)},useDebugValue:vf,useDeferredValue:function(e,n){var a=he();return Qt===null?_f(a,e,n):Wp(a,Qt.memoizedState,e,n)},useTransition:function(){var e=yf(hn)[0],n=he().memoizedState;return[typeof e=="boolean"?e:Mr(e),n]},useSyncExternalStore:wp,useId:eg,useHostTransitionStatus:Sf,useFormState:jp,useActionState:jp,useOptimistic:function(e,n){var a=he();return Qt!==null?Bp(a,Qt,e,n):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:df,useCacheRefresh:ig};lg.useEffectEvent=qp;function xf(e,n,a,l){n=e.memoizedState,a=a(l,n),a=a==null?n:b({},n,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Ef={enqueueSetState:function(e,n,a){e=e._reactInternals;var l=oi(),u=Hn(l);u.payload=n,a!=null&&(u.callback=a),n=qn(e,u,l),n!==null&&(Qe(n,e,l),xr(n,e,l))},enqueueReplaceState:function(e,n,a){e=e._reactInternals;var l=oi(),u=Hn(l);u.tag=1,u.payload=n,a!=null&&(u.callback=a),n=qn(e,u,l),n!==null&&(Qe(n,e,l),xr(n,e,l))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var a=oi(),l=Hn(a);l.tag=2,n!=null&&(l.callback=n),n=qn(e,l,a),n!==null&&(Qe(n,e,a),xr(n,e,a))}};function og(e,n,a,l,u,f,p){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,f,p):n.prototype&&n.prototype.isPureReactComponent?!gr(a,l)||!gr(u,f):!0}function cg(e,n,a,l){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,l),n.state!==e&&Ef.enqueueReplaceState(n,n.state,null)}function Is(e,n){var a=n;if("ref"in n){a={};for(var l in n)l!=="ref"&&(a[l]=n[l])}if(e=e.defaultProps){a===n&&(a=b({},a));for(var u in e)a[u]===void 0&&(a[u]=e[u])}return a}function ug(e){Hl(e)}function fg(e){console.error(e)}function dg(e){Hl(e)}function ho(e,n){try{var a=e.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function hg(e,n,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function wf(e,n,a){return a=Hn(a),a.tag=3,a.payload={element:null},a.callback=function(){ho(e,n)},a}function yg(e){return e=Hn(e),e.tag=3,e}function pg(e,n,a,l){var u=a.type.getDerivedStateFromError;if(typeof u=="function"){var f=l.value;e.payload=function(){return u(f)},e.callback=function(){hg(n,a,l)}}var p=a.stateNode;p!==null&&typeof p.componentDidCatch=="function"&&(e.callback=function(){hg(n,a,l),typeof u!="function"&&(Kn===null?Kn=new Set([this]):Kn.add(this));var m=l.stack;this.componentDidCatch(l.value,{componentStack:m!==null?m:""})})}function b1(e,n,a,l,u){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=a.alternate,n!==null&&aa(n,a,u,!0),a=si.current,a!==null){switch(a.tag){case 31:case 13:return bi===null?Eo():a.alternate===null&&fe===0&&(fe=3),a.flags&=-257,a.flags|=65536,a.lanes=u,l===$l?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([l]):n.add(l),Wf(e,l,u)),!1;case 22:return a.flags|=65536,l===$l?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([l]):a.add(l)),Wf(e,l,u)),!1}throw Error(r(435,a.tag))}return Wf(e,l,u),Eo(),!1}if(xt)return n=si.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=u,l!==qu&&(e=Error(r(422),{cause:l}),_r(gi(e,a)))):(l!==qu&&(n=Error(r(423),{cause:l}),_r(gi(n,a))),e=e.current.alternate,e.flags|=65536,u&=-u,e.lanes|=u,l=gi(l,a),u=wf(e.stateNode,l,u),ef(e,u),fe!==4&&(fe=2)),!1;var f=Error(r(520),{cause:l});if(f=gi(f,a),Fr===null?Fr=[f]:Fr.push(f),fe!==4&&(fe=2),n===null)return!0;l=gi(l,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,e=u&-u,a.lanes|=e,e=wf(a.stateNode,l,e),ef(a,e),!1;case 1:if(n=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Kn===null||!Kn.has(f))))return a.flags|=65536,u&=-u,a.lanes|=u,u=yg(u),pg(u,e,a,l),ef(a,u),!1}a=a.return}while(a!==null);return!1}var Of=Error(r(461)),me=!1;function Le(e,n,a,l){n.child=e===null?_p(n,null,a,l):Ds(n,e.child,a,l)}function gg(e,n,a,l,u){a=a.render;var f=n.ref;if("ref"in l){var p={};for(var m in l)m!=="ref"&&(p[m]=l[m])}else p=l;return Os(n),l=of(e,n,a,p,f,u),m=cf(),e!==null&&!me?(uf(e,n,u),yn(e,n,u)):(xt&&m&&Gu(n),n.flags|=1,Le(e,n,l,u),n.child)}function mg(e,n,a,l,u){if(e===null){var f=a.type;return typeof f=="function"&&!Pu(f)&&f.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=f,vg(e,n,f,l,u)):(e=Ql(a.type,null,l,n,n.mode,u),e.ref=n.ref,e.return=n,n.child=e)}if(f=e.child,!Nf(e,u)){var p=f.memoizedProps;if(a=a.compare,a=a!==null?a:gr,a(p,l)&&e.ref===n.ref)return yn(e,n,u)}return n.flags|=1,e=on(f,l),e.ref=n.ref,e.return=n,n.child=e}function vg(e,n,a,l,u){if(e!==null){var f=e.memoizedProps;if(gr(f,l)&&e.ref===n.ref)if(me=!1,n.pendingProps=l=f,Nf(e,u))(e.flags&131072)!==0&&(me=!0);else return n.lanes=e.lanes,yn(e,n,u)}return Mf(e,n,a,l,u)}function _g(e,n,a,l){var u=l.children,f=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((n.flags&128)!==0){if(f=f!==null?f.baseLanes|a:a,e!==null){for(l=n.child=e.child,u=0;l!==null;)u=u|l.lanes|l.childLanes,l=l.sibling;l=u&~f}else l=0,n.child=null;return bg(e,n,f,a,l)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Wl(n,f!==null?f.cachePool:null),f!==null?Tp(n,f):sf(),Ap(n);else return l=n.lanes=536870912,bg(e,n,f!==null?f.baseLanes|a:a,a,l)}else f!==null?(Wl(n,f.cachePool),Tp(n,f),kn(),n.memoizedState=null):(e!==null&&Wl(n,null),sf(),kn());return Le(e,n,u,a),n.child}function Dr(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function bg(e,n,a,l,u){var f=Wu();return f=f===null?null:{parent:pe._currentValue,pool:f},n.memoizedState={baseLanes:a,cachePool:f},e!==null&&Wl(n,null),sf(),Ap(n),e!==null&&aa(e,n,l,!0),n.childLanes=u,null}function yo(e,n){return n=go({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function Sg(e,n,a){return Ds(n,e.child,null,a),e=yo(n,n.pendingProps),e.flags|=2,ai(n),n.memoizedState=null,e}function S1(e,n,a){var l=n.pendingProps,u=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(xt){if(l.mode==="hidden")return e=yo(n,l),n.lanes=536870912,Dr(null,e);if(rf(n),(e=ee)?(e=Im(e,_i),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Fn!==null?{id:Vi,overflow:ji}:null,retryLane:536870912,hydrationErrors:null},a=sp(e),a.return=n,n.child=a,Oe=n,ee=null)):e=null,e===null)throw Vn(n);return n.lanes=536870912,null}return yo(n,l)}var f=e.memoizedState;if(f!==null){var p=f.dehydrated;if(rf(n),u)if(n.flags&256)n.flags&=-257,n=Sg(e,n,a);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(r(558));else if(me||aa(e,n,a,!1),u=(a&e.childLanes)!==0,me||u){if(l=Kt,l!==null&&(p=fy(l,a),p!==0&&p!==f.retryLane))throw f.retryLane=p,As(e,p),Qe(l,e,p),Of;Eo(),n=Sg(e,n,a)}else e=f.treeContext,ee=Si(p.nextSibling),Oe=n,xt=!0,Pn=null,_i=!1,e!==null&&lp(n,e),n=yo(n,l),n.flags|=4096;return n}return e=on(e.child,{mode:l.mode,children:l.children}),e.ref=n.ref,n.child=e,e.return=n,e}function po(e,n){var a=n.ref;if(a===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(e===null||e.ref!==a)&&(n.flags|=4194816)}}function Mf(e,n,a,l,u){return Os(n),a=of(e,n,a,l,void 0,u),l=cf(),e!==null&&!me?(uf(e,n,u),yn(e,n,u)):(xt&&l&&Gu(n),n.flags|=1,Le(e,n,a,u),n.child)}function Tg(e,n,a,l,u,f){return Os(n),n.updateQueue=null,a=Ep(n,l,a,u),xp(e),l=cf(),e!==null&&!me?(uf(e,n,f),yn(e,n,f)):(xt&&l&&Gu(n),n.flags|=1,Le(e,n,a,f),n.child)}function Ag(e,n,a,l,u){if(Os(n),n.stateNode===null){var f=ea,p=a.contextType;typeof p=="object"&&p!==null&&(f=Me(p)),f=new a(l,f),n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Ef,n.stateNode=f,f._reactInternals=n,f=n.stateNode,f.props=l,f.state=n.memoizedState,f.refs={},$u(n),p=a.contextType,f.context=typeof p=="object"&&p!==null?Me(p):ea,f.state=n.memoizedState,p=a.getDerivedStateFromProps,typeof p=="function"&&(xf(n,a,p,l),f.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(p=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),p!==f.state&&Ef.enqueueReplaceState(f,f.state,null),wr(n,l,f,u),Er(),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(e===null){f=n.stateNode;var m=n.memoizedProps,S=Is(a,m);f.props=S;var C=f.context,N=a.contextType;p=ea,typeof N=="object"&&N!==null&&(p=Me(N));var F=a.getDerivedStateFromProps;N=typeof F=="function"||typeof f.getSnapshotBeforeUpdate=="function",m=n.pendingProps!==m,N||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(m||C!==p)&&cg(n,f,l,p),Gn=!1;var D=n.memoizedState;f.state=D,wr(n,l,f,u),Er(),C=n.memoizedState,m||D!==C||Gn?(typeof F=="function"&&(xf(n,a,F,l),C=n.memoizedState),(S=Gn||og(n,a,S,l,D,C,p))?(N||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(n.flags|=4194308)):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=C),f.props=l,f.state=C,f.context=p,l=S):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{f=n.stateNode,tf(e,n),p=n.memoizedProps,N=Is(a,p),f.props=N,F=n.pendingProps,D=f.context,C=a.contextType,S=ea,typeof C=="object"&&C!==null&&(S=Me(C)),m=a.getDerivedStateFromProps,(C=typeof m=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(p!==F||D!==S)&&cg(n,f,l,S),Gn=!1,D=n.memoizedState,f.state=D,wr(n,l,f,u),Er();var B=n.memoizedState;p!==F||D!==B||Gn||e!==null&&e.dependencies!==null&&Xl(e.dependencies)?(typeof m=="function"&&(xf(n,a,m,l),B=n.memoizedState),(N=Gn||og(n,a,N,l,D,B,S)||e!==null&&e.dependencies!==null&&Xl(e.dependencies))?(C||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,B,S),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,B,S)),typeof f.componentDidUpdate=="function"&&(n.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof f.componentDidUpdate!="function"||p===e.memoizedProps&&D===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&D===e.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=B),f.props=l,f.state=B,f.context=S,l=N):(typeof f.componentDidUpdate!="function"||p===e.memoizedProps&&D===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&D===e.memoizedState||(n.flags|=1024),l=!1)}return f=l,po(e,n),l=(n.flags&128)!==0,f||l?(f=n.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),n.flags|=1,e!==null&&l?(n.child=Ds(n,e.child,null,u),n.child=Ds(n,null,a,u)):Le(e,n,a,u),n.memoizedState=f.state,e=n.child):e=yn(e,n,u),e}function xg(e,n,a,l){return Es(),n.flags|=256,Le(e,n,a,l),n.child}var Lf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Cf(e){return{baseLanes:e,cachePool:hp()}}function Df(e,n,a){return e=e!==null?e.childLanes&~a:0,n&&(e|=li),e}function Eg(e,n,a){var l=n.pendingProps,u=!1,f=(n.flags&128)!==0,p;if((p=f)||(p=e!==null&&e.memoizedState===null?!1:(de.current&2)!==0),p&&(u=!0,n.flags&=-129),p=(n.flags&32)!==0,n.flags&=-33,e===null){if(xt){if(u?Yn(n):kn(),(e=ee)?(e=Im(e,_i),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Fn!==null?{id:Vi,overflow:ji}:null,retryLane:536870912,hydrationErrors:null},a=sp(e),a.return=n,n.child=a,Oe=n,ee=null)):e=null,e===null)throw Vn(n);return hd(e)?n.lanes=32:n.lanes=536870912,null}var m=l.children;return l=l.fallback,u?(kn(),u=n.mode,m=go({mode:"hidden",children:m},u),l=xs(l,u,a,null),m.return=n,l.return=n,m.sibling=l,n.child=m,l=n.child,l.memoizedState=Cf(a),l.childLanes=Df(e,p,a),n.memoizedState=Lf,Dr(null,l)):(Yn(n),Bf(n,m))}var S=e.memoizedState;if(S!==null&&(m=S.dehydrated,m!==null)){if(f)n.flags&256?(Yn(n),n.flags&=-257,n=If(e,n,a)):n.memoizedState!==null?(kn(),n.child=e.child,n.flags|=128,n=null):(kn(),m=l.fallback,u=n.mode,l=go({mode:"visible",children:l.children},u),m=xs(m,u,a,null),m.flags|=2,l.return=n,m.return=n,l.sibling=m,n.child=l,Ds(n,e.child,null,a),l=n.child,l.memoizedState=Cf(a),l.childLanes=Df(e,p,a),n.memoizedState=Lf,n=Dr(null,l));else if(Yn(n),hd(m)){if(p=m.nextSibling&&m.nextSibling.dataset,p)var C=p.dgst;p=C,l=Error(r(419)),l.stack="",l.digest=p,_r({value:l,source:null,stack:null}),n=If(e,n,a)}else if(me||aa(e,n,a,!1),p=(a&e.childLanes)!==0,me||p){if(p=Kt,p!==null&&(l=fy(p,a),l!==0&&l!==S.retryLane))throw S.retryLane=l,As(e,l),Qe(p,e,l),Of;dd(m)||Eo(),n=If(e,n,a)}else dd(m)?(n.flags|=192,n.child=e.child,n=null):(e=S.treeContext,ee=Si(m.nextSibling),Oe=n,xt=!0,Pn=null,_i=!1,e!==null&&lp(n,e),n=Bf(n,l.children),n.flags|=4096);return n}return u?(kn(),m=l.fallback,u=n.mode,S=e.child,C=S.sibling,l=on(S,{mode:"hidden",children:l.children}),l.subtreeFlags=S.subtreeFlags&65011712,C!==null?m=on(C,m):(m=xs(m,u,a,null),m.flags|=2),m.return=n,l.return=n,l.sibling=m,n.child=l,Dr(null,l),l=n.child,m=e.child.memoizedState,m===null?m=Cf(a):(u=m.cachePool,u!==null?(S=pe._currentValue,u=u.parent!==S?{parent:S,pool:S}:u):u=hp(),m={baseLanes:m.baseLanes|a,cachePool:u}),l.memoizedState=m,l.childLanes=Df(e,p,a),n.memoizedState=Lf,Dr(e.child,l)):(Yn(n),a=e.child,e=a.sibling,a=on(a,{mode:"visible",children:l.children}),a.return=n,a.sibling=null,e!==null&&(p=n.deletions,p===null?(n.deletions=[e],n.flags|=16):p.push(e)),n.child=a,n.memoizedState=null,a)}function Bf(e,n){return n=go({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function go(e,n){return e=ni(22,e,null,n),e.lanes=0,e}function If(e,n,a){return Ds(n,e.child,null,a),e=Bf(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function wg(e,n,a){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n),Qu(e.return,n,a)}function Rf(e,n,a,l,u,f){var p=e.memoizedState;p===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:u,treeForkCount:f}:(p.isBackwards=n,p.rendering=null,p.renderingStartTime=0,p.last=l,p.tail=a,p.tailMode=u,p.treeForkCount=f)}function Og(e,n,a){var l=n.pendingProps,u=l.revealOrder,f=l.tail;l=l.children;var p=de.current,m=(p&2)!==0;if(m?(p=p&1|2,n.flags|=128):p&=1,G(de,p),Le(e,n,l,a),l=xt?vr:0,!m&&e!==null&&(e.flags&128)!==0)t:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&wg(e,a,n);else if(e.tag===19)wg(e,a,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break t;for(;e.sibling===null;){if(e.return===null||e.return===n)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(u){case"forwards":for(a=n.child,u=null;a!==null;)e=a.alternate,e!==null&&no(e)===null&&(u=a),a=a.sibling;a=u,a===null?(u=n.child,n.child=null):(u=a.sibling,a.sibling=null),Rf(n,!1,u,a,f,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,u=n.child,n.child=null;u!==null;){if(e=u.alternate,e!==null&&no(e)===null){n.child=u;break}e=u.sibling,u.sibling=a,a=u,u=e}Rf(n,!0,a,null,f,l);break;case"together":Rf(n,!1,null,null,void 0,l);break;default:n.memoizedState=null}return n.child}function yn(e,n,a){if(e!==null&&(n.dependencies=e.dependencies),Xn|=n.lanes,(a&n.childLanes)===0)if(e!==null){if(aa(e,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(r(153));if(n.child!==null){for(e=n.child,a=on(e,e.pendingProps),n.child=a,a.return=n;e.sibling!==null;)e=e.sibling,a=a.sibling=on(e,e.pendingProps),a.return=n;a.sibling=null}return n.child}function Nf(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Xl(e)))}function T1(e,n,a){switch(n.tag){case 3:At(n,n.stateNode.containerInfo),jn(n,pe,e.memoizedState.cache),Es();break;case 27:case 5:zt(n);break;case 4:At(n,n.stateNode.containerInfo);break;case 10:jn(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,rf(n),null;break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(Yn(n),n.flags|=128,null):(a&n.child.childLanes)!==0?Eg(e,n,a):(Yn(n),e=yn(e,n,a),e!==null?e.sibling:null);Yn(n);break;case 19:var u=(e.flags&128)!==0;if(l=(a&n.childLanes)!==0,l||(aa(e,n,a,!1),l=(a&n.childLanes)!==0),u){if(l)return Og(e,n,a);n.flags|=128}if(u=n.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),G(de,de.current),l)break;return null;case 22:return n.lanes=0,_g(e,n,a,n.pendingProps);case 24:jn(n,pe,e.memoizedState.cache)}return yn(e,n,a)}function Mg(e,n,a){if(e!==null)if(e.memoizedProps!==n.pendingProps)me=!0;else{if(!Nf(e,a)&&(n.flags&128)===0)return me=!1,T1(e,n,a);me=(e.flags&131072)!==0}else me=!1,xt&&(n.flags&1048576)!==0&&rp(n,vr,n.index);switch(n.lanes=0,n.tag){case 16:t:{var l=n.pendingProps;if(e=Ls(n.elementType),n.type=e,typeof e=="function")Pu(e)?(l=Is(e,l),n.tag=1,n=Ag(null,n,e,l,a)):(n.tag=0,n=Mf(null,n,e,l,a));else{if(e!=null){var u=e.$$typeof;if(u===Nt){n.tag=11,n=gg(null,n,e,l,a);break t}else if(u===Jt){n.tag=14,n=mg(null,n,e,l,a);break t}}throw n=kt(e)||e,Error(r(306,n,""))}}return n;case 0:return Mf(e,n,n.type,n.pendingProps,a);case 1:return l=n.type,u=Is(l,n.pendingProps),Ag(e,n,l,u,a);case 3:t:{if(At(n,n.stateNode.containerInfo),e===null)throw Error(r(387));l=n.pendingProps;var f=n.memoizedState;u=f.element,tf(e,n),wr(n,l,null,a);var p=n.memoizedState;if(l=p.cache,jn(n,pe,l),l!==f.cache&&Zu(n,[pe],a,!0),Er(),l=p.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:p.cache},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){n=xg(e,n,l,a);break t}else if(l!==u){u=gi(Error(r(424)),n),_r(u),n=xg(e,n,l,a);break t}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(ee=Si(e.firstChild),Oe=n,xt=!0,Pn=null,_i=!0,a=_p(n,null,l,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Es(),l===u){n=yn(e,n,a);break t}Le(e,n,l,a)}n=n.child}return n;case 26:return po(e,n),e===null?(a=Pm(n.type,null,n.pendingProps,null))?n.memoizedState=a:xt||(a=n.type,e=n.pendingProps,l=Bo(Lt.current).createElement(a),l[we]=n,l[je]=e,Ce(l,a,e),xe(l),n.stateNode=l):n.memoizedState=Pm(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return zt(n),e===null&&xt&&(l=n.stateNode=zm(n.type,n.pendingProps,Lt.current),Oe=n,_i=!0,u=ee,ts(n.type)?(yd=u,ee=Si(l.firstChild)):ee=u),Le(e,n,n.pendingProps.children,a),po(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&xt&&((u=l=ee)&&(l=J1(l,n.type,n.pendingProps,_i),l!==null?(n.stateNode=l,Oe=n,ee=Si(l.firstChild),_i=!1,u=!0):u=!1),u||Vn(n)),zt(n),u=n.type,f=n.pendingProps,p=e!==null?e.memoizedProps:null,l=f.children,cd(u,f)?l=null:p!==null&&cd(u,p)&&(n.flags|=32),n.memoizedState!==null&&(u=of(e,n,h1,null,null,a),kr._currentValue=u),po(e,n),Le(e,n,l,a),n.child;case 6:return e===null&&xt&&((e=a=ee)&&(a=$1(a,n.pendingProps,_i),a!==null?(n.stateNode=a,Oe=n,ee=null,e=!0):e=!1),e||Vn(n)),null;case 13:return Eg(e,n,a);case 4:return At(n,n.stateNode.containerInfo),l=n.pendingProps,e===null?n.child=Ds(n,null,l,a):Le(e,n,l,a),n.child;case 11:return gg(e,n,n.type,n.pendingProps,a);case 7:return Le(e,n,n.pendingProps,a),n.child;case 8:return Le(e,n,n.pendingProps.children,a),n.child;case 12:return Le(e,n,n.pendingProps.children,a),n.child;case 10:return l=n.pendingProps,jn(n,n.type,l.value),Le(e,n,l.children,a),n.child;case 9:return u=n.type._context,l=n.pendingProps.children,Os(n),u=Me(u),l=l(u),n.flags|=1,Le(e,n,l,a),n.child;case 14:return mg(e,n,n.type,n.pendingProps,a);case 15:return vg(e,n,n.type,n.pendingProps,a);case 19:return Og(e,n,a);case 31:return S1(e,n,a);case 22:return _g(e,n,a,n.pendingProps);case 24:return Os(n),l=Me(pe),e===null?(u=Wu(),u===null&&(u=Kt,f=Xu(),u.pooledCache=f,f.refCount++,f!==null&&(u.pooledCacheLanes|=a),u=f),n.memoizedState={parent:l,cache:u},$u(n),jn(n,pe,u)):((e.lanes&a)!==0&&(tf(e,n),wr(n,null,null,a),Er()),u=e.memoizedState,f=n.memoizedState,u.parent!==l?(u={parent:l,cache:l},n.memoizedState=u,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=u),jn(n,pe,l)):(l=f.cache,jn(n,pe,l),l!==u.cache&&Zu(n,[pe],a,!0))),Le(e,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(r(156,n.tag))}function pn(e){e.flags|=4}function zf(e,n,a,l,u){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(u&335544128)===u)if(e.stateNode.complete)e.flags|=8192;else if(em())e.flags|=8192;else throw Cs=$l,Ju}else e.flags&=-16777217}function Lg(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!qm(n))if(em())e.flags|=8192;else throw Cs=$l,Ju}function mo(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?oy():536870912,e.lanes|=n,ma|=n)}function Br(e,n){if(!xt)switch(e.tailMode){case"hidden":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function ie(e){var n=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(n)for(var u=e.child;u!==null;)a|=u.lanes|u.childLanes,l|=u.subtreeFlags&65011712,l|=u.flags&65011712,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)a|=u.lanes|u.childLanes,l|=u.subtreeFlags,l|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=l,e.childLanes=a,n}function A1(e,n,a){var l=n.pendingProps;switch(Hu(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ie(n),null;case 1:return ie(n),null;case 3:return a=n.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),fn(pe),re(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(sa(n)?pn(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Yu())),ie(n),null;case 26:var u=n.type,f=n.memoizedState;return e===null?(pn(n),f!==null?(ie(n),Lg(n,f)):(ie(n),zf(n,u,null,l,a))):f?f!==e.memoizedState?(pn(n),ie(n),Lg(n,f)):(ie(n),n.flags&=-16777217):(e=e.memoizedProps,e!==l&&pn(n),ie(n),zf(n,u,e,l,a)),null;case 27:if(Fi(n),a=Lt.current,u=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&pn(n);else{if(!l){if(n.stateNode===null)throw Error(r(166));return ie(n),null}e=k.current,sa(n)?op(n):(e=zm(u,l,a),n.stateNode=e,pn(n))}return ie(n),null;case 5:if(Fi(n),u=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&pn(n);else{if(!l){if(n.stateNode===null)throw Error(r(166));return ie(n),null}if(f=k.current,sa(n))op(n);else{var p=Bo(Lt.current);switch(f){case 1:f=p.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:f=p.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":f=p.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":f=p.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":f=p.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof l.is=="string"?p.createElement("select",{is:l.is}):p.createElement("select"),l.multiple?f.multiple=!0:l.size&&(f.size=l.size);break;default:f=typeof l.is=="string"?p.createElement(u,{is:l.is}):p.createElement(u)}}f[we]=n,f[je]=l;t:for(p=n.child;p!==null;){if(p.tag===5||p.tag===6)f.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===n)break t;for(;p.sibling===null;){if(p.return===null||p.return===n)break t;p=p.return}p.sibling.return=p.return,p=p.sibling}n.stateNode=f;t:switch(Ce(f,u,l),u){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break t;case"img":l=!0;break t;default:l=!1}l&&pn(n)}}return ie(n),zf(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,a),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==l&&pn(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(r(166));if(e=Lt.current,sa(n)){if(e=n.stateNode,a=n.memoizedProps,l=null,u=Oe,u!==null)switch(u.tag){case 27:case 5:l=u.memoizedProps}e[we]=n,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Em(e.nodeValue,a)),e||Vn(n,!0)}else e=Bo(e).createTextNode(l),e[we]=n,n.stateNode=e}return ie(n),null;case 31:if(a=n.memoizedState,e===null||e.memoizedState!==null){if(l=sa(n),a!==null){if(e===null){if(!l)throw Error(r(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(557));e[we]=n}else Es(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;ie(n),e=!1}else a=Yu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return n.flags&256?(ai(n),n):(ai(n),null);if((n.flags&128)!==0)throw Error(r(558))}return ie(n),null;case 13:if(l=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(u=sa(n),l!==null&&l.dehydrated!==null){if(e===null){if(!u)throw Error(r(318));if(u=n.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(r(317));u[we]=n}else Es(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;ie(n),u=!1}else u=Yu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=u),u=!0;if(!u)return n.flags&256?(ai(n),n):(ai(n),null)}return ai(n),(n.flags&128)!==0?(n.lanes=a,n):(a=l!==null,e=e!==null&&e.memoizedState!==null,a&&(l=n.child,u=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(u=l.alternate.memoizedState.cachePool.pool),f=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==u&&(l.flags|=2048)),a!==e&&a&&(n.child.flags|=8192),mo(n,n.updateQueue),ie(n),null);case 4:return re(),e===null&&sd(n.stateNode.containerInfo),ie(n),null;case 10:return fn(n.type),ie(n),null;case 19:if(z(de),l=n.memoizedState,l===null)return ie(n),null;if(u=(n.flags&128)!==0,f=l.rendering,f===null)if(u)Br(l,!1);else{if(fe!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(f=no(e),f!==null){for(n.flags|=128,Br(l,!1),e=f.updateQueue,n.updateQueue=e,mo(n,e),n.subtreeFlags=0,e=a,a=n.child;a!==null;)np(a,e),a=a.sibling;return G(de,de.current&1|2),xt&&cn(n,l.treeForkCount),n.child}e=e.sibling}l.tail!==null&&$e()>To&&(n.flags|=128,u=!0,Br(l,!1),n.lanes=4194304)}else{if(!u)if(e=no(f),e!==null){if(n.flags|=128,u=!0,e=e.updateQueue,n.updateQueue=e,mo(n,e),Br(l,!0),l.tail===null&&l.tailMode==="hidden"&&!f.alternate&&!xt)return ie(n),null}else 2*$e()-l.renderingStartTime>To&&a!==536870912&&(n.flags|=128,u=!0,Br(l,!1),n.lanes=4194304);l.isBackwards?(f.sibling=n.child,n.child=f):(e=l.last,e!==null?e.sibling=f:n.child=f,l.last=f)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=$e(),e.sibling=null,a=de.current,G(de,u?a&1|2:a&1),xt&&cn(n,l.treeForkCount),e):(ie(n),null);case 22:case 23:return ai(n),af(),l=n.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(a&536870912)!==0&&(n.flags&128)===0&&(ie(n),n.subtreeFlags&6&&(n.flags|=8192)):ie(n),a=n.updateQueue,a!==null&&mo(n,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==a&&(n.flags|=2048),e!==null&&z(Ms),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),fn(pe),ie(n),null;case 25:return null;case 30:return null}throw Error(r(156,n.tag))}function x1(e,n){switch(Hu(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return fn(pe),re(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return Fi(n),null;case 31:if(n.memoizedState!==null){if(ai(n),n.alternate===null)throw Error(r(340));Es()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(ai(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(r(340));Es()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return z(de),null;case 4:return re(),null;case 10:return fn(n.type),null;case 22:case 23:return ai(n),af(),e!==null&&z(Ms),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return fn(pe),null;case 25:return null;default:return null}}function Cg(e,n){switch(Hu(n),n.tag){case 3:fn(pe),re();break;case 26:case 27:case 5:Fi(n);break;case 4:re();break;case 31:n.memoizedState!==null&&ai(n);break;case 13:ai(n);break;case 19:z(de);break;case 10:fn(n.type);break;case 22:case 23:ai(n),af(),e!==null&&z(Ms);break;case 24:fn(pe)}}function Ir(e,n){try{var a=n.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var u=l.next;a=u;do{if((a.tag&e)===e){l=void 0;var f=a.create,p=a.inst;l=f(),p.destroy=l}a=a.next}while(a!==u)}}catch(m){jt(n,n.return,m)}}function Qn(e,n,a){try{var l=n.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var f=u.next;l=f;do{if((l.tag&e)===e){var p=l.inst,m=p.destroy;if(m!==void 0){p.destroy=void 0,u=n;var S=a,C=m;try{C()}catch(N){jt(u,S,N)}}}l=l.next}while(l!==f)}}catch(N){jt(n,n.return,N)}}function Dg(e){var n=e.updateQueue;if(n!==null){var a=e.stateNode;try{Sp(n,a)}catch(l){jt(e,e.return,l)}}}function Bg(e,n,a){a.props=Is(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){jt(e,n,l)}}function Rr(e,n){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(u){jt(e,n,u)}}function Gi(e,n){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(u){jt(e,n,u)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(u){jt(e,n,u)}else a.current=null}function Ig(e){var n=e.type,a=e.memoizedProps,l=e.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(u){jt(e,e.return,u)}}function Uf(e,n,a){try{var l=e.stateNode;k1(l,e.type,a,n),l[je]=n}catch(u){jt(e,e.return,u)}}function Rg(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ts(e.type)||e.tag===4}function Ff(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||Rg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ts(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Pf(e,n,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(e),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=rn));else if(l!==4&&(l===27&&ts(e.type)&&(a=e.stateNode,n=null),e=e.child,e!==null))for(Pf(e,n,a),e=e.sibling;e!==null;)Pf(e,n,a),e=e.sibling}function vo(e,n,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?a.insertBefore(e,n):a.appendChild(e);else if(l!==4&&(l===27&&ts(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(vo(e,n,a),e=e.sibling;e!==null;)vo(e,n,a),e=e.sibling}function Ng(e){var n=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,u=n.attributes;u.length;)n.removeAttributeNode(u[0]);Ce(n,l,a),n[we]=e,n[je]=a}catch(f){jt(e,e.return,f)}}var gn=!1,ve=!1,Vf=!1,zg=typeof WeakSet=="function"?WeakSet:Set,Ee=null;function E1(e,n){if(e=e.containerInfo,ld=Po,e=Zy(e),Bu(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var u=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break t}var p=0,m=-1,S=-1,C=0,N=0,F=e,D=null;e:for(;;){for(var B;F!==a||u!==0&&F.nodeType!==3||(m=p+u),F!==f||l!==0&&F.nodeType!==3||(S=p+l),F.nodeType===3&&(p+=F.nodeValue.length),(B=F.firstChild)!==null;)D=F,F=B;for(;;){if(F===e)break e;if(D===a&&++C===u&&(m=p),D===f&&++N===l&&(S=p),(B=F.nextSibling)!==null)break;F=D,D=F.parentNode}F=B}a=m===-1||S===-1?null:{start:m,end:S}}else a=null}a=a||{start:0,end:0}}else a=null;for(od={focusedElem:e,selectionRange:a},Po=!1,Ee=n;Ee!==null;)if(n=Ee,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,Ee=e;else for(;Ee!==null;){switch(n=Ee,f=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)u=e[a],u.ref.impl=u.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,a=n,u=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var Y=Is(a.type,u);e=l.getSnapshotBeforeUpdate(Y,f),l.__reactInternalSnapshotBeforeUpdate=e}catch($){jt(a,a.return,$)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,a=e.nodeType,a===9)fd(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":fd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=n.sibling,e!==null){e.return=n.return,Ee=e;break}Ee=n.return}}function Ug(e,n,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:vn(e,a),l&4&&Ir(5,a);break;case 1:if(vn(e,a),l&4)if(e=a.stateNode,n===null)try{e.componentDidMount()}catch(p){jt(a,a.return,p)}else{var u=Is(a.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(u,n,e.__reactInternalSnapshotBeforeUpdate)}catch(p){jt(a,a.return,p)}}l&64&&Dg(a),l&512&&Rr(a,a.return);break;case 3:if(vn(e,a),l&64&&(e=a.updateQueue,e!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{Sp(e,n)}catch(p){jt(a,a.return,p)}}break;case 27:n===null&&l&4&&Ng(a);case 26:case 5:vn(e,a),n===null&&l&4&&Ig(a),l&512&&Rr(a,a.return);break;case 12:vn(e,a);break;case 31:vn(e,a),l&4&&Vg(e,a);break;case 13:vn(e,a),l&4&&jg(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=R1.bind(null,a),tT(e,a))));break;case 22:if(l=a.memoizedState!==null||gn,!l){n=n!==null&&n.memoizedState!==null||ve,u=gn;var f=ve;gn=l,(ve=n)&&!f?_n(e,a,(a.subtreeFlags&8772)!==0):vn(e,a),gn=u,ve=f}break;case 30:break;default:vn(e,a)}}function Fg(e){var n=e.alternate;n!==null&&(e.alternate=null,Fg(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&pu(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ae=null,He=!1;function mn(e,n,a){for(a=a.child;a!==null;)Pg(e,n,a),a=a.sibling}function Pg(e,n,a){if(ti&&typeof ti.onCommitFiberUnmount=="function")try{ti.onCommitFiberUnmount(sr,a)}catch{}switch(a.tag){case 26:ve||Gi(a,n),mn(e,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ve||Gi(a,n);var l=ae,u=He;ts(a.type)&&(ae=a.stateNode,He=!1),mn(e,n,a),Hr(a.stateNode),ae=l,He=u;break;case 5:ve||Gi(a,n);case 6:if(l=ae,u=He,ae=null,mn(e,n,a),ae=l,He=u,ae!==null)if(He)try{(ae.nodeType===9?ae.body:ae.nodeName==="HTML"?ae.ownerDocument.body:ae).removeChild(a.stateNode)}catch(f){jt(a,n,f)}else try{ae.removeChild(a.stateNode)}catch(f){jt(a,n,f)}break;case 18:ae!==null&&(He?(e=ae,Dm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Ea(e)):Dm(ae,a.stateNode));break;case 4:l=ae,u=He,ae=a.stateNode.containerInfo,He=!0,mn(e,n,a),ae=l,He=u;break;case 0:case 11:case 14:case 15:Qn(2,a,n),ve||Qn(4,a,n),mn(e,n,a);break;case 1:ve||(Gi(a,n),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Bg(a,n,l)),mn(e,n,a);break;case 21:mn(e,n,a);break;case 22:ve=(l=ve)||a.memoizedState!==null,mn(e,n,a),ve=l;break;default:mn(e,n,a)}}function Vg(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ea(e)}catch(a){jt(n,n.return,a)}}}function jg(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ea(e)}catch(a){jt(n,n.return,a)}}function w1(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new zg),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new zg),n;default:throw Error(r(435,e.tag))}}function _o(e,n){var a=w1(e);n.forEach(function(l){if(!a.has(l)){a.add(l);var u=N1.bind(null,e,l);l.then(u,u)}})}function qe(e,n){var a=n.deletions;if(a!==null)for(var l=0;l<a.length;l++){var u=a[l],f=e,p=n,m=p;t:for(;m!==null;){switch(m.tag){case 27:if(ts(m.type)){ae=m.stateNode,He=!1;break t}break;case 5:ae=m.stateNode,He=!1;break t;case 3:case 4:ae=m.stateNode.containerInfo,He=!0;break t}m=m.return}if(ae===null)throw Error(r(160));Pg(f,p,u),ae=null,He=!1,f=u.alternate,f!==null&&(f.return=null),u.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Gg(n,e),n=n.sibling}var Di=null;function Gg(e,n){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:qe(n,e),Ye(e),l&4&&(Qn(3,e,e.return),Ir(3,e),Qn(5,e,e.return));break;case 1:qe(n,e),Ye(e),l&512&&(ve||a===null||Gi(a,a.return)),l&64&&gn&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var u=Di;if(qe(n,e),Ye(e),l&512&&(ve||a===null||Gi(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){t:{l=e.type,a=e.memoizedProps,u=u.ownerDocument||u;e:switch(l){case"title":f=u.getElementsByTagName("title")[0],(!f||f[lr]||f[we]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=u.createElement(l),u.head.insertBefore(f,u.querySelector("head > title"))),Ce(f,l,a),f[we]=e,xe(f),l=f;break t;case"link":var p=Gm("link","href",u).get(l+(a.href||""));if(p){for(var m=0;m<p.length;m++)if(f=p[m],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){p.splice(m,1);break e}}f=u.createElement(l),Ce(f,l,a),u.head.appendChild(f);break;case"meta":if(p=Gm("meta","content",u).get(l+(a.content||""))){for(m=0;m<p.length;m++)if(f=p[m],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){p.splice(m,1);break e}}f=u.createElement(l),Ce(f,l,a),u.head.appendChild(f);break;default:throw Error(r(468,l))}f[we]=e,xe(f),l=f}e.stateNode=l}else Hm(u,e.type,e.stateNode);else e.stateNode=jm(u,l,e.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?Hm(u,e.type,e.stateNode):jm(u,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Uf(e,e.memoizedProps,a.memoizedProps)}break;case 27:qe(n,e),Ye(e),l&512&&(ve||a===null||Gi(a,a.return)),a!==null&&l&4&&Uf(e,e.memoizedProps,a.memoizedProps);break;case 5:if(qe(n,e),Ye(e),l&512&&(ve||a===null||Gi(a,a.return)),e.flags&32){u=e.stateNode;try{Zs(u,"")}catch(Y){jt(e,e.return,Y)}}l&4&&e.stateNode!=null&&(u=e.memoizedProps,Uf(e,u,a!==null?a.memoizedProps:u)),l&1024&&(Vf=!0);break;case 6:if(qe(n,e),Ye(e),l&4){if(e.stateNode===null)throw Error(r(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(Y){jt(e,e.return,Y)}}break;case 3:if(No=null,u=Di,Di=Io(n.containerInfo),qe(n,e),Di=u,Ye(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Ea(n.containerInfo)}catch(Y){jt(e,e.return,Y)}Vf&&(Vf=!1,Hg(e));break;case 4:l=Di,Di=Io(e.stateNode.containerInfo),qe(n,e),Ye(e),Di=l;break;case 12:qe(n,e),Ye(e);break;case 31:qe(n,e),Ye(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,_o(e,l)));break;case 13:qe(n,e),Ye(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(So=$e()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,_o(e,l)));break;case 22:u=e.memoizedState!==null;var S=a!==null&&a.memoizedState!==null,C=gn,N=ve;if(gn=C||u,ve=N||S,qe(n,e),ve=N,gn=C,Ye(e),l&8192)t:for(n=e.stateNode,n._visibility=u?n._visibility&-2:n._visibility|1,u&&(a===null||S||gn||ve||Rs(e)),a=null,n=e;;){if(n.tag===5||n.tag===26){if(a===null){S=a=n;try{if(f=S.stateNode,u)p=f.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none";else{m=S.stateNode;var F=S.memoizedProps.style,D=F!=null&&F.hasOwnProperty("display")?F.display:null;m.style.display=D==null||typeof D=="boolean"?"":(""+D).trim()}}catch(Y){jt(S,S.return,Y)}}}else if(n.tag===6){if(a===null){S=n;try{S.stateNode.nodeValue=u?"":S.memoizedProps}catch(Y){jt(S,S.return,Y)}}}else if(n.tag===18){if(a===null){S=n;try{var B=S.stateNode;u?Bm(B,!0):Bm(S.stateNode,!1)}catch(Y){jt(S,S.return,Y)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break t;for(;n.sibling===null;){if(n.return===null||n.return===e)break t;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,_o(e,a))));break;case 19:qe(n,e),Ye(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,_o(e,l)));break;case 30:break;case 21:break;default:qe(n,e),Ye(e)}}function Ye(e){var n=e.flags;if(n&2){try{for(var a,l=e.return;l!==null;){if(Rg(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var u=a.stateNode,f=Ff(e);vo(e,f,u);break;case 5:var p=a.stateNode;a.flags&32&&(Zs(p,""),a.flags&=-33);var m=Ff(e);vo(e,m,p);break;case 3:case 4:var S=a.stateNode.containerInfo,C=Ff(e);Pf(e,C,S);break;default:throw Error(r(161))}}catch(N){jt(e,e.return,N)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Hg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Hg(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function vn(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Ug(e,n.alternate,n),n=n.sibling}function Rs(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:Qn(4,n,n.return),Rs(n);break;case 1:Gi(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&Bg(n,n.return,a),Rs(n);break;case 27:Hr(n.stateNode);case 26:case 5:Gi(n,n.return),Rs(n);break;case 22:n.memoizedState===null&&Rs(n);break;case 30:Rs(n);break;default:Rs(n)}e=e.sibling}}function _n(e,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,u=e,f=n,p=f.flags;switch(f.tag){case 0:case 11:case 15:_n(u,f,a),Ir(4,f);break;case 1:if(_n(u,f,a),l=f,u=l.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(C){jt(l,l.return,C)}if(l=f,u=l.updateQueue,u!==null){var m=l.stateNode;try{var S=u.shared.hiddenCallbacks;if(S!==null)for(u.shared.hiddenCallbacks=null,u=0;u<S.length;u++)bp(S[u],m)}catch(C){jt(l,l.return,C)}}a&&p&64&&Dg(f),Rr(f,f.return);break;case 27:Ng(f);case 26:case 5:_n(u,f,a),a&&l===null&&p&4&&Ig(f),Rr(f,f.return);break;case 12:_n(u,f,a);break;case 31:_n(u,f,a),a&&p&4&&Vg(u,f);break;case 13:_n(u,f,a),a&&p&4&&jg(u,f);break;case 22:f.memoizedState===null&&_n(u,f,a),Rr(f,f.return);break;case 30:break;default:_n(u,f,a)}n=n.sibling}}function jf(e,n){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&br(a))}function Gf(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&br(e))}function Bi(e,n,a,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)qg(e,n,a,l),n=n.sibling}function qg(e,n,a,l){var u=n.flags;switch(n.tag){case 0:case 11:case 15:Bi(e,n,a,l),u&2048&&Ir(9,n);break;case 1:Bi(e,n,a,l);break;case 3:Bi(e,n,a,l),u&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&br(e)));break;case 12:if(u&2048){Bi(e,n,a,l),e=n.stateNode;try{var f=n.memoizedProps,p=f.id,m=f.onPostCommit;typeof m=="function"&&m(p,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(S){jt(n,n.return,S)}}else Bi(e,n,a,l);break;case 31:Bi(e,n,a,l);break;case 13:Bi(e,n,a,l);break;case 23:break;case 22:f=n.stateNode,p=n.alternate,n.memoizedState!==null?f._visibility&2?Bi(e,n,a,l):Nr(e,n):f._visibility&2?Bi(e,n,a,l):(f._visibility|=2,ya(e,n,a,l,(n.subtreeFlags&10256)!==0||!1)),u&2048&&jf(p,n);break;case 24:Bi(e,n,a,l),u&2048&&Gf(n.alternate,n);break;default:Bi(e,n,a,l)}}function ya(e,n,a,l,u){for(u=u&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var f=e,p=n,m=a,S=l,C=p.flags;switch(p.tag){case 0:case 11:case 15:ya(f,p,m,S,u),Ir(8,p);break;case 23:break;case 22:var N=p.stateNode;p.memoizedState!==null?N._visibility&2?ya(f,p,m,S,u):Nr(f,p):(N._visibility|=2,ya(f,p,m,S,u)),u&&C&2048&&jf(p.alternate,p);break;case 24:ya(f,p,m,S,u),u&&C&2048&&Gf(p.alternate,p);break;default:ya(f,p,m,S,u)}n=n.sibling}}function Nr(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=e,l=n,u=l.flags;switch(l.tag){case 22:Nr(a,l),u&2048&&jf(l.alternate,l);break;case 24:Nr(a,l),u&2048&&Gf(l.alternate,l);break;default:Nr(a,l)}n=n.sibling}}var zr=8192;function pa(e,n,a){if(e.subtreeFlags&zr)for(e=e.child;e!==null;)Yg(e,n,a),e=e.sibling}function Yg(e,n,a){switch(e.tag){case 26:pa(e,n,a),e.flags&zr&&e.memoizedState!==null&&dT(a,Di,e.memoizedState,e.memoizedProps);break;case 5:pa(e,n,a);break;case 3:case 4:var l=Di;Di=Io(e.stateNode.containerInfo),pa(e,n,a),Di=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=zr,zr=16777216,pa(e,n,a),zr=l):pa(e,n,a));break;default:pa(e,n,a)}}function kg(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Ur(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];Ee=l,Zg(l,e)}kg(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Qg(e),e=e.sibling}function Qg(e){switch(e.tag){case 0:case 11:case 15:Ur(e),e.flags&2048&&Qn(9,e,e.return);break;case 3:Ur(e);break;case 12:Ur(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,bo(e)):Ur(e);break;default:Ur(e)}}function bo(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];Ee=l,Zg(l,e)}kg(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:Qn(8,n,n.return),bo(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,bo(n));break;default:bo(n)}e=e.sibling}}function Zg(e,n){for(;Ee!==null;){var a=Ee;switch(a.tag){case 0:case 11:case 15:Qn(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:br(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Ee=l;else t:for(a=e;Ee!==null;){l=Ee;var u=l.sibling,f=l.return;if(Fg(l),l===a){Ee=null;break t}if(u!==null){u.return=f,Ee=u;break t}Ee=f}}}var O1={getCacheForType:function(e){var n=Me(pe),a=n.data.get(e);return a===void 0&&(a=e(),n.data.set(e,a)),a},cacheSignal:function(){return Me(pe).controller.signal}},M1=typeof WeakMap=="function"?WeakMap:Map,Rt=0,Kt=null,_t=null,St=0,Vt=0,ri=null,Zn=!1,ga=!1,Hf=!1,bn=0,fe=0,Xn=0,Ns=0,qf=0,li=0,ma=0,Fr=null,ke=null,Yf=!1,So=0,Xg=0,To=1/0,Ao=null,Kn=null,_e=0,Wn=null,va=null,Sn=0,kf=0,Qf=null,Kg=null,Pr=0,Zf=null;function oi(){return(Rt&2)!==0&&St!==0?St&-St:_.T!==null?td():dy()}function Wg(){if(li===0)if((St&536870912)===0||xt){var e=Cl;Cl<<=1,(Cl&3932160)===0&&(Cl=262144),li=e}else li=536870912;return e=si.current,e!==null&&(e.flags|=32),li}function Qe(e,n,a){(e===Kt&&(Vt===2||Vt===9)||e.cancelPendingCommit!==null)&&(_a(e,0),Jn(e,St,li,!1)),rr(e,a),((Rt&2)===0||e!==Kt)&&(e===Kt&&((Rt&2)===0&&(Ns|=a),fe===4&&Jn(e,St,li,!1)),Hi(e))}function Jg(e,n,a){if((Rt&6)!==0)throw Error(r(327));var l=!a&&(n&127)===0&&(n&e.expiredLanes)===0||ar(e,n),u=l?D1(e,n):Kf(e,n,!0),f=l;do{if(u===0){ga&&!l&&Jn(e,n,0,!1);break}else{if(a=e.current.alternate,f&&!L1(a)){u=Kf(e,n,!1),f=!1;continue}if(u===2){if(f=n,e.errorRecoveryDisabledLanes&f)var p=0;else p=e.pendingLanes&-536870913,p=p!==0?p:p&536870912?536870912:0;if(p!==0){n=p;t:{var m=e;u=Fr;var S=m.current.memoizedState.isDehydrated;if(S&&(_a(m,p).flags|=256),p=Kf(m,p,!1),p!==2){if(Hf&&!S){m.errorRecoveryDisabledLanes|=f,Ns|=f,u=4;break t}f=ke,ke=u,f!==null&&(ke===null?ke=f:ke.push.apply(ke,f))}u=p}if(f=!1,u!==2)continue}}if(u===1){_a(e,0),Jn(e,n,0,!0);break}t:{switch(l=e,f=u,f){case 0:case 1:throw Error(r(345));case 4:if((n&4194048)!==n)break;case 6:Jn(l,n,li,!Zn);break t;case 2:ke=null;break;case 3:case 5:break;default:throw Error(r(329))}if((n&62914560)===n&&(u=So+300-$e(),10<u)){if(Jn(l,n,li,!Zn),Bl(l,0,!0)!==0)break t;Sn=n,l.timeoutHandle=Lm($g.bind(null,l,a,ke,Ao,Yf,n,li,Ns,ma,Zn,f,"Throttled",-0,0),u);break t}$g(l,a,ke,Ao,Yf,n,li,Ns,ma,Zn,f,null,-0,0)}}break}while(!0);Hi(e)}function $g(e,n,a,l,u,f,p,m,S,C,N,F,D,B){if(e.timeoutHandle=-1,F=n.subtreeFlags,F&8192||(F&16785408)===16785408){F={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:rn},Yg(n,f,F);var Y=(f&62914560)===f?So-$e():(f&4194048)===f?Xg-$e():0;if(Y=hT(F,Y),Y!==null){Sn=f,e.cancelPendingCommit=Y(lm.bind(null,e,n,f,a,l,u,p,m,S,N,F,null,D,B)),Jn(e,f,p,!C);return}}lm(e,n,f,a,l,u,p,m,S)}function L1(e){for(var n=e;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var u=a[l],f=u.getSnapshot;u=u.value;try{if(!ii(f(),u))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Jn(e,n,a,l){n&=~qf,n&=~Ns,e.suspendedLanes|=n,e.pingedLanes&=~n,l&&(e.warmLanes|=n),l=e.expirationTimes;for(var u=n;0<u;){var f=31-ei(u),p=1<<f;l[f]=-1,u&=~p}a!==0&&cy(e,a,n)}function xo(){return(Rt&6)===0?(Vr(0),!1):!0}function Xf(){if(_t!==null){if(Vt===0)var e=_t.return;else e=_t,un=ws=null,ff(e),ca=null,Tr=0,e=_t;for(;e!==null;)Cg(e.alternate,e),e=e.return;_t=null}}function _a(e,n){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,X1(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Sn=0,Xf(),Kt=e,_t=a=on(e.current,null),St=n,Vt=0,ri=null,Zn=!1,ga=ar(e,n),Hf=!1,ma=li=qf=Ns=Xn=fe=0,ke=Fr=null,Yf=!1,(n&8)!==0&&(n|=n&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=n;0<l;){var u=31-ei(l),f=1<<u;n|=e[u],l&=~f}return bn=n,ql(),a}function tm(e,n){ft=null,_.H=Cr,n===oa||n===Jl?(n=gp(),Vt=3):n===Ju?(n=gp(),Vt=4):Vt=n===Of?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,ri=n,_t===null&&(fe=1,ho(e,gi(n,e.current)))}function em(){var e=si.current;return e===null?!0:(St&4194048)===St?bi===null:(St&62914560)===St||(St&536870912)!==0?e===bi:!1}function im(){var e=_.H;return _.H=Cr,e===null?Cr:e}function nm(){var e=_.A;return _.A=O1,e}function Eo(){fe=4,Zn||(St&4194048)!==St&&si.current!==null||(ga=!0),(Xn&134217727)===0&&(Ns&134217727)===0||Kt===null||Jn(Kt,St,li,!1)}function Kf(e,n,a){var l=Rt;Rt|=2;var u=im(),f=nm();(Kt!==e||St!==n)&&(Ao=null,_a(e,n)),n=!1;var p=fe;t:do try{if(Vt!==0&&_t!==null){var m=_t,S=ri;switch(Vt){case 8:Xf(),p=6;break t;case 3:case 2:case 9:case 6:si.current===null&&(n=!0);var C=Vt;if(Vt=0,ri=null,ba(e,m,S,C),a&&ga){p=0;break t}break;default:C=Vt,Vt=0,ri=null,ba(e,m,S,C)}}C1(),p=fe;break}catch(N){tm(e,N)}while(!0);return n&&e.shellSuspendCounter++,un=ws=null,Rt=l,_.H=u,_.A=f,_t===null&&(Kt=null,St=0,ql()),p}function C1(){for(;_t!==null;)sm(_t)}function D1(e,n){var a=Rt;Rt|=2;var l=im(),u=nm();Kt!==e||St!==n?(Ao=null,To=$e()+500,_a(e,n)):ga=ar(e,n);t:do try{if(Vt!==0&&_t!==null){n=_t;var f=ri;e:switch(Vt){case 1:Vt=0,ri=null,ba(e,n,f,1);break;case 2:case 9:if(yp(f)){Vt=0,ri=null,am(n);break}n=function(){Vt!==2&&Vt!==9||Kt!==e||(Vt=7),Hi(e)},f.then(n,n);break t;case 3:Vt=7;break t;case 4:Vt=5;break t;case 7:yp(f)?(Vt=0,ri=null,am(n)):(Vt=0,ri=null,ba(e,n,f,7));break;case 5:var p=null;switch(_t.tag){case 26:p=_t.memoizedState;case 5:case 27:var m=_t;if(p?qm(p):m.stateNode.complete){Vt=0,ri=null;var S=m.sibling;if(S!==null)_t=S;else{var C=m.return;C!==null?(_t=C,wo(C)):_t=null}break e}}Vt=0,ri=null,ba(e,n,f,5);break;case 6:Vt=0,ri=null,ba(e,n,f,6);break;case 8:Xf(),fe=6;break t;default:throw Error(r(462))}}B1();break}catch(N){tm(e,N)}while(!0);return un=ws=null,_.H=l,_.A=u,Rt=a,_t!==null?0:(Kt=null,St=0,ql(),fe)}function B1(){for(;_t!==null&&!eS();)sm(_t)}function sm(e){var n=Mg(e.alternate,e,bn);e.memoizedProps=e.pendingProps,n===null?wo(e):_t=n}function am(e){var n=e,a=n.alternate;switch(n.tag){case 15:case 0:n=Tg(a,n,n.pendingProps,n.type,void 0,St);break;case 11:n=Tg(a,n,n.pendingProps,n.type.render,n.ref,St);break;case 5:ff(n);default:Cg(a,n),n=_t=np(n,bn),n=Mg(a,n,bn)}e.memoizedProps=e.pendingProps,n===null?wo(e):_t=n}function ba(e,n,a,l){un=ws=null,ff(n),ca=null,Tr=0;var u=n.return;try{if(b1(e,u,n,a,St)){fe=1,ho(e,gi(a,e.current)),_t=null;return}}catch(f){if(u!==null)throw _t=u,f;fe=1,ho(e,gi(a,e.current)),_t=null;return}n.flags&32768?(xt||l===1?e=!0:ga||(St&536870912)!==0?e=!1:(Zn=e=!0,(l===2||l===9||l===3||l===6)&&(l=si.current,l!==null&&l.tag===13&&(l.flags|=16384))),rm(n,e)):wo(n)}function wo(e){var n=e;do{if((n.flags&32768)!==0){rm(n,Zn);return}e=n.return;var a=A1(n.alternate,n,bn);if(a!==null){_t=a;return}if(n=n.sibling,n!==null){_t=n;return}_t=n=e}while(n!==null);fe===0&&(fe=5)}function rm(e,n){do{var a=x1(e.alternate,e);if(a!==null){a.flags&=32767,_t=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(e=e.sibling,e!==null)){_t=e;return}_t=e=a}while(e!==null);fe=6,_t=null}function lm(e,n,a,l,u,f,p,m,S){e.cancelPendingCommit=null;do Oo();while(_e!==0);if((Rt&6)!==0)throw Error(r(327));if(n!==null){if(n===e.current)throw Error(r(177));if(f=n.lanes|n.childLanes,f|=Uu,fS(e,a,f,p,m,S),e===Kt&&(_t=Kt=null,St=0),va=n,Wn=e,Sn=a,kf=f,Qf=u,Kg=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,z1(Ml,function(){return dm(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=_.T,_.T=null,u=x.p,x.p=2,p=Rt,Rt|=4;try{E1(e,n,a)}finally{Rt=p,x.p=u,_.T=l}}_e=1,om(),cm(),um()}}function om(){if(_e===1){_e=0;var e=Wn,n=va,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=_.T,_.T=null;var l=x.p;x.p=2;var u=Rt;Rt|=4;try{Gg(n,e);var f=od,p=Zy(e.containerInfo),m=f.focusedElem,S=f.selectionRange;if(p!==m&&m&&m.ownerDocument&&Qy(m.ownerDocument.documentElement,m)){if(S!==null&&Bu(m)){var C=S.start,N=S.end;if(N===void 0&&(N=C),"selectionStart"in m)m.selectionStart=C,m.selectionEnd=Math.min(N,m.value.length);else{var F=m.ownerDocument||document,D=F&&F.defaultView||window;if(D.getSelection){var B=D.getSelection(),Y=m.textContent.length,$=Math.min(S.start,Y),Xt=S.end===void 0?$:Math.min(S.end,Y);!B.extend&&$>Xt&&(p=Xt,Xt=$,$=p);var O=ky(m,$),w=ky(m,Xt);if(O&&w&&(B.rangeCount!==1||B.anchorNode!==O.node||B.anchorOffset!==O.offset||B.focusNode!==w.node||B.focusOffset!==w.offset)){var L=F.createRange();L.setStart(O.node,O.offset),B.removeAllRanges(),$>Xt?(B.addRange(L),B.extend(w.node,w.offset)):(L.setEnd(w.node,w.offset),B.addRange(L))}}}}for(F=[],B=m;B=B.parentNode;)B.nodeType===1&&F.push({element:B,left:B.scrollLeft,top:B.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<F.length;m++){var U=F[m];U.element.scrollLeft=U.left,U.element.scrollTop=U.top}}Po=!!ld,od=ld=null}finally{Rt=u,x.p=l,_.T=a}}e.current=n,_e=2}}function cm(){if(_e===2){_e=0;var e=Wn,n=va,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=_.T,_.T=null;var l=x.p;x.p=2;var u=Rt;Rt|=4;try{Ug(e,n.alternate,n)}finally{Rt=u,x.p=l,_.T=a}}_e=3}}function um(){if(_e===4||_e===3){_e=0,iS();var e=Wn,n=va,a=Sn,l=Kg;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?_e=5:(_e=0,va=Wn=null,fm(e,e.pendingLanes));var u=e.pendingLanes;if(u===0&&(Kn=null),hu(a),n=n.stateNode,ti&&typeof ti.onCommitFiberRoot=="function")try{ti.onCommitFiberRoot(sr,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=_.T,u=x.p,x.p=2,_.T=null;try{for(var f=e.onRecoverableError,p=0;p<l.length;p++){var m=l[p];f(m.value,{componentStack:m.stack})}}finally{_.T=n,x.p=u}}(Sn&3)!==0&&Oo(),Hi(e),u=e.pendingLanes,(a&261930)!==0&&(u&42)!==0?e===Zf?Pr++:(Pr=0,Zf=e):Pr=0,Vr(0)}}function fm(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,br(n)))}function Oo(){return om(),cm(),um(),dm()}function dm(){if(_e!==5)return!1;var e=Wn,n=kf;kf=0;var a=hu(Sn),l=_.T,u=x.p;try{x.p=32>a?32:a,_.T=null,a=Qf,Qf=null;var f=Wn,p=Sn;if(_e=0,va=Wn=null,Sn=0,(Rt&6)!==0)throw Error(r(331));var m=Rt;if(Rt|=4,Qg(f.current),qg(f,f.current,p,a),Rt=m,Vr(0,!1),ti&&typeof ti.onPostCommitFiberRoot=="function")try{ti.onPostCommitFiberRoot(sr,f)}catch{}return!0}finally{x.p=u,_.T=l,fm(e,n)}}function hm(e,n,a){n=gi(a,n),n=wf(e.stateNode,n,2),e=qn(e,n,2),e!==null&&(rr(e,2),Hi(e))}function jt(e,n,a){if(e.tag===3)hm(e,e,a);else for(;n!==null;){if(n.tag===3){hm(n,e,a);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Kn===null||!Kn.has(l))){e=gi(a,e),a=yg(2),l=qn(n,a,2),l!==null&&(pg(a,l,n,e),rr(l,2),Hi(l));break}}n=n.return}}function Wf(e,n,a){var l=e.pingCache;if(l===null){l=e.pingCache=new M1;var u=new Set;l.set(n,u)}else u=l.get(n),u===void 0&&(u=new Set,l.set(n,u));u.has(a)||(Hf=!0,u.add(a),e=I1.bind(null,e,n,a),n.then(e,e))}function I1(e,n,a){var l=e.pingCache;l!==null&&l.delete(n),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Kt===e&&(St&a)===a&&(fe===4||fe===3&&(St&62914560)===St&&300>$e()-So?(Rt&2)===0&&_a(e,0):qf|=a,ma===St&&(ma=0)),Hi(e)}function ym(e,n){n===0&&(n=oy()),e=As(e,n),e!==null&&(rr(e,n),Hi(e))}function R1(e){var n=e.memoizedState,a=0;n!==null&&(a=n.retryLane),ym(e,a)}function N1(e,n){var a=0;switch(e.tag){case 31:case 13:var l=e.stateNode,u=e.memoizedState;u!==null&&(a=u.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(n),ym(e,a)}function z1(e,n){return cu(e,n)}var Mo=null,Sa=null,Jf=!1,Lo=!1,$f=!1,$n=0;function Hi(e){e!==Sa&&e.next===null&&(Sa===null?Mo=Sa=e:Sa=Sa.next=e),Lo=!0,Jf||(Jf=!0,F1())}function Vr(e,n){if(!$f&&Lo){$f=!0;do for(var a=!1,l=Mo;l!==null;){if(e!==0){var u=l.pendingLanes;if(u===0)var f=0;else{var p=l.suspendedLanes,m=l.pingedLanes;f=(1<<31-ei(42|e)+1)-1,f&=u&~(p&~m),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,vm(l,f))}else f=St,f=Bl(l,l===Kt?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||ar(l,f)||(a=!0,vm(l,f));l=l.next}while(a);$f=!1}}function U1(){pm()}function pm(){Lo=Jf=!1;var e=0;$n!==0&&Z1()&&(e=$n);for(var n=$e(),a=null,l=Mo;l!==null;){var u=l.next,f=gm(l,n);f===0?(l.next=null,a===null?Mo=u:a.next=u,u===null&&(Sa=a)):(a=l,(e!==0||(f&3)!==0)&&(Lo=!0)),l=u}_e!==0&&_e!==5||Vr(e),$n!==0&&($n=0)}function gm(e,n){for(var a=e.suspendedLanes,l=e.pingedLanes,u=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var p=31-ei(f),m=1<<p,S=u[p];S===-1?((m&a)===0||(m&l)!==0)&&(u[p]=uS(m,n)):S<=n&&(e.expiredLanes|=m),f&=~m}if(n=Kt,a=St,a=Bl(e,e===n?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===n&&(Vt===2||Vt===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&uu(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||ar(e,a)){if(n=a&-a,n===e.callbackPriority)return n;switch(l!==null&&uu(l),hu(a)){case 2:case 8:a=ry;break;case 32:a=Ml;break;case 268435456:a=ly;break;default:a=Ml}return l=mm.bind(null,e),a=cu(a,l),e.callbackPriority=n,e.callbackNode=a,n}return l!==null&&l!==null&&uu(l),e.callbackPriority=2,e.callbackNode=null,2}function mm(e,n){if(_e!==0&&_e!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Oo()&&e.callbackNode!==a)return null;var l=St;return l=Bl(e,e===Kt?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Jg(e,l,n),gm(e,$e()),e.callbackNode!=null&&e.callbackNode===a?mm.bind(null,e):null)}function vm(e,n){if(Oo())return null;Jg(e,n,!0)}function F1(){K1(function(){(Rt&6)!==0?cu(ay,U1):pm()})}function td(){if($n===0){var e=ra;e===0&&(e=Ll,Ll<<=1,(Ll&261888)===0&&(Ll=256)),$n=e}return $n}function _m(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:zl(""+e)}function bm(e,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,e.id&&a.setAttribute("form",e.id),n.parentNode.insertBefore(a,n),e=new FormData(e),a.parentNode.removeChild(a),e}function P1(e,n,a,l,u){if(n==="submit"&&a&&a.stateNode===u){var f=_m((u[je]||null).action),p=l.submitter;p&&(n=(n=p[je]||null)?_m(n.formAction):p.getAttribute("formAction"),n!==null&&(f=n,p=null));var m=new Vl("action","action",null,l,u);e.push({event:m,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if($n!==0){var S=p?bm(u,p):new FormData(u);bf(a,{pending:!0,data:S,method:u.method,action:f},null,S)}}else typeof f=="function"&&(m.preventDefault(),S=p?bm(u,p):new FormData(u),bf(a,{pending:!0,data:S,method:u.method,action:f},f,S))},currentTarget:u}]})}}for(var ed=0;ed<zu.length;ed++){var id=zu[ed],V1=id.toLowerCase(),j1=id[0].toUpperCase()+id.slice(1);Ci(V1,"on"+j1)}Ci(Wy,"onAnimationEnd"),Ci(Jy,"onAnimationIteration"),Ci($y,"onAnimationStart"),Ci("dblclick","onDoubleClick"),Ci("focusin","onFocus"),Ci("focusout","onBlur"),Ci(n1,"onTransitionRun"),Ci(s1,"onTransitionStart"),Ci(a1,"onTransitionCancel"),Ci(tp,"onTransitionEnd"),ks("onMouseEnter",["mouseout","mouseover"]),ks("onMouseLeave",["mouseout","mouseover"]),ks("onPointerEnter",["pointerout","pointerover"]),ks("onPointerLeave",["pointerout","pointerover"]),_s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_s("onBeforeInput",["compositionend","keypress","textInput","paste"]),_s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),G1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(jr));function Sm(e,n){n=(n&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],u=l.event;l=l.listeners;t:{var f=void 0;if(n)for(var p=l.length-1;0<=p;p--){var m=l[p],S=m.instance,C=m.currentTarget;if(m=m.listener,S!==f&&u.isPropagationStopped())break t;f=m,u.currentTarget=C;try{f(u)}catch(N){Hl(N)}u.currentTarget=null,f=S}else for(p=0;p<l.length;p++){if(m=l[p],S=m.instance,C=m.currentTarget,m=m.listener,S!==f&&u.isPropagationStopped())break t;f=m,u.currentTarget=C;try{f(u)}catch(N){Hl(N)}u.currentTarget=null,f=S}}}}function bt(e,n){var a=n[yu];a===void 0&&(a=n[yu]=new Set);var l=e+"__bubble";a.has(l)||(Tm(n,e,2,!1),a.add(l))}function nd(e,n,a){var l=0;n&&(l|=4),Tm(a,e,l,n)}var Co="_reactListening"+Math.random().toString(36).slice(2);function sd(e){if(!e[Co]){e[Co]=!0,py.forEach(function(a){a!=="selectionchange"&&(G1.has(a)||nd(a,!1,e),nd(a,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Co]||(n[Co]=!0,nd("selectionchange",!1,n))}}function Tm(e,n,a,l){switch(Wm(n)){case 2:var u=gT;break;case 8:u=mT;break;default:u=_d}a=u.bind(null,n,a,e),u=void 0,!Au||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(u=!0),l?u!==void 0?e.addEventListener(n,a,{capture:!0,passive:u}):e.addEventListener(n,a,!0):u!==void 0?e.addEventListener(n,a,{passive:u}):e.addEventListener(n,a,!1)}function ad(e,n,a,l,u){var f=l;if((n&1)===0&&(n&2)===0&&l!==null)t:for(;;){if(l===null)return;var p=l.tag;if(p===3||p===4){var m=l.stateNode.containerInfo;if(m===u)break;if(p===4)for(p=l.return;p!==null;){var S=p.tag;if((S===3||S===4)&&p.stateNode.containerInfo===u)return;p=p.return}for(;m!==null;){if(p=Hs(m),p===null)return;if(S=p.tag,S===5||S===6||S===26||S===27){l=f=p;continue t}m=m.parentNode}}l=l.return}Oy(function(){var C=f,N=Su(a),F=[];t:{var D=ep.get(e);if(D!==void 0){var B=Vl,Y=e;switch(e){case"keypress":if(Fl(a)===0)break t;case"keydown":case"keyup":B=NS;break;case"focusin":Y="focus",B=Ou;break;case"focusout":Y="blur",B=Ou;break;case"beforeblur":case"afterblur":B=Ou;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=Cy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=AS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=FS;break;case Wy:case Jy:case $y:B=wS;break;case tp:B=VS;break;case"scroll":case"scrollend":B=SS;break;case"wheel":B=GS;break;case"copy":case"cut":case"paste":B=MS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=By;break;case"toggle":case"beforetoggle":B=qS}var $=(n&4)!==0,Xt=!$&&(e==="scroll"||e==="scrollend"),O=$?D!==null?D+"Capture":null:D;$=[];for(var w=C,L;w!==null;){var U=w;if(L=U.stateNode,U=U.tag,U!==5&&U!==26&&U!==27||L===null||O===null||(U=cr(w,O),U!=null&&$.push(Gr(w,U,L))),Xt)break;w=w.return}0<$.length&&(D=new B(D,Y,null,a,N),F.push({event:D,listeners:$}))}}if((n&7)===0){t:{if(D=e==="mouseover"||e==="pointerover",B=e==="mouseout"||e==="pointerout",D&&a!==bu&&(Y=a.relatedTarget||a.fromElement)&&(Hs(Y)||Y[Gs]))break t;if((B||D)&&(D=N.window===N?N:(D=N.ownerDocument)?D.defaultView||D.parentWindow:window,B?(Y=a.relatedTarget||a.toElement,B=C,Y=Y?Hs(Y):null,Y!==null&&(Xt=c(Y),$=Y.tag,Y!==Xt||$!==5&&$!==27&&$!==6)&&(Y=null)):(B=null,Y=C),B!==Y)){if($=Cy,U="onMouseLeave",O="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&($=By,U="onPointerLeave",O="onPointerEnter",w="pointer"),Xt=B==null?D:or(B),L=Y==null?D:or(Y),D=new $(U,w+"leave",B,a,N),D.target=Xt,D.relatedTarget=L,U=null,Hs(N)===C&&($=new $(O,w+"enter",Y,a,N),$.target=L,$.relatedTarget=Xt,U=$),Xt=U,B&&Y)e:{for($=H1,O=B,w=Y,L=0,U=O;U;U=$(U))L++;U=0;for(var J=w;J;J=$(J))U++;for(;0<L-U;)O=$(O),L--;for(;0<U-L;)w=$(w),U--;for(;L--;){if(O===w||w!==null&&O===w.alternate){$=O;break e}O=$(O),w=$(w)}$=null}else $=null;B!==null&&Am(F,D,B,$,!1),Y!==null&&Xt!==null&&Am(F,Xt,Y,$,!0)}}t:{if(D=C?or(C):window,B=D.nodeName&&D.nodeName.toLowerCase(),B==="select"||B==="input"&&D.type==="file")var Ct=Vy;else if(Fy(D))if(jy)Ct=t1;else{Ct=JS;var Z=WS}else B=D.nodeName,!B||B.toLowerCase()!=="input"||D.type!=="checkbox"&&D.type!=="radio"?C&&_u(C.elementType)&&(Ct=Vy):Ct=$S;if(Ct&&(Ct=Ct(e,C))){Py(F,Ct,a,N);break t}Z&&Z(e,D,C),e==="focusout"&&C&&D.type==="number"&&C.memoizedProps.value!=null&&vu(D,"number",D.value)}switch(Z=C?or(C):window,e){case"focusin":(Fy(Z)||Z.contentEditable==="true")&&(Js=Z,Iu=C,mr=null);break;case"focusout":mr=Iu=Js=null;break;case"mousedown":Ru=!0;break;case"contextmenu":case"mouseup":case"dragend":Ru=!1,Xy(F,a,N);break;case"selectionchange":if(i1)break;case"keydown":case"keyup":Xy(F,a,N)}var yt;if(Lu)t:{switch(e){case"compositionstart":var Tt="onCompositionStart";break t;case"compositionend":Tt="onCompositionEnd";break t;case"compositionupdate":Tt="onCompositionUpdate";break t}Tt=void 0}else Ws?zy(e,a)&&(Tt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Tt="onCompositionStart");Tt&&(Iy&&a.locale!=="ko"&&(Ws||Tt!=="onCompositionStart"?Tt==="onCompositionEnd"&&Ws&&(yt=My()):(Un=N,xu="value"in Un?Un.value:Un.textContent,Ws=!0)),Z=Do(C,Tt),0<Z.length&&(Tt=new Dy(Tt,e,null,a,N),F.push({event:Tt,listeners:Z}),yt?Tt.data=yt:(yt=Uy(a),yt!==null&&(Tt.data=yt)))),(yt=kS?QS(e,a):ZS(e,a))&&(Tt=Do(C,"onBeforeInput"),0<Tt.length&&(Z=new Dy("onBeforeInput","beforeinput",null,a,N),F.push({event:Z,listeners:Tt}),Z.data=yt)),P1(F,e,C,a,N)}Sm(F,n)})}function Gr(e,n,a){return{instance:e,listener:n,currentTarget:a}}function Do(e,n){for(var a=n+"Capture",l=[];e!==null;){var u=e,f=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||f===null||(u=cr(e,a),u!=null&&l.unshift(Gr(e,u,f)),u=cr(e,n),u!=null&&l.push(Gr(e,u,f))),e.tag===3)return l;e=e.return}return[]}function H1(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Am(e,n,a,l,u){for(var f=n._reactName,p=[];a!==null&&a!==l;){var m=a,S=m.alternate,C=m.stateNode;if(m=m.tag,S!==null&&S===l)break;m!==5&&m!==26&&m!==27||C===null||(S=C,u?(C=cr(a,f),C!=null&&p.unshift(Gr(a,C,S))):u||(C=cr(a,f),C!=null&&p.push(Gr(a,C,S)))),a=a.return}p.length!==0&&e.push({event:n,listeners:p})}var q1=/\r\n?/g,Y1=/\u0000|\uFFFD/g;function xm(e){return(typeof e=="string"?e:""+e).replace(q1,`
`).replace(Y1,"")}function Em(e,n){return n=xm(n),xm(e)===n}function Zt(e,n,a,l,u,f){switch(a){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||Zs(e,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&Zs(e,""+l);break;case"className":Rl(e,"class",l);break;case"tabIndex":Rl(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Rl(e,a,l);break;case"style":Ey(e,l,f);break;case"data":if(n!=="object"){Rl(e,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=zl(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(n!=="input"&&Zt(e,n,"name",u.name,u,null),Zt(e,n,"formEncType",u.formEncType,u,null),Zt(e,n,"formMethod",u.formMethod,u,null),Zt(e,n,"formTarget",u.formTarget,u,null)):(Zt(e,n,"encType",u.encType,u,null),Zt(e,n,"method",u.method,u,null),Zt(e,n,"target",u.target,u,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=zl(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=rn);break;case"onScroll":l!=null&&bt("scroll",e);break;case"onScrollEnd":l!=null&&bt("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(u.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=zl(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":bt("beforetoggle",e),bt("toggle",e),Il(e,"popover",l);break;case"xlinkActuate":an(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":an(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":an(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":an(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":an(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":an(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":an(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":an(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":an(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Il(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=_S.get(a)||a,Il(e,a,l))}}function rd(e,n,a,l,u,f){switch(a){case"style":Ey(e,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(u.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"children":typeof l=="string"?Zs(e,l):(typeof l=="number"||typeof l=="bigint")&&Zs(e,""+l);break;case"onScroll":l!=null&&bt("scroll",e);break;case"onScrollEnd":l!=null&&bt("scrollend",e);break;case"onClick":l!=null&&(e.onclick=rn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!gy.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(u=a.endsWith("Capture"),n=a.slice(2,u?a.length-7:void 0),f=e[je]||null,f=f!=null?f[a]:null,typeof f=="function"&&e.removeEventListener(n,f,u),typeof l=="function")){typeof f!="function"&&f!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(n,l,u);break t}a in e?e[a]=l:l===!0?e.setAttribute(a,""):Il(e,a,l)}}}function Ce(e,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":bt("error",e),bt("load",e);var l=!1,u=!1,f;for(f in a)if(a.hasOwnProperty(f)){var p=a[f];if(p!=null)switch(f){case"src":l=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:Zt(e,n,f,p,a,null)}}u&&Zt(e,n,"srcSet",a.srcSet,a,null),l&&Zt(e,n,"src",a.src,a,null);return;case"input":bt("invalid",e);var m=f=p=u=null,S=null,C=null;for(l in a)if(a.hasOwnProperty(l)){var N=a[l];if(N!=null)switch(l){case"name":u=N;break;case"type":p=N;break;case"checked":S=N;break;case"defaultChecked":C=N;break;case"value":f=N;break;case"defaultValue":m=N;break;case"children":case"dangerouslySetInnerHTML":if(N!=null)throw Error(r(137,n));break;default:Zt(e,n,l,N,a,null)}}Sy(e,f,m,S,C,p,u,!1);return;case"select":bt("invalid",e),l=p=f=null;for(u in a)if(a.hasOwnProperty(u)&&(m=a[u],m!=null))switch(u){case"value":f=m;break;case"defaultValue":p=m;break;case"multiple":l=m;default:Zt(e,n,u,m,a,null)}n=f,a=p,e.multiple=!!l,n!=null?Qs(e,!!l,n,!1):a!=null&&Qs(e,!!l,a,!0);return;case"textarea":bt("invalid",e),f=u=l=null;for(p in a)if(a.hasOwnProperty(p)&&(m=a[p],m!=null))switch(p){case"value":l=m;break;case"defaultValue":u=m;break;case"children":f=m;break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(r(91));break;default:Zt(e,n,p,m,a,null)}Ay(e,l,u,f);return;case"option":for(S in a)if(a.hasOwnProperty(S)&&(l=a[S],l!=null))switch(S){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Zt(e,n,S,l,a,null)}return;case"dialog":bt("beforetoggle",e),bt("toggle",e),bt("cancel",e),bt("close",e);break;case"iframe":case"object":bt("load",e);break;case"video":case"audio":for(l=0;l<jr.length;l++)bt(jr[l],e);break;case"image":bt("error",e),bt("load",e);break;case"details":bt("toggle",e);break;case"embed":case"source":case"link":bt("error",e),bt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(C in a)if(a.hasOwnProperty(C)&&(l=a[C],l!=null))switch(C){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:Zt(e,n,C,l,a,null)}return;default:if(_u(n)){for(N in a)a.hasOwnProperty(N)&&(l=a[N],l!==void 0&&rd(e,n,N,l,a,void 0));return}}for(m in a)a.hasOwnProperty(m)&&(l=a[m],l!=null&&Zt(e,n,m,l,a,null))}function k1(e,n,a,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,f=null,p=null,m=null,S=null,C=null,N=null;for(B in a){var F=a[B];if(a.hasOwnProperty(B)&&F!=null)switch(B){case"checked":break;case"value":break;case"defaultValue":S=F;default:l.hasOwnProperty(B)||Zt(e,n,B,null,l,F)}}for(var D in l){var B=l[D];if(F=a[D],l.hasOwnProperty(D)&&(B!=null||F!=null))switch(D){case"type":f=B;break;case"name":u=B;break;case"checked":C=B;break;case"defaultChecked":N=B;break;case"value":p=B;break;case"defaultValue":m=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(r(137,n));break;default:B!==F&&Zt(e,n,D,B,l,F)}}mu(e,p,m,S,C,N,f,u);return;case"select":B=p=m=D=null;for(f in a)if(S=a[f],a.hasOwnProperty(f)&&S!=null)switch(f){case"value":break;case"multiple":B=S;default:l.hasOwnProperty(f)||Zt(e,n,f,null,l,S)}for(u in l)if(f=l[u],S=a[u],l.hasOwnProperty(u)&&(f!=null||S!=null))switch(u){case"value":D=f;break;case"defaultValue":m=f;break;case"multiple":p=f;default:f!==S&&Zt(e,n,u,f,l,S)}n=m,a=p,l=B,D!=null?Qs(e,!!a,D,!1):!!l!=!!a&&(n!=null?Qs(e,!!a,n,!0):Qs(e,!!a,a?[]:"",!1));return;case"textarea":B=D=null;for(m in a)if(u=a[m],a.hasOwnProperty(m)&&u!=null&&!l.hasOwnProperty(m))switch(m){case"value":break;case"children":break;default:Zt(e,n,m,null,l,u)}for(p in l)if(u=l[p],f=a[p],l.hasOwnProperty(p)&&(u!=null||f!=null))switch(p){case"value":D=u;break;case"defaultValue":B=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(r(91));break;default:u!==f&&Zt(e,n,p,u,l,f)}Ty(e,D,B);return;case"option":for(var Y in a)if(D=a[Y],a.hasOwnProperty(Y)&&D!=null&&!l.hasOwnProperty(Y))switch(Y){case"selected":e.selected=!1;break;default:Zt(e,n,Y,null,l,D)}for(S in l)if(D=l[S],B=a[S],l.hasOwnProperty(S)&&D!==B&&(D!=null||B!=null))switch(S){case"selected":e.selected=D&&typeof D!="function"&&typeof D!="symbol";break;default:Zt(e,n,S,D,l,B)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $ in a)D=a[$],a.hasOwnProperty($)&&D!=null&&!l.hasOwnProperty($)&&Zt(e,n,$,null,l,D);for(C in l)if(D=l[C],B=a[C],l.hasOwnProperty(C)&&D!==B&&(D!=null||B!=null))switch(C){case"children":case"dangerouslySetInnerHTML":if(D!=null)throw Error(r(137,n));break;default:Zt(e,n,C,D,l,B)}return;default:if(_u(n)){for(var Xt in a)D=a[Xt],a.hasOwnProperty(Xt)&&D!==void 0&&!l.hasOwnProperty(Xt)&&rd(e,n,Xt,void 0,l,D);for(N in l)D=l[N],B=a[N],!l.hasOwnProperty(N)||D===B||D===void 0&&B===void 0||rd(e,n,N,D,l,B);return}}for(var O in a)D=a[O],a.hasOwnProperty(O)&&D!=null&&!l.hasOwnProperty(O)&&Zt(e,n,O,null,l,D);for(F in l)D=l[F],B=a[F],!l.hasOwnProperty(F)||D===B||D==null&&B==null||Zt(e,n,F,D,l,B)}function wm(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Q1(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var u=a[l],f=u.transferSize,p=u.initiatorType,m=u.duration;if(f&&m&&wm(p)){for(p=0,m=u.responseEnd,l+=1;l<a.length;l++){var S=a[l],C=S.startTime;if(C>m)break;var N=S.transferSize,F=S.initiatorType;N&&wm(F)&&(S=S.responseEnd,p+=N*(S<m?1:(m-C)/(S-C)))}if(--l,n+=8*(f+p)/(u.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var ld=null,od=null;function Bo(e){return e.nodeType===9?e:e.ownerDocument}function Om(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Mm(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function cd(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var ud=null;function Z1(){var e=window.event;return e&&e.type==="popstate"?e===ud?!1:(ud=e,!0):(ud=null,!1)}var Lm=typeof setTimeout=="function"?setTimeout:void 0,X1=typeof clearTimeout=="function"?clearTimeout:void 0,Cm=typeof Promise=="function"?Promise:void 0,K1=typeof queueMicrotask=="function"?queueMicrotask:typeof Cm<"u"?function(e){return Cm.resolve(null).then(e).catch(W1)}:Lm;function W1(e){setTimeout(function(){throw e})}function ts(e){return e==="head"}function Dm(e,n){var a=n,l=0;do{var u=a.nextSibling;if(e.removeChild(a),u&&u.nodeType===8)if(a=u.data,a==="/$"||a==="/&"){if(l===0){e.removeChild(u),Ea(n);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Hr(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Hr(a);for(var f=a.firstChild;f;){var p=f.nextSibling,m=f.nodeName;f[lr]||m==="SCRIPT"||m==="STYLE"||m==="LINK"&&f.rel.toLowerCase()==="stylesheet"||a.removeChild(f),f=p}}else a==="body"&&Hr(e.ownerDocument.body);a=u}while(a);Ea(n)}function Bm(e,n){var a=e;e=0;do{var l=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=l}while(a)}function fd(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":fd(a),pu(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function J1(e,n,a,l){for(;e.nodeType===1;){var u=a;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[lr])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==u.rel||e.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||e.getAttribute("title")!==(u.title==null?null:u.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(u.src==null?null:u.src)||e.getAttribute("type")!==(u.type==null?null:u.type)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var f=u.name==null?null:""+u.name;if(u.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=Si(e.nextSibling),e===null)break}return null}function $1(e,n,a){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Si(e.nextSibling),e===null))return null;return e}function Im(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Si(e.nextSibling),e===null))return null;return e}function dd(e){return e.data==="$?"||e.data==="$~"}function hd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function tT(e,n){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||a.readyState!=="loading")n();else{var l=function(){n(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Si(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var yd=null;function Rm(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(n===0)return Si(e.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}e=e.nextSibling}return null}function Nm(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return e;n--}else a!=="/$"&&a!=="/&"||n++}e=e.previousSibling}return null}function zm(e,n,a){switch(n=Bo(a),e){case"html":if(e=n.documentElement,!e)throw Error(r(452));return e;case"head":if(e=n.head,!e)throw Error(r(453));return e;case"body":if(e=n.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function Hr(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);pu(e)}var Ti=new Map,Um=new Set;function Io(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Tn=x.d;x.d={f:eT,r:iT,D:nT,C:sT,L:aT,m:rT,X:oT,S:lT,M:cT};function eT(){var e=Tn.f(),n=xo();return e||n}function iT(e){var n=qs(e);n!==null&&n.tag===5&&n.type==="form"?tg(n):Tn.r(e)}var Ta=typeof document>"u"?null:document;function Fm(e,n,a){var l=Ta;if(l&&typeof n=="string"&&n){var u=yi(n);u='link[rel="'+e+'"][href="'+u+'"]',typeof a=="string"&&(u+='[crossorigin="'+a+'"]'),Um.has(u)||(Um.add(u),e={rel:e,crossOrigin:a,href:n},l.querySelector(u)===null&&(n=l.createElement("link"),Ce(n,"link",e),xe(n),l.head.appendChild(n)))}}function nT(e){Tn.D(e),Fm("dns-prefetch",e,null)}function sT(e,n){Tn.C(e,n),Fm("preconnect",e,n)}function aT(e,n,a){Tn.L(e,n,a);var l=Ta;if(l&&e&&n){var u='link[rel="preload"][as="'+yi(n)+'"]';n==="image"&&a&&a.imageSrcSet?(u+='[imagesrcset="'+yi(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(u+='[imagesizes="'+yi(a.imageSizes)+'"]')):u+='[href="'+yi(e)+'"]';var f=u;switch(n){case"style":f=Aa(e);break;case"script":f=xa(e)}Ti.has(f)||(e=b({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:e,as:n},a),Ti.set(f,e),l.querySelector(u)!==null||n==="style"&&l.querySelector(qr(f))||n==="script"&&l.querySelector(Yr(f))||(n=l.createElement("link"),Ce(n,"link",e),xe(n),l.head.appendChild(n)))}}function rT(e,n){Tn.m(e,n);var a=Ta;if(a&&e){var l=n&&typeof n.as=="string"?n.as:"script",u='link[rel="modulepreload"][as="'+yi(l)+'"][href="'+yi(e)+'"]',f=u;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=xa(e)}if(!Ti.has(f)&&(e=b({rel:"modulepreload",href:e},n),Ti.set(f,e),a.querySelector(u)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Yr(f)))return}l=a.createElement("link"),Ce(l,"link",e),xe(l),a.head.appendChild(l)}}}function lT(e,n,a){Tn.S(e,n,a);var l=Ta;if(l&&e){var u=Ys(l).hoistableStyles,f=Aa(e);n=n||"default";var p=u.get(f);if(!p){var m={loading:0,preload:null};if(p=l.querySelector(qr(f)))m.loading=5;else{e=b({rel:"stylesheet",href:e,"data-precedence":n},a),(a=Ti.get(f))&&pd(e,a);var S=p=l.createElement("link");xe(S),Ce(S,"link",e),S._p=new Promise(function(C,N){S.onload=C,S.onerror=N}),S.addEventListener("load",function(){m.loading|=1}),S.addEventListener("error",function(){m.loading|=2}),m.loading|=4,Ro(p,n,l)}p={type:"stylesheet",instance:p,count:1,state:m},u.set(f,p)}}}function oT(e,n){Tn.X(e,n);var a=Ta;if(a&&e){var l=Ys(a).hoistableScripts,u=xa(e),f=l.get(u);f||(f=a.querySelector(Yr(u)),f||(e=b({src:e,async:!0},n),(n=Ti.get(u))&&gd(e,n),f=a.createElement("script"),xe(f),Ce(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(u,f))}}function cT(e,n){Tn.M(e,n);var a=Ta;if(a&&e){var l=Ys(a).hoistableScripts,u=xa(e),f=l.get(u);f||(f=a.querySelector(Yr(u)),f||(e=b({src:e,async:!0,type:"module"},n),(n=Ti.get(u))&&gd(e,n),f=a.createElement("script"),xe(f),Ce(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(u,f))}}function Pm(e,n,a,l){var u=(u=Lt.current)?Io(u):null;if(!u)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=Aa(a.href),a=Ys(u).hoistableStyles,l=a.get(n),l||(l={type:"style",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Aa(a.href);var f=Ys(u).hoistableStyles,p=f.get(e);if(p||(u=u.ownerDocument||u,p={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,p),(f=u.querySelector(qr(e)))&&!f._p&&(p.instance=f,p.state.loading=5),Ti.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Ti.set(e,a),f||uT(u,e,a,p.state))),n&&l===null)throw Error(r(528,""));return p}if(n&&l!==null)throw Error(r(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=xa(a),a=Ys(u).hoistableScripts,l=a.get(n),l||(l={type:"script",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function Aa(e){return'href="'+yi(e)+'"'}function qr(e){return'link[rel="stylesheet"]['+e+"]"}function Vm(e){return b({},e,{"data-precedence":e.precedence,precedence:null})}function uT(e,n,a,l){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=e.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),Ce(n,"link",a),xe(n),e.head.appendChild(n))}function xa(e){return'[src="'+yi(e)+'"]'}function Yr(e){return"script[async]"+e}function jm(e,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var l=e.querySelector('style[data-href~="'+yi(a.href)+'"]');if(l)return n.instance=l,xe(l),l;var u=b({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),xe(l),Ce(l,"style",u),Ro(l,a.precedence,e),n.instance=l;case"stylesheet":u=Aa(a.href);var f=e.querySelector(qr(u));if(f)return n.state.loading|=4,n.instance=f,xe(f),f;l=Vm(a),(u=Ti.get(u))&&pd(l,u),f=(e.ownerDocument||e).createElement("link"),xe(f);var p=f;return p._p=new Promise(function(m,S){p.onload=m,p.onerror=S}),Ce(f,"link",l),n.state.loading|=4,Ro(f,a.precedence,e),n.instance=f;case"script":return f=xa(a.src),(u=e.querySelector(Yr(f)))?(n.instance=u,xe(u),u):(l=a,(u=Ti.get(f))&&(l=b({},a),gd(l,u)),e=e.ownerDocument||e,u=e.createElement("script"),xe(u),Ce(u,"link",l),e.head.appendChild(u),n.instance=u);case"void":return null;default:throw Error(r(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,Ro(l,a.precedence,e));return n.instance}function Ro(e,n,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=l.length?l[l.length-1]:null,f=u,p=0;p<l.length;p++){var m=l[p];if(m.dataset.precedence===n)f=m;else if(f!==u)break}f?f.parentNode.insertBefore(e,f.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(e,n.firstChild))}function pd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function gd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var No=null;function Gm(e,n,a){if(No===null){var l=new Map,u=No=new Map;u.set(a,l)}else u=No,l=u.get(a),l||(l=new Map,u.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),u=0;u<a.length;u++){var f=a[u];if(!(f[lr]||f[we]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var p=f.getAttribute(n)||"";p=e+p;var m=l.get(p);m?m.push(f):l.set(p,[f])}}return l}function Hm(e,n,a){e=e.ownerDocument||e,e.head.insertBefore(a,n==="title"?e.querySelector("head > title"):null)}function fT(e,n,a){if(a===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function qm(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function dT(e,n,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var u=Aa(l.href),f=n.querySelector(qr(u));if(f){n=f._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=zo.bind(e),n.then(e,e)),a.state.loading|=4,a.instance=f,xe(f);return}f=n.ownerDocument||n,l=Vm(l),(u=Ti.get(u))&&pd(l,u),f=f.createElement("link"),xe(f);var p=f;p._p=new Promise(function(m,S){p.onload=m,p.onerror=S}),Ce(f,"link",l),a.instance=f}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=zo.bind(e),n.addEventListener("load",a),n.addEventListener("error",a))}}var md=0;function hT(e,n){return e.stylesheets&&e.count===0&&Fo(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var l=setTimeout(function(){if(e.stylesheets&&Fo(e,e.stylesheets),e.unsuspend){var f=e.unsuspend;e.unsuspend=null,f()}},6e4+n);0<e.imgBytes&&md===0&&(md=62500*Q1());var u=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Fo(e,e.stylesheets),e.unsuspend)){var f=e.unsuspend;e.unsuspend=null,f()}},(e.imgBytes>md?50:800)+n);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(u)}}:null}function zo(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Fo(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Uo=null;function Fo(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Uo=new Map,n.forEach(yT,e),Uo=null,zo.call(e))}function yT(e,n){if(!(n.state.loading&4)){var a=Uo.get(e);if(a)var l=a.get(null);else{a=new Map,Uo.set(e,a);for(var u=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<u.length;f++){var p=u[f];(p.nodeName==="LINK"||p.getAttribute("media")!=="not all")&&(a.set(p.dataset.precedence,p),l=p)}l&&a.set(null,l)}u=n.instance,p=u.getAttribute("data-precedence"),f=a.get(p)||l,f===l&&a.set(null,u),a.set(p,u),this.count++,l=zo.bind(this),u.addEventListener("load",l),u.addEventListener("error",l),f?f.parentNode.insertBefore(u,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(u,e.firstChild)),n.state.loading|=4}}var kr={$$typeof:Q,Provider:null,Consumer:null,_currentValue:T,_currentValue2:T,_threadCount:0};function pT(e,n,a,l,u,f,p,m,S){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fu(0),this.hiddenUpdates=fu(null),this.identifierPrefix=l,this.onUncaughtError=u,this.onCaughtError=f,this.onRecoverableError=p,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function Ym(e,n,a,l,u,f,p,m,S,C,N,F){return e=new pT(e,n,a,p,S,C,N,F,m),n=1,f===!0&&(n|=24),f=ni(3,null,null,n),e.current=f,f.stateNode=e,n=Xu(),n.refCount++,e.pooledCache=n,n.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:n},$u(f),e}function km(e){return e?(e=ea,e):ea}function Qm(e,n,a,l,u,f){u=km(u),l.context===null?l.context=u:l.pendingContext=u,l=Hn(n),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=qn(e,l,n),a!==null&&(Qe(a,e,n),xr(a,e,n))}function Zm(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<n?a:n}}function vd(e,n){Zm(e,n),(e=e.alternate)&&Zm(e,n)}function Xm(e){if(e.tag===13||e.tag===31){var n=As(e,67108864);n!==null&&Qe(n,e,67108864),vd(e,67108864)}}function Km(e){if(e.tag===13||e.tag===31){var n=oi();n=du(n);var a=As(e,n);a!==null&&Qe(a,e,n),vd(e,n)}}var Po=!0;function gT(e,n,a,l){var u=_.T;_.T=null;var f=x.p;try{x.p=2,_d(e,n,a,l)}finally{x.p=f,_.T=u}}function mT(e,n,a,l){var u=_.T;_.T=null;var f=x.p;try{x.p=8,_d(e,n,a,l)}finally{x.p=f,_.T=u}}function _d(e,n,a,l){if(Po){var u=bd(l);if(u===null)ad(e,n,l,Vo,a),Jm(e,l);else if(_T(u,e,n,a,l))l.stopPropagation();else if(Jm(e,l),n&4&&-1<vT.indexOf(e)){for(;u!==null;){var f=qs(u);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var p=vs(f.pendingLanes);if(p!==0){var m=f;for(m.pendingLanes|=2,m.entangledLanes|=2;p;){var S=1<<31-ei(p);m.entanglements[1]|=S,p&=~S}Hi(f),(Rt&6)===0&&(To=$e()+500,Vr(0))}}break;case 31:case 13:m=As(f,2),m!==null&&Qe(m,f,2),xo(),vd(f,2)}if(f=bd(l),f===null&&ad(e,n,l,Vo,a),f===u)break;u=f}u!==null&&l.stopPropagation()}else ad(e,n,l,null,a)}}function bd(e){return e=Su(e),Sd(e)}var Vo=null;function Sd(e){if(Vo=null,e=Hs(e),e!==null){var n=c(e);if(n===null)e=null;else{var a=n.tag;if(a===13){if(e=d(n),e!==null)return e;e=null}else if(a===31){if(e=h(n),e!==null)return e;e=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Vo=e,null}function Wm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(nS()){case ay:return 2;case ry:return 8;case Ml:case sS:return 32;case ly:return 268435456;default:return 32}default:return 32}}var Td=!1,es=null,is=null,ns=null,Qr=new Map,Zr=new Map,ss=[],vT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Jm(e,n){switch(e){case"focusin":case"focusout":es=null;break;case"dragenter":case"dragleave":is=null;break;case"mouseover":case"mouseout":ns=null;break;case"pointerover":case"pointerout":Qr.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zr.delete(n.pointerId)}}function Xr(e,n,a,l,u,f){return e===null||e.nativeEvent!==f?(e={blockedOn:n,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[u]},n!==null&&(n=qs(n),n!==null&&Xm(n)),e):(e.eventSystemFlags|=l,n=e.targetContainers,u!==null&&n.indexOf(u)===-1&&n.push(u),e)}function _T(e,n,a,l,u){switch(n){case"focusin":return es=Xr(es,e,n,a,l,u),!0;case"dragenter":return is=Xr(is,e,n,a,l,u),!0;case"mouseover":return ns=Xr(ns,e,n,a,l,u),!0;case"pointerover":var f=u.pointerId;return Qr.set(f,Xr(Qr.get(f)||null,e,n,a,l,u)),!0;case"gotpointercapture":return f=u.pointerId,Zr.set(f,Xr(Zr.get(f)||null,e,n,a,l,u)),!0}return!1}function $m(e){var n=Hs(e.target);if(n!==null){var a=c(n);if(a!==null){if(n=a.tag,n===13){if(n=d(a),n!==null){e.blockedOn=n,hy(e.priority,function(){Km(a)});return}}else if(n===31){if(n=h(a),n!==null){e.blockedOn=n,hy(e.priority,function(){Km(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function jo(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var a=bd(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);bu=l,a.target.dispatchEvent(l),bu=null}else return n=qs(a),n!==null&&Xm(n),e.blockedOn=a,!1;n.shift()}return!0}function t0(e,n,a){jo(e)&&a.delete(n)}function bT(){Td=!1,es!==null&&jo(es)&&(es=null),is!==null&&jo(is)&&(is=null),ns!==null&&jo(ns)&&(ns=null),Qr.forEach(t0),Zr.forEach(t0)}function Go(e,n){e.blockedOn===n&&(e.blockedOn=null,Td||(Td=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,bT)))}var Ho=null;function e0(e){Ho!==e&&(Ho=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Ho===e&&(Ho=null);for(var n=0;n<e.length;n+=3){var a=e[n],l=e[n+1],u=e[n+2];if(typeof l!="function"){if(Sd(l||a)===null)continue;break}var f=qs(a);f!==null&&(e.splice(n,3),n-=3,bf(f,{pending:!0,data:u,method:a.method,action:l},l,u))}}))}function Ea(e){function n(S){return Go(S,e)}es!==null&&Go(es,e),is!==null&&Go(is,e),ns!==null&&Go(ns,e),Qr.forEach(n),Zr.forEach(n);for(var a=0;a<ss.length;a++){var l=ss[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<ss.length&&(a=ss[0],a.blockedOn===null);)$m(a),a.blockedOn===null&&ss.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var u=a[l],f=a[l+1],p=u[je]||null;if(typeof f=="function")p||e0(a);else if(p){var m=null;if(f&&f.hasAttribute("formAction")){if(u=f,p=f[je]||null)m=p.formAction;else if(Sd(u)!==null)continue}else m=p.action;typeof m=="function"?a[l+1]=m:(a.splice(l,3),l-=3),e0(a)}}}function i0(){function e(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(p){return u=p})},focusReset:"manual",scroll:"manual"})}function n(){u!==null&&(u(),u=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,u=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),u!==null&&(u(),u=null)}}}function Ad(e){this._internalRoot=e}qo.prototype.render=Ad.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(r(409));var a=n.current,l=oi();Qm(a,l,e,n,null,null)},qo.prototype.unmount=Ad.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Qm(e.current,2,null,e,null,null),xo(),n[Gs]=null}};function qo(e){this._internalRoot=e}qo.prototype.unstable_scheduleHydration=function(e){if(e){var n=dy();e={blockedOn:null,target:e,priority:n};for(var a=0;a<ss.length&&n!==0&&n<ss[a].priority;a++);ss.splice(a,0,e),a===0&&$m(e)}};var n0=t.version;if(n0!=="19.2.0")throw Error(r(527,n0,"19.2.0"));x.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=g(n),e=e!==null?v(e):null,e=e===null?null:e.stateNode,e};var ST={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:_,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yo.isDisabled&&Yo.supportsFiber)try{sr=Yo.inject(ST),ti=Yo}catch{}}return Wr.createRoot=function(e,n){if(!o(e))throw Error(r(299));var a=!1,l="",u=ug,f=fg,p=dg;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(u=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(p=n.onRecoverableError)),n=Ym(e,1,!1,null,null,a,l,null,u,f,p,i0),e[Gs]=n.current,sd(e),new Ad(n)},Wr.hydrateRoot=function(e,n,a){if(!o(e))throw Error(r(299));var l=!1,u="",f=ug,p=fg,m=dg,S=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(p=a.onCaughtError),a.onRecoverableError!==void 0&&(m=a.onRecoverableError),a.formState!==void 0&&(S=a.formState)),n=Ym(e,1,!0,n,a??null,l,u,S,f,p,m,i0),n.context=km(null),a=n.current,l=oi(),l=du(l),u=Hn(l),u.callback=null,qn(a,u,l),a=l,n.current.lanes=a,rr(n,a),Hi(n),e[Gs]=n.current,sd(e),new qo(n)},Wr.version="19.2.0",Wr}var f0;function VT(){if(f0)return wd.exports;f0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),wd.exports=PT(),wd.exports}var jT=VT();const GT=Lv(jT),HT=new Uint32Array([0,2,1,0,3,2]),qT=new Float32Array([0,1,0,0,1,0,1,1]);function YT(s,t){if(!t)return kT(s);const i=Math.max(Math.abs(s[0][0]-s[3][0]),Math.abs(s[1][0]-s[2][0])),r=Math.max(Math.abs(s[1][1]-s[0][1]),Math.abs(s[2][1]-s[3][1])),o=Math.ceil(i/t)+1,c=Math.ceil(r/t)+1,d=(o-1)*(c-1)*6,h=new Uint32Array(d),y=new Float32Array(o*c*2),g=new Float64Array(o*c*3);let v=0,b=0;for(let E=0;E<o;E++){const M=E/(o-1);for(let V=0;V<c;V++){const j=V/(c-1),H=QT(s,M,j);g[v*3+0]=H[0],g[v*3+1]=H[1],g[v*3+2]=H[2]||0,y[v*2+0]=M,y[v*2+1]=1-j,E>0&&V>0&&(h[b++]=v-c,h[b++]=v-c-1,h[b++]=v-1,h[b++]=v-c,h[b++]=v-1,h[b++]=v),v++}}return{vertexCount:d,positions:g,indices:h,texCoords:y}}function kT(s){const t=new Float64Array(12);for(let i=0;i<s.length;i++)t[i*3+0]=s[i][0],t[i*3+1]=s[i][1],t[i*3+2]=s[i][2]||0;return{vertexCount:6,positions:t,indices:HT,texCoords:qT}}function QT(s,t,i){return xd(xd(s[0],s[1],i),xd(s[3],s[2],i),t)}const d0=`uniform bitmapUniforms {
  vec4 bounds;
  float coordinateConversion;
  float desaturate;
  vec3 tintColor;
  vec4 transparentColor;
} bitmap;
`,ZT={name:"bitmap",vs:d0,fs:d0,uniformTypes:{bounds:"vec4<f32>",coordinateConversion:"f32",desaturate:"f32",tintColor:"vec3<f32>",transparentColor:"vec4<f32>"}},XT=`#version 300 es
#define SHADER_NAME bitmap-layer-vertex-shader

in vec2 texCoords;
in vec3 positions;
in vec3 positions64Low;

out vec2 vTexCoord;
out vec2 vTexPos;

const vec3 pickingColor = vec3(1.0, 0.0, 0.0);

void main(void) {
  geometry.worldPosition = positions;
  geometry.uv = texCoords;
  geometry.pickingColor = pickingColor;

  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  vTexCoord = texCoords;

  if (bitmap.coordinateConversion < -0.5) {
    vTexPos = geometry.position.xy + project.commonOrigin.xy;
  } else if (bitmap.coordinateConversion > 0.5) {
    vTexPos = geometry.worldPosition.xy;
  }

  vec4 color = vec4(0.0);
  DECKGL_FILTER_COLOR(color, geometry);
}
`,KT=`
vec3 packUVsIntoRGB(vec2 uv) {
  // Extract the top 8 bits. We want values to be truncated down so we can add a fraction
  vec2 uv8bit = floor(uv * 256.);

  // Calculate the normalized remainders of u and v parts that do not fit into 8 bits
  // Scale and clamp to 0-1 range
  vec2 uvFraction = fract(uv * 256.);
  vec2 uvFraction4bit = floor(uvFraction * 16.);

  // Remainder can be encoded in blue channel, encode as 4 bits for pixel coordinates
  float fractions = uvFraction4bit.x + uvFraction4bit.y * 16.;

  return vec3(uv8bit, fractions) / 255.;
}
`,WT=`#version 300 es
#define SHADER_NAME bitmap-layer-fragment-shader

#ifdef GL_ES
precision highp float;
#endif

uniform sampler2D bitmapTexture;

in vec2 vTexCoord;
in vec2 vTexPos;

out vec4 fragColor;

/* projection utils */
const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / PI / 2.0;

// from degrees to Web Mercator
vec2 lnglat_to_mercator(vec2 lnglat) {
  float x = lnglat.x;
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

// from Web Mercator to degrees
vec2 mercator_to_lnglat(vec2 xy) {
  xy /= WORLD_SCALE;
  return degrees(vec2(
    xy.x - PI,
    atan(exp(xy.y - PI)) * 2.0 - PI * 0.5
  ));
}
/* End projection utils */

// apply desaturation
vec3 color_desaturate(vec3 color) {
  float luminance = (color.r + color.g + color.b) * 0.333333333;
  return mix(color, vec3(luminance), bitmap.desaturate);
}

// apply tint
vec3 color_tint(vec3 color) {
  return color * bitmap.tintColor;
}

// blend with background color
vec4 apply_opacity(vec3 color, float alpha) {
  if (bitmap.transparentColor.a == 0.0) {
    return vec4(color, alpha);
  }
  float blendedAlpha = alpha + bitmap.transparentColor.a * (1.0 - alpha);
  float highLightRatio = alpha / blendedAlpha;
  vec3 blendedRGB = mix(bitmap.transparentColor.rgb, color, highLightRatio);
  return vec4(blendedRGB, blendedAlpha);
}

vec2 getUV(vec2 pos) {
  return vec2(
    (pos.x - bitmap.bounds[0]) / (bitmap.bounds[2] - bitmap.bounds[0]),
    (pos.y - bitmap.bounds[3]) / (bitmap.bounds[1] - bitmap.bounds[3])
  );
}

${KT}

void main(void) {
  vec2 uv = vTexCoord;
  if (bitmap.coordinateConversion < -0.5) {
    vec2 lnglat = mercator_to_lnglat(vTexPos);
    uv = getUV(lnglat);
  } else if (bitmap.coordinateConversion > 0.5) {
    vec2 commonPos = lnglat_to_mercator(vTexPos);
    uv = getUV(commonPos);
  }
  vec4 bitmapColor = texture(bitmapTexture, uv);

  fragColor = apply_opacity(color_tint(color_desaturate(bitmapColor.rgb)), bitmapColor.a * layer.opacity);

  geometry.uv = uv;
  DECKGL_FILTER_COLOR(fragColor, geometry);

  if (bool(picking.isActive) && !bool(picking.isAttribute)) {
    // Since instance information is not used, we can use picking color for pixel index
    fragColor.rgb = packUVsIntoRGB(uv);
  }
}
`,JT={image:{type:"image",value:null,async:!0},bounds:{type:"array",value:[1,0,0,1],compare:!0},_imageCoordinateSystem:ul.DEFAULT,desaturate:{type:"number",min:0,max:1,value:0},transparentColor:{type:"color",value:[0,0,0,0]},tintColor:{type:"color",value:[255,255,255]},textureParameters:{type:"object",ignore:!0,value:null}};class ph extends Ja{getShaders(){return super.getShaders({vs:XT,fs:WT,modules:[$a,tr,ZT]})}initializeState(){const t=this.getAttributeManager();t.remove(["instancePickingColors"]);const i=!0;t.add({indices:{size:1,isIndexed:!0,update:r=>r.value=this.state.mesh.indices,noAlloc:i},positions:{size:3,type:"float64",fp64:this.use64bitPositions(),update:r=>r.value=this.state.mesh.positions,noAlloc:i},texCoords:{size:2,update:r=>r.value=this.state.mesh.texCoords,noAlloc:i}})}updateState({props:t,oldProps:i,changeFlags:r}){const o=this.getAttributeManager();if(r.extensionsChanged&&(this.state.model?.destroy(),this.state.model=this._getModel(),o.invalidateAll()),t.bounds!==i.bounds){const c=this.state.mesh,d=this._createMesh();this.state.model.setVertexCount(d.vertexCount);for(const h in d)c&&c[h]!==d[h]&&o.invalidate(h);this.setState({mesh:d,...this._getCoordinateUniforms()})}else t._imageCoordinateSystem!==i._imageCoordinateSystem&&this.setState(this._getCoordinateUniforms())}getPickingInfo(t){const{image:i}=this.props,r=t.info;if(!r.color||!i)return r.bitmap=null,r;const{width:o,height:c}=i;r.index=0;const d=$T(r.color);return r.bitmap={size:{width:o,height:c},uv:d,pixel:[Math.floor(d[0]*o),Math.floor(d[1]*c)]},r}disablePickingIndex(){this.setState({disablePicking:!0})}restorePickingColors(){this.setState({disablePicking:!1})}_updateAutoHighlight(t){super._updateAutoHighlight({...t,color:this.encodePickingColor(0)})}_createMesh(){const{bounds:t}=this.props;let i=t;return h0(t)&&(i=[[t[0],t[1]],[t[0],t[3]],[t[2],t[3]],[t[2],t[1]]]),YT(i,this.context.viewport.resolution)}_getModel(){return new ds(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),topology:"triangle-list",isInstanced:!1})}draw(t){const{shaderModuleProps:i}=t,{model:r,coordinateConversion:o,bounds:c,disablePicking:d}=this.state,{image:h,desaturate:y,transparentColor:g,tintColor:v}=this.props;if(!(i.picking.isActive&&d)&&h&&r){const b={bitmapTexture:h,bounds:c,coordinateConversion:o,desaturate:y,tintColor:v.slice(0,3).map(E=>E/255),transparentColor:g.map(E=>E/255)};r.shaderInputs.setProps({bitmap:b}),r.draw(this.context.renderPass)}}_getCoordinateUniforms(){const{LNGLAT:t,CARTESIAN:i,DEFAULT:r}=ul;let{_imageCoordinateSystem:o}=this.props;if(o!==r){const{bounds:c}=this.props;if(!h0(c))throw new Error("_imageCoordinateSystem only supports rectangular bounds");const d=this.context.viewport.resolution?t:i;if(o=o===t?t:i,o===t&&d===i)return{coordinateConversion:-1,bounds:c};if(o===i&&d===t){const h=bc([c[0],c[1]]),y=bc([c[2],c[3]]);return{coordinateConversion:1,bounds:[h[0],h[1],y[0],y[1]]}}}return{coordinateConversion:0,bounds:[0,0,0,0]}}}ph.layerName="BitmapLayer";ph.defaultProps=JT;function $T(s){const[t,i,r]=s,o=(r&240)/256,c=(r&15)/16;return[(t+c)/256,(i+o)/256]}function h0(s){return Number.isFinite(s[0])}const y0=`uniform iconUniforms {
  float sizeScale;
  vec2 iconsTextureDim;
  float sizeBasis;
  float sizeMinPixels;
  float sizeMaxPixels;
  bool billboard;
  highp int sizeUnits;
  float alphaCutoff;
} icon;
`,t2={name:"icon",vs:y0,fs:y0,uniformTypes:{sizeScale:"f32",iconsTextureDim:"vec2<f32>",sizeBasis:"f32",sizeMinPixels:"f32",sizeMaxPixels:"f32",billboard:"f32",sizeUnits:"i32",alphaCutoff:"f32"}},e2=`#version 300 es
#define SHADER_NAME icon-layer-vertex-shader
in vec2 positions;
in vec3 instancePositions;
in vec3 instancePositions64Low;
in float instanceSizes;
in float instanceAngles;
in vec4 instanceColors;
in vec3 instancePickingColors;
in vec4 instanceIconFrames;
in float instanceColorModes;
in vec2 instanceOffsets;
in vec2 instancePixelOffset;
out float vColorMode;
out vec4 vColor;
out vec2 vTextureCoords;
out vec2 uv;
vec2 rotate_by_angle(vec2 vertex, float angle) {
float angle_radian = angle * PI / 180.0;
float cos_angle = cos(angle_radian);
float sin_angle = sin(angle_radian);
mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
return rotationMatrix * vertex;
}
void main(void) {
geometry.worldPosition = instancePositions;
geometry.uv = positions;
geometry.pickingColor = instancePickingColors;
uv = positions;
vec2 iconSize = instanceIconFrames.zw;
float sizePixels = clamp(
project_size_to_pixel(instanceSizes * icon.sizeScale, icon.sizeUnits),
icon.sizeMinPixels, icon.sizeMaxPixels
);
float iconConstraint = icon.sizeBasis == 0.0 ? iconSize.x : iconSize.y;
float instanceScale = iconConstraint == 0.0 ? 0.0 : sizePixels / iconConstraint;
vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;
pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;
pixelOffset += instancePixelOffset;
pixelOffset.y *= -1.0;
if (icon.billboard)  {
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
vec3 offset = vec3(pixelOffset, 0.0);
DECKGL_FILTER_SIZE(offset, geometry);
gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
} else {
vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
DECKGL_FILTER_SIZE(offset_common, geometry);
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
}
vTextureCoords = mix(
instanceIconFrames.xy,
instanceIconFrames.xy + iconSize,
(positions.xy + 1.0) / 2.0
) / icon.iconsTextureDim;
vColor = instanceColors;
DECKGL_FILTER_COLOR(vColor, geometry);
vColorMode = instanceColorModes;
}
`,i2=`#version 300 es
#define SHADER_NAME icon-layer-fragment-shader
precision highp float;
uniform sampler2D iconsTexture;
in float vColorMode;
in vec4 vColor;
in vec2 vTextureCoords;
in vec2 uv;
out vec4 fragColor;
void main(void) {
geometry.uv = uv;
vec4 texColor = texture(iconsTexture, vTextureCoords);
vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);
float a = texColor.a * layer.opacity * vColor.a;
if (a < icon.alphaCutoff) {
discard;
}
fragColor = vec4(color, a);
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,n2=1024,s2=4,p0=()=>{},g0={minFilter:"linear",mipmapFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"},a2={x:0,y:0,width:0,height:0};function r2(s){return Math.pow(2,Math.ceil(Math.log2(s)))}function l2(s,t,i,r){const o=Math.min(i/t.width,r/t.height),c=Math.floor(t.width*o),d=Math.floor(t.height*o);return o===1?{image:t,width:c,height:d}:(s.canvas.height=d,s.canvas.width=c,s.clearRect(0,0,c,d),s.drawImage(t,0,0,t.width,t.height,0,0,c,d),{image:s.canvas,width:c,height:d})}function yl(s){return s&&(s.id||s.url)}function o2(s,t,i,r){const{width:o,height:c,device:d}=s,h=d.createTexture({format:"rgba8unorm",width:t,height:i,sampler:r,mipLevels:d.getMipLevelCount(t,i)}),y=d.createCommandEncoder();return y.copyTextureToTexture({sourceTexture:s,destinationTexture:h,width:o,height:c}),y.finish(),h.generateMipmapsWebGL(),s.destroy(),h}function m0(s,t,i){for(let r=0;r<t.length;r++){const{icon:o,xOffset:c}=t[r],d=yl(o);s[d]={...o,x:c,y:i}}}function c2({icons:s,buffer:t,mapping:i={},xOffset:r=0,yOffset:o=0,rowHeight:c=0,canvasWidth:d}){let h=[];for(let y=0;y<s.length;y++){const g=s[y],v=yl(g);if(!i[v]){const{height:b,width:E}=g;r+E+t>d&&(m0(i,h,o),r=0,o=c+o+t,c=0,h=[]),h.push({icon:g,xOffset:r}),r=r+E+t,c=Math.max(c,b)}}return h.length>0&&m0(i,h,o),{mapping:i,rowHeight:c,xOffset:r,yOffset:o,canvasWidth:d,canvasHeight:r2(c+o+t)}}function u2(s,t,i){if(!s||!t)return null;i=i||{};const r={},{iterable:o,objectInfo:c}=Cv(s);for(const d of o){c.index++;const h=t(d,c),y=yl(h);if(!h)throw new Error("Icon is missing.");if(!h.url)throw new Error("Icon url is missing.");!r[y]&&(!i[y]||h.url!==i[y].url)&&(r[y]={...h,source:d,sourceIndex:c.index})}return r}class f2{constructor(t,{onUpdate:i=p0,onError:r=p0}){this._loadOptions=null,this._texture=null,this._externalTexture=null,this._mapping={},this._samplerParameters=null,this._pendingCount=0,this._autoPacking=!1,this._xOffset=0,this._yOffset=0,this._rowHeight=0,this._buffer=s2,this._canvasWidth=n2,this._canvasHeight=0,this._canvas=null,this.device=t,this.onUpdate=i,this.onError=r}finalize(){this._texture?.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(t){const i=this._autoPacking?yl(t):t;return this._mapping[i]||a2}setProps({loadOptions:t,autoPacking:i,iconAtlas:r,iconMapping:o,textureParameters:c}){t&&(this._loadOptions=t),i!==void 0&&(this._autoPacking=i),o&&(this._mapping=o),r&&(this._texture?.delete(),this._texture=null,this._externalTexture=r),c&&(this._samplerParameters=c)}get isLoaded(){return this._pendingCount===0}packIcons(t,i){if(!this._autoPacking||typeof document>"u")return;const r=Object.values(u2(t,i,this._mapping)||{});if(r.length>0){const{mapping:o,xOffset:c,yOffset:d,rowHeight:h,canvasHeight:y}=c2({icons:r,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=h,this._mapping=o,this._xOffset=c,this._yOffset=d,this._canvasHeight=y,this._texture||(this._texture=this.device.createTexture({format:"rgba8unorm",data:null,width:this._canvasWidth,height:this._canvasHeight,sampler:this._samplerParameters||g0,mipLevels:this.device.getMipLevelCount(this._canvasWidth,this._canvasHeight)})),this._texture.height!==this._canvasHeight&&(this._texture=o2(this._texture,this._canvasWidth,this._canvasHeight,this._samplerParameters||g0)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(r),this._texture?.generateMipmapsWebGL()}}_loadIcons(t){const i=this._canvas.getContext("2d",{willReadFrequently:!0});for(const r of t)this._pendingCount++,wT(r.url,this._loadOptions).then(o=>{const c=yl(r),d=this._mapping[c],{x:h,y,width:g,height:v}=d,{image:b,width:E,height:M}=l2(i,o,g,v);this._texture?.copyExternalImage({image:b,x:h+(g-E)/2,y:y+(v-M)/2,width:E,height:M}),d.width=E,d.height=M,this._texture?.generateMipmapsWebGL(),this.onUpdate()}).catch(o=>{this.onError({url:r.url,source:r.source,sourceIndex:r.sourceIndex,loadOptions:this._loadOptions,error:o})}).finally(()=>{this._pendingCount--})}}const Bv=[0,0,0,255],d2={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeBasis:"height",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:s=>s.position},getIcon:{type:"accessor",value:s=>s.icon},getColor:{type:"accessor",value:Bv},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,optional:!0},textureParameters:{type:"object",ignore:!0,value:null}};class tu extends Ja{getShaders(){return super.getShaders({vs:e2,fs:i2,modules:[$a,tr,t2]})}initializeState(){this.state={iconManager:new f2(this.context.device,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:"uint8",accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:"unorm8",transition:!0,accessor:"getColor",defaultValue:Bv},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(t){super.updateState(t);const{props:i,oldProps:r,changeFlags:o}=t,c=this.getAttributeManager(),{iconAtlas:d,iconMapping:h,data:y,getIcon:g,textureParameters:v}=i,{iconManager:b}=this.state;if(typeof d=="string")return;const E=d||this.internalState.isAsyncPropLoading("iconAtlas");b.setProps({loadOptions:i.loadOptions,autoPacking:!E,iconAtlas:d,iconMapping:E?h:null,textureParameters:v}),E?r.iconMapping!==i.iconMapping&&c.invalidate("getIcon"):(o.dataChanged||o.updateTriggersChanged&&(o.updateTriggersChanged.all||o.updateTriggersChanged.getIcon))&&b.packIcons(y,g),o.extensionsChanged&&(this.state.model?.destroy(),this.state.model=this._getModel(),c.invalidateAll())}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(t){super.finalizeState(t),this.state.iconManager.finalize()}draw({uniforms:t}){const{sizeScale:i,sizeBasis:r,sizeMinPixels:o,sizeMaxPixels:c,sizeUnits:d,billboard:h,alphaCutoff:y}=this.props,{iconManager:g}=this.state,v=g.getTexture();if(v){const b=this.state.model,E={iconsTexture:v,iconsTextureDim:[v.width,v.height],sizeUnits:hl[d],sizeScale:i,sizeBasis:r==="height"?1:0,sizeMinPixels:o,sizeMaxPixels:c,billboard:h,alphaCutoff:y};b.shaderInputs.setProps({icon:E}),b.draw(this.context.renderPass)}}_getModel(){const t=[-1,-1,1,-1,-1,1,1,1];return new ds(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new ka({topology:"triangle-strip",attributes:{positions:{size:2,value:new Float32Array(t)}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(t){const i=this.getCurrentLayer()?.props.onIconError;i?i(t):$i.error(t.error.message)()}getInstanceOffset(t){const{width:i,height:r,anchorX:o=i/2,anchorY:c=r/2}=this.state.iconManager.getIconMapping(t);return[i/2-o,r/2-c]}getInstanceColorMode(t){return this.state.iconManager.getIconMapping(t).mask?1:0}getInstanceIconFrame(t){const{x:i,y:r,width:o,height:c}=this.state.iconManager.getIconMapping(t);return[i,r,o,c]}}tu.defaultProps=d2;tu.layerName="IconLayer";const v0=`uniform scatterplotUniforms {
  float radiusScale;
  float radiusMinPixels;
  float radiusMaxPixels;
  float lineWidthScale;
  float lineWidthMinPixels;
  float lineWidthMaxPixels;
  float stroked;
  float filled;
  bool antialiasing;
  bool billboard;
  highp int radiusUnits;
  highp int lineWidthUnits;
} scatterplot;
`,h2={name:"scatterplot",vs:v0,fs:v0,source:"",uniformTypes:{radiusScale:"f32",radiusMinPixels:"f32",radiusMaxPixels:"f32",lineWidthScale:"f32",lineWidthMinPixels:"f32",lineWidthMaxPixels:"f32",stroked:"f32",filled:"f32",antialiasing:"f32",billboard:"f32",radiusUnits:"i32",lineWidthUnits:"i32"}},y2=`#version 300 es
#define SHADER_NAME scatterplot-layer-vertex-shader
in vec3 positions;
in vec3 instancePositions;
in vec3 instancePositions64Low;
in float instanceRadius;
in float instanceLineWidths;
in vec4 instanceFillColors;
in vec4 instanceLineColors;
in vec3 instancePickingColors;
out vec4 vFillColor;
out vec4 vLineColor;
out vec2 unitPosition;
out float innerUnitRadius;
out float outerRadiusPixels;
void main(void) {
geometry.worldPosition = instancePositions;
outerRadiusPixels = clamp(
project_size_to_pixel(scatterplot.radiusScale * instanceRadius, scatterplot.radiusUnits),
scatterplot.radiusMinPixels, scatterplot.radiusMaxPixels
);
float lineWidthPixels = clamp(
project_size_to_pixel(scatterplot.lineWidthScale * instanceLineWidths, scatterplot.lineWidthUnits),
scatterplot.lineWidthMinPixels, scatterplot.lineWidthMaxPixels
);
outerRadiusPixels += scatterplot.stroked * lineWidthPixels / 2.0;
float edgePadding = scatterplot.antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;
unitPosition = edgePadding * positions.xy;
geometry.uv = unitPosition;
geometry.pickingColor = instancePickingColors;
innerUnitRadius = 1.0 - scatterplot.stroked * lineWidthPixels / outerRadiusPixels;
if (scatterplot.billboard) {
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
vec3 offset = edgePadding * positions * outerRadiusPixels;
DECKGL_FILTER_SIZE(offset, geometry);
gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
} else {
vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);
DECKGL_FILTER_SIZE(offset, geometry);
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
}
vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * layer.opacity);
DECKGL_FILTER_COLOR(vFillColor, geometry);
vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * layer.opacity);
DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,p2=`#version 300 es
#define SHADER_NAME scatterplot-layer-fragment-shader
precision highp float;
in vec4 vFillColor;
in vec4 vLineColor;
in vec2 unitPosition;
in float innerUnitRadius;
in float outerRadiusPixels;
out vec4 fragColor;
void main(void) {
geometry.uv = unitPosition;
float distToCenter = length(unitPosition) * outerRadiusPixels;
float inCircle = scatterplot.antialiasing ?
smoothedge(distToCenter, outerRadiusPixels) :
step(distToCenter, outerRadiusPixels);
if (inCircle == 0.0) {
discard;
}
if (scatterplot.stroked > 0.5) {
float isLine = scatterplot.antialiasing ?
smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :
step(innerUnitRadius * outerRadiusPixels, distToCenter);
if (scatterplot.filled > 0.5) {
fragColor = mix(vFillColor, vLineColor, isLine);
} else {
if (isLine == 0.0) {
discard;
}
fragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);
}
} else if (scatterplot.filled < 0.5) {
discard;
} else {
fragColor = vFillColor;
}
fragColor.a *= inCircle;
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,g2=`// Main shaders

struct ScatterplotUniforms {
  radiusScale: f32,
  radiusMinPixels: f32,
  radiusMaxPixels: f32,
  lineWidthScale: f32,
  lineWidthMinPixels: f32,
  lineWidthMaxPixels: f32,
  stroked: f32,
  filled: i32,
  antialiasing: i32,
  billboard: i32,
  radiusUnits: i32,
  lineWidthUnits: i32,
};

struct ConstantAttributeUniforms {
 instancePositions: vec3<f32>,
 instancePositions64Low: vec3<f32>,
 instanceRadius: f32,
 instanceLineWidths: f32,
 instanceFillColors: vec4<f32>,
 instanceLineColors: vec4<f32>,
 instancePickingColors: vec3<f32>,

 instancePositionsConstant: i32,
 instancePositions64LowConstant: i32,
 instanceRadiusConstant: i32,
 instanceLineWidthsConstant: i32,
 instanceFillColorsConstant: i32,
 instanceLineColorsConstant: i32,
 instancePickingColorsConstant: i32
};

@group(0) @binding(2) var<uniform> scatterplot: ScatterplotUniforms;

struct ConstantAttributes {
  instancePositions: vec3<f32>,
  instancePositions64Low: vec3<f32>,
  instanceRadius: f32,
  instanceLineWidths: f32,
  instanceFillColors: vec4<f32>,
  instanceLineColors: vec4<f32>,
  instancePickingColors: vec3<f32>
};

const constants = ConstantAttributes(
  vec3<f32>(0.0),
  vec3<f32>(0.0),
  0.0,
  0.0,
  vec4<f32>(0.0, 0.0, 0.0, 1.0),
  vec4<f32>(0.0, 0.0, 0.0, 1.0),
  vec3<f32>(0.0)
);

struct Attributes {
  @builtin(instance_index) instanceIndex : u32,
  @builtin(vertex_index) vertexIndex : u32,
  @location(0) positions: vec3<f32>,
  @location(1) instancePositions: vec3<f32>,
  @location(2) instancePositions64Low: vec3<f32>,
  @location(3) instanceRadius: f32,
  @location(4) instanceLineWidths: f32,
  @location(5) instanceFillColors: vec4<f32>,
  @location(6) instanceLineColors: vec4<f32>,
  @location(7) instancePickingColors: vec3<f32>
};

struct Varyings {
  @builtin(position) position: vec4<f32>,
  @location(0) vFillColor: vec4<f32>,
  @location(1) vLineColor: vec4<f32>,
  @location(2) unitPosition: vec2<f32>,
  @location(3) innerUnitRadius: f32,
  @location(4) outerRadiusPixels: f32,
};

@vertex
fn vertexMain(attributes: Attributes) -> Varyings {
  var varyings: Varyings;

  // Draw an inline geometry constant array clip space triangle to verify that rendering works.
  // var positions = array<vec2<f32>, 3>(vec2(0.0, 0.5), vec2(-0.5, -0.5), vec2(0.5, -0.5));
  // if (attributes.instanceIndex == 0) {
  //   varyings.position = vec4<f32>(positions[attributes.vertexIndex], 0.0, 1.0);
  //   return varyings;
  // }

  // var geometry: Geometry;
  // geometry.worldPosition = instancePositions;

  // Multiply out radius and clamp to limits
  varyings.outerRadiusPixels = clamp(
    project_unit_size_to_pixel(scatterplot.radiusScale * attributes.instanceRadius, scatterplot.radiusUnits),
    scatterplot.radiusMinPixels, scatterplot.radiusMaxPixels
  );

  // Multiply out line width and clamp to limits
  let lineWidthPixels = clamp(
    project_unit_size_to_pixel(scatterplot.lineWidthScale * attributes.instanceLineWidths, scatterplot.lineWidthUnits),
    scatterplot.lineWidthMinPixels, scatterplot.lineWidthMaxPixels
  );

  // outer radius needs to offset by half stroke width
  varyings.outerRadiusPixels += scatterplot.stroked * lineWidthPixels / 2.0;
  // Expand geometry to accommodate edge smoothing
  let edgePadding = select(
    (varyings.outerRadiusPixels + SMOOTH_EDGE_RADIUS) / varyings.outerRadiusPixels,
    1.0,
    scatterplot.antialiasing != 0
  );

  // position on the containing square in [-1, 1] space
  varyings.unitPosition = edgePadding * attributes.positions.xy;
  geometry.uv = varyings.unitPosition;
  geometry.pickingColor = attributes.instancePickingColors;

  varyings.innerUnitRadius = 1.0 - scatterplot.stroked * lineWidthPixels / varyings.outerRadiusPixels;

  if (scatterplot.billboard != 0) {
    varyings.position = project_position_to_clipspace(attributes.instancePositions, attributes.instancePositions64Low, vec3<f32>(0.0)); // TODO , geometry.position);
    // DECKGL_FILTER_GL_POSITION(varyings.position, geometry);
    let offset = attributes.positions; // * edgePadding * varyings.outerRadiusPixels;
    // DECKGL_FILTER_SIZE(offset, geometry);
    let clipPixels = project_pixel_size_to_clipspace(offset.xy);
    varyings.position.x = clipPixels.x;
    varyings.position.y = clipPixels.y;
  } else {
    let offset = edgePadding * attributes.positions * project_pixel_size_float(varyings.outerRadiusPixels);
    // DECKGL_FILTER_SIZE(offset, geometry);
    varyings.position = project_position_to_clipspace(attributes.instancePositions, attributes.instancePositions64Low, offset); // TODO , geometry.position);
    // DECKGL_FILTER_GL_POSITION(varyings.position, geometry);
  }

  // Apply opacity to instance color, or return instance picking color
  varyings.vFillColor = vec4<f32>(attributes.instanceFillColors.rgb, attributes.instanceFillColors.a * color.opacity);
  // DECKGL_FILTER_COLOR(varyings.vFillColor, geometry);
  varyings.vLineColor = vec4<f32>(attributes.instanceLineColors.rgb, attributes.instanceLineColors.a * color.opacity);
  // DECKGL_FILTER_COLOR(varyings.vLineColor, geometry);

  return varyings;
}

@fragment
fn fragmentMain(varyings: Varyings) -> @location(0) vec4<f32> {
  // var geometry: Geometry;
  // geometry.uv = unitPosition;

  let distToCenter = length(varyings.unitPosition) * varyings.outerRadiusPixels;
  let inCircle = select(
    smoothedge(distToCenter, varyings.outerRadiusPixels),
    step(distToCenter, varyings.outerRadiusPixels),
    scatterplot.antialiasing != 0
  );

  if (inCircle == 0.0) {
    discard;
  }

  var fragColor: vec4<f32>;

  if (scatterplot.stroked != 0) {
    let isLine = select(
      smoothedge(varyings.innerUnitRadius * varyings.outerRadiusPixels, distToCenter),
      step(varyings.innerUnitRadius * varyings.outerRadiusPixels, distToCenter),
      scatterplot.antialiasing != 0
    );

    if (scatterplot.filled != 0) {
      fragColor = mix(varyings.vFillColor, varyings.vLineColor, isLine);
    } else {
      if (isLine == 0.0) {
        discard;
      }
      fragColor = vec4<f32>(varyings.vLineColor.rgb, varyings.vLineColor.a * isLine);
    }
  } else if (scatterplot.filled == 0) {
    discard;
  } else {
    fragColor = varyings.vFillColor;
  }

  fragColor.a *= inCircle;
  // DECKGL_FILTER_COLOR(fragColor, geometry);

  // Apply premultiplied alpha as required by transparent canvas
  fragColor = deckgl_premultiplied_alpha(fragColor);

  return fragColor;
  // return vec4<f32>(0, 0, 1, 1);
}
`,_0=[0,0,0,255],m2={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:s=>s.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:_0},getLineColor:{type:"accessor",value:_0},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class gh extends Ja{getShaders(){return super.getShaders({vs:y2,fs:p2,source:g2,modules:[$a,OT,tr,h2]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,type:"unorm8",accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,type:"unorm8",accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(t){super.updateState(t),t.changeFlags.extensionsChanged&&(this.state.model?.destroy(),this.state.model=this._getModel(),this.getAttributeManager().invalidateAll())}draw({uniforms:t}){const{radiusUnits:i,radiusScale:r,radiusMinPixels:o,radiusMaxPixels:c,stroked:d,filled:h,billboard:y,antialiasing:g,lineWidthUnits:v,lineWidthScale:b,lineWidthMinPixels:E,lineWidthMaxPixels:M}=this.props,V={stroked:d,filled:h,billboard:y,antialiasing:g,radiusUnits:hl[i],radiusScale:r,radiusMinPixels:o,radiusMaxPixels:c,lineWidthUnits:hl[v],lineWidthScale:b,lineWidthMinPixels:E,lineWidthMaxPixels:M},j=this.state.model;j.shaderInputs.setProps({scatterplot:V}),this.context.device.type==="webgpu"&&(j.instanceCount=this.props.data.length),j.draw(this.context.renderPass)}_getModel(){const t=this.context.device.type==="webgpu"?{depthWriteEnabled:!0,depthCompare:"less-equal"}:void 0,i=[-1,-1,0,1,-1,0,-1,1,0,1,1,0];return new ds(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new ka({topology:"triangle-strip",attributes:{positions:{size:3,value:new Float32Array(i)}}}),isInstanced:!0,parameters:t})}}gh.defaultProps=m2;gh.layerName="ScatterplotLayer";const Iv={CLOCKWISE:1,COUNTER_CLOCKWISE:-1};function Rv(s,t,i={}){return v2(s,i)!==t?(b2(s,i),!0):!1}function v2(s,t={}){return Math.sign(_2(s,t))}const b0={x:0,y:1,z:2};function _2(s,t={}){const{start:i=0,end:r=s.length,plane:o="xy"}=t,c=t.size||2;let d=0;const h=b0[o[0]],y=b0[o[1]];for(let g=i,v=r-c;g<r;g+=c)d+=(s[g+h]-s[v+h])*(s[g+y]+s[v+y]),v=g;return d/2}function b2(s,t){const{start:i=0,end:r=s.length,size:o=2}=t,c=(r-i)/o,d=Math.floor(c/2);for(let h=0;h<d;++h){const y=i+h*o,g=i+(c-1-h)*o;for(let v=0;v<o;++v){const b=s[y+v];s[y+v]=s[g+v],s[g+v]=b}}}function Ni(s,t){const i=t.length,r=s.length;if(r>0){let o=!0;for(let c=0;c<i;c++)if(s[r-i+c]!==t[c]){o=!1;break}if(o)return!1}for(let o=0;o<i;o++)s[r+o]=t[o];return!0}function Qd(s,t){const i=t.length;for(let r=0;r<i;r++)s[r]=t[r]}function pl(s,t,i,r,o=[]){const c=r+t*i;for(let d=0;d<i;d++)o[d]=s[c+d];return o}function Zd(s,t,i,r,o=[]){let c,d;if(i&8)c=(r[3]-s[1])/(t[1]-s[1]),d=3;else if(i&4)c=(r[1]-s[1])/(t[1]-s[1]),d=1;else if(i&2)c=(r[2]-s[0])/(t[0]-s[0]),d=2;else if(i&1)c=(r[0]-s[0])/(t[0]-s[0]),d=0;else return null;for(let h=0;h<s.length;h++)o[h]=(d&1)===h?r[d]:c*(t[h]-s[h])+s[h];return o}function ac(s,t){let i=0;return s[0]<t[0]?i|=1:s[0]>t[2]&&(i|=2),s[1]<t[1]?i|=4:s[1]>t[3]&&(i|=8),i}function Nv(s,t){const{size:i=2,broken:r=!1,gridResolution:o=10,gridOffset:c=[0,0],startIndex:d=0,endIndex:h=s.length}=t||{},y=(h-d)/i;let g=[];const v=[g],b=pl(s,0,i,d);let E,M;const V=Uv(b,o,c,[]),j=[];Ni(g,b);for(let H=1;H<y;H++){for(E=pl(s,H,i,d,E),M=ac(E,V);M;){Zd(b,E,M,V,j);const q=ac(j,V);q&&(Zd(b,j,q,V,j),M=q),Ni(g,j),Qd(b,j),T2(V,o,M),r&&g.length>i&&(g=[],v.push(g),Ni(g,b)),M=ac(E,V)}Ni(g,E),Qd(b,E)}return r?v:v[0]}const S0=0,S2=1;function zv(s,t=null,i){if(!s.length)return[];const{size:r=2,gridResolution:o=10,gridOffset:c=[0,0],edgeTypes:d=!1}=i||{},h=[],y=[{pos:s,types:d?new Array(s.length/r).fill(S2):null,holes:t||[]}],g=[[],[]];let v=[];for(;y.length;){const{pos:b,types:E,holes:M}=y.shift();A2(b,r,M[0]||b.length,g),v=Uv(g[0],o,c,v);const V=ac(g[1],v);if(V){let j=T0(b,E,r,0,M[0]||b.length,v,V);const H={pos:j[0].pos,types:j[0].types,holes:[]},q={pos:j[1].pos,types:j[1].types,holes:[]};y.push(H,q);for(let dt=0;dt<M.length;dt++)j=T0(b,E,r,M[dt],M[dt+1]||b.length,v,V),j[0]&&(H.holes.push(H.pos.length),H.pos=ko(H.pos,j[0].pos),d&&(H.types=ko(H.types,j[0].types))),j[1]&&(q.holes.push(q.pos.length),q.pos=ko(q.pos,j[1].pos),d&&(q.types=ko(q.types,j[1].types)))}else{const j={positions:b};d&&(j.edgeTypes=E),M.length&&(j.holeIndices=M),h.push(j)}}return h}function T0(s,t,i,r,o,c,d){const h=(o-r)/i,y=[],g=[],v=[],b=[],E=[];let M,V,j;const H=pl(s,h-1,i,r);let q=Math.sign(d&8?H[1]-c[3]:H[0]-c[2]),dt=t&&t[h-1],Q=0,Nt=0;for(let gt=0;gt<h;gt++)M=pl(s,gt,i,r,M),V=Math.sign(d&8?M[1]-c[3]:M[0]-c[2]),j=t&&t[r/i+gt],V&&q&&q!==V&&(Zd(H,M,d,c,E),Ni(y,E)&&v.push(dt),Ni(g,E)&&b.push(dt)),V<=0?(Ni(y,M)&&v.push(j),Q-=V):v.length&&(v[v.length-1]=S0),V>=0?(Ni(g,M)&&b.push(j),Nt+=V):b.length&&(b[b.length-1]=S0),Qd(H,M),q=V,dt=j;return[Q?{pos:y,types:t&&v}:null,Nt?{pos:g,types:t&&b}:null]}function Uv(s,t,i,r){const o=Math.floor((s[0]-i[0])/t)*t+i[0],c=Math.floor((s[1]-i[1])/t)*t+i[1];return r[0]=o,r[1]=c,r[2]=o+t,r[3]=c+t,r}function T2(s,t,i){i&8?(s[1]+=t,s[3]+=t):i&4?(s[1]-=t,s[3]-=t):i&2?(s[0]+=t,s[2]+=t):i&1&&(s[0]-=t,s[2]-=t)}function A2(s,t,i,r){let o=1/0,c=-1/0,d=1/0,h=-1/0;for(let y=0;y<i;y+=t){const g=s[y],v=s[y+1];o=g<o?g:o,c=g>c?g:c,d=v<d?v:d,h=v>h?v:h}return r[0][0]=o,r[0][1]=d,r[1][0]=c,r[1][1]=h,r}function ko(s,t){for(let i=0;i<t.length;i++)s.push(t[i]);return s}const x2=85.051129;function E2(s,t){const{size:i=2,startIndex:r=0,endIndex:o=s.length,normalize:c=!0}=t||{},d=s.slice(r,o);Fv(d,i,0,o-r);const h=Nv(d,{size:i,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(c)for(const y of h)Pv(y,i);return h}function w2(s,t=null,i){const{size:r=2,normalize:o=!0,edgeTypes:c=!1}=i||{};t=t||[];const d=[],h=[];let y=0,g=0;for(let b=0;b<=t.length;b++){const E=t[b]||s.length,M=g,V=O2(s,r,y,E);for(let j=V;j<E;j++)d[g++]=s[j];for(let j=y;j<V;j++)d[g++]=s[j];Fv(d,r,M,g),M2(d,r,M,g,i?.maxLatitude),y=E,h[b]=g}h.pop();const v=zv(d,h,{size:r,gridResolution:360,gridOffset:[-180,-180],edgeTypes:c});if(o)for(const b of v)Pv(b.positions,r);return v}function O2(s,t,i,r){let o=-1,c=-1;for(let d=i+1;d<r;d+=t){const h=Math.abs(s[d]);h>o&&(o=h,c=d-1)}return c}function M2(s,t,i,r,o=x2){const c=s[i],d=s[r-t];if(Math.abs(c-d)>180){const h=pl(s,0,t,i);h[0]+=Math.round((d-c)/360)*360,Ni(s,h),h[1]=Math.sign(h[1])*o,Ni(s,h),h[0]=c,Ni(s,h)}}function Fv(s,t,i,r){let o=s[0],c;for(let d=i;d<r;d+=t){c=s[d];const h=c-o;(h>180||h<-180)&&(c-=Math.round(h/360)*360),s[d]=o=c}}function Pv(s,t){let i;const r=s.length/t;for(let c=0;c<r&&(i=s[c*t],(i+180)%360===0);c++);const o=-Math.round(i/360)*360;if(o!==0)for(let c=0;c<r;c++)s[c*t]+=o}function L2(s,t,i,r){let o;if(Array.isArray(s[0])){const c=s.length*t;o=new Array(c);for(let d=0;d<s.length;d++)for(let h=0;h<t;h++)o[d*t+h]=s[d][h]||0}else o=s;return i?Nv(o,{size:t,gridResolution:i}):r?E2(o,{size:t}):o}const C2=1,D2=2,Ld=4;class B2 extends Dv{constructor(t){super({...t,attributes:{positions:{size:3,padding:18,initialize:!0,type:t.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}get(t){return this.attributes[t]}getGeometryFromBuffer(t){return this.normalize?super.getGeometryFromBuffer(t):null}normalizeGeometry(t){return this.normalize?L2(t,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):t}getGeometrySize(t){if(A0(t)){let r=0;for(const o of t)r+=this.getGeometrySize(o);return r}const i=this.getPathLength(t);return i<2?0:this.isClosed(t)?i<3?0:i+2:i}updateGeometryAttributes(t,i){if(i.geometrySize!==0)if(t&&A0(t))for(const r of t){const o=this.getGeometrySize(r);i.geometrySize=o,this.updateGeometryAttributes(r,i),i.vertexStart+=o}else this._updateSegmentTypes(t,i),this._updatePositions(t,i)}_updateSegmentTypes(t,i){const r=this.attributes.segmentTypes,o=t?this.isClosed(t):!1,{vertexStart:c,geometrySize:d}=i;r.fill(0,c,c+d),o?(r[c]=Ld,r[c+d-2]=Ld):(r[c]+=C2,r[c+d-2]+=D2),r[c+d-1]=Ld}_updatePositions(t,i){const{positions:r}=this.attributes;if(!r||!t)return;const{vertexStart:o,geometrySize:c}=i,d=new Array(3);for(let h=o,y=0;y<c;h++,y++)this.getPointOnPath(t,y,d),r[h*3]=d[0],r[h*3+1]=d[1],r[h*3+2]=d[2]}getPathLength(t){return t.length/this.positionSize}getPointOnPath(t,i,r=[]){const{positionSize:o}=this;i*o>=t.length&&(i+=1-t.length/o);const c=i*o;return r[0]=t[c],r[1]=t[c+1],r[2]=o===3&&t[c+2]||0,r}isClosed(t){if(!this.normalize)return!!this.opts.loop;const{positionSize:i}=this,r=t.length-i;return t[0]===t[r]&&t[1]===t[r+1]&&(i===2||t[2]===t[r+2])}}function A0(s){return Array.isArray(s[0])}const x0=`uniform pathUniforms {
  float widthScale;
  float widthMinPixels;
  float widthMaxPixels;
  float jointType;
  float capType;
  float miterLimit;
  bool billboard;
  highp int widthUnits;
} path;
`,I2={name:"path",vs:x0,fs:x0,uniformTypes:{widthScale:"f32",widthMinPixels:"f32",widthMaxPixels:"f32",jointType:"f32",capType:"f32",miterLimit:"f32",billboard:"f32",widthUnits:"i32"}},R2=`#version 300 es
#define SHADER_NAME path-layer-vertex-shader
in vec2 positions;
in float instanceTypes;
in vec3 instanceStartPositions;
in vec3 instanceEndPositions;
in vec3 instanceLeftPositions;
in vec3 instanceRightPositions;
in vec3 instanceLeftPositions64Low;
in vec3 instanceStartPositions64Low;
in vec3 instanceEndPositions64Low;
in vec3 instanceRightPositions64Low;
in float instanceStrokeWidths;
in vec4 instanceColors;
in vec3 instancePickingColors;
uniform float opacity;
out vec4 vColor;
out vec2 vCornerOffset;
out float vMiterLength;
out vec2 vPathPosition;
out float vPathLength;
out float vJointType;
const float EPSILON = 0.001;
const vec3 ZERO_OFFSET = vec3(0.0);
float flipIfTrue(bool flag) {
return -(float(flag) * 2. - 1.);
}
vec3 getLineJoinOffset(
vec3 prevPoint, vec3 currPoint, vec3 nextPoint,
vec2 width
) {
bool isEnd = positions.x > 0.0;
float sideOfPath = positions.y;
float isJoint = float(sideOfPath == 0.0);
vec3 deltaA3 = (currPoint - prevPoint);
vec3 deltaB3 = (nextPoint - currPoint);
mat3 rotationMatrix;
bool needsRotation = !path.billboard && project_needs_rotation(currPoint, rotationMatrix);
if (needsRotation) {
deltaA3 = deltaA3 * rotationMatrix;
deltaB3 = deltaB3 * rotationMatrix;
}
vec2 deltaA = deltaA3.xy / width;
vec2 deltaB = deltaB3.xy / width;
float lenA = length(deltaA);
float lenB = length(deltaB);
vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);
vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);
vec2 perpA = vec2(-dirA.y, dirA.x);
vec2 perpB = vec2(-dirB.y, dirB.x);
vec2 tangent = dirA + dirB;
tangent = length(tangent) > 0. ? normalize(tangent) : perpA;
vec2 miterVec = vec2(-tangent.y, tangent.x);
vec2 dir = isEnd ? dirA : dirB;
vec2 perp = isEnd ? perpA : perpB;
float L = isEnd ? lenA : lenB;
float sinHalfA = abs(dot(miterVec, perp));
float cosHalfA = abs(dot(dirA, miterVec));
float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);
float cornerPosition = sideOfPath * turnDirection;
float miterSize = 1.0 / max(sinHalfA, EPSILON);
miterSize = mix(
min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),
miterSize,
step(0.0, cornerPosition)
);
vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))
* (sideOfPath + isJoint * turnDirection);
bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));
bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));
bool isCap = isStartCap || isEndCap;
if (isCap) {
offsetVec = mix(perp * sideOfPath, dir * path.capType * 4.0 * flipIfTrue(isStartCap), isJoint);
vJointType = path.capType;
} else {
vJointType = path.jointType;
}
vPathLength = L;
vCornerOffset = offsetVec;
vMiterLength = dot(vCornerOffset, miterVec * turnDirection);
vMiterLength = isCap ? isJoint : vMiterLength;
vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);
vPathPosition = vec2(
dot(offsetFromStartOfPath, perp),
dot(offsetFromStartOfPath, dir)
);
geometry.uv = vPathPosition;
float isValid = step(instanceTypes, 3.5);
vec3 offset = vec3(offsetVec * width * isValid, 0.0);
if (needsRotation) {
offset = rotationMatrix * offset;
}
return offset;
}
void clipLine(inout vec4 position, vec4 refPosition) {
if (position.w < EPSILON) {
float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);
position = refPosition + (position - refPosition) * r;
}
}
void main() {
geometry.pickingColor = instancePickingColors;
vColor = vec4(instanceColors.rgb, instanceColors.a * layer.opacity);
float isEnd = positions.x;
vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);
vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);
vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);
vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);
vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);
vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);
geometry.worldPosition = currPosition;
vec2 widthPixels = vec2(clamp(
project_size_to_pixel(instanceStrokeWidths * path.widthScale, path.widthUnits),
path.widthMinPixels, path.widthMaxPixels) / 2.0);
vec3 width;
if (path.billboard) {
vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);
vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);
vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);
clipLine(prevPositionScreen, currPositionScreen);
clipLine(nextPositionScreen, currPositionScreen);
clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));
width = vec3(widthPixels, 0.0);
DECKGL_FILTER_SIZE(width, geometry);
vec3 offset = getLineJoinOffset(
prevPositionScreen.xyz / prevPositionScreen.w,
currPositionScreen.xyz / currPositionScreen.w,
nextPositionScreen.xyz / nextPositionScreen.w,
project_pixel_size_to_clipspace(width.xy)
);
DECKGL_FILTER_GL_POSITION(currPositionScreen, geometry);
gl_Position = vec4(currPositionScreen.xyz + offset * currPositionScreen.w, currPositionScreen.w);
} else {
prevPosition = project_position(prevPosition, prevPosition64Low);
currPosition = project_position(currPosition, currPosition64Low);
nextPosition = project_position(nextPosition, nextPosition64Low);
width = vec3(project_pixel_size(widthPixels), 0.0);
DECKGL_FILTER_SIZE(width, geometry);
vec3 offset = getLineJoinOffset(prevPosition, currPosition, nextPosition, width.xy);
geometry.position = vec4(currPosition + offset, 1.0);
gl_Position = project_common_position_to_clipspace(geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
}
DECKGL_FILTER_COLOR(vColor, geometry);
}
`,N2=`#version 300 es
#define SHADER_NAME path-layer-fragment-shader
precision highp float;
in vec4 vColor;
in vec2 vCornerOffset;
in float vMiterLength;
in vec2 vPathPosition;
in float vPathLength;
in float vJointType;
out vec4 fragColor;
void main(void) {
geometry.uv = vPathPosition;
if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {
if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {
discard;
}
if (vJointType < 0.5 && vMiterLength > path.miterLimit + 1.0) {
discard;
}
}
fragColor = vColor;
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,Vv=[0,0,0,255],z2={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:s=>s.path},getColor:{type:"accessor",value:Vv},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},Cd={enter:(s,t)=>t.length?t.subarray(t.length-s.length):s};class mh extends Ja{getShaders(){return super.getShaders({vs:R2,fs:N2,modules:[$a,tr,I2]})}get wrapLongitude(){return!1}getBounds(){return this.getAttributeManager()?.getBounds(["vertexPositions"])}initializeState(){this.getAttributeManager().addInstanced({vertexPositions:{size:3,vertexOffset:1,type:"float64",fp64:this.use64bitPositions(),transition:Cd,accessor:"getPath",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:"uint8",update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:Cd,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:"unorm8",accessor:"getColor",transition:Cd,defaultValue:Vv},instancePickingColors:{size:4,type:"uint8",accessor:(r,{index:o,target:c})=>this.encodePickingColor(r&&r.__source?r.__source.index:o,c)}}),this.setState({pathTesselator:new B2({fp64:this.use64bitPositions()})})}updateState(t){super.updateState(t);const{props:i,changeFlags:r}=t,o=this.getAttributeManager();if(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getPath)){const{pathTesselator:d}=this.state,h=i.data.attributes||{};d.updateGeometry({data:i.data,geometryBuffer:h.getPath,buffers:h,normalize:!i._pathType,loop:i._pathType==="loop",getGeometry:i.getPath,positionFormat:i.positionFormat,wrapLongitude:i.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:r.dataChanged}),this.setState({numInstances:d.instanceCount,startIndices:d.vertexStarts}),r.dataChanged||o.invalidateAll()}r.extensionsChanged&&(this.state.model?.destroy(),this.state.model=this._getModel(),o.invalidateAll())}getPickingInfo(t){const i=super.getPickingInfo(t),{index:r}=i,o=this.props.data;return o[0]&&o[0].__source&&(i.object=o.find(c=>c.__source.index===r)),i}disablePickingIndex(t){const i=this.props.data;if(i[0]&&i[0].__source)for(let r=0;r<i.length;r++)i[r].__source.index===t&&this._disablePickingIndex(r);else super.disablePickingIndex(t)}draw({uniforms:t}){const{jointRounded:i,capRounded:r,billboard:o,miterLimit:c,widthUnits:d,widthScale:h,widthMinPixels:y,widthMaxPixels:g}=this.props,v=this.state.model,b={jointType:Number(i),capType:Number(r),billboard:o,widthUnits:hl[d],widthScale:h,miterLimit:c,widthMinPixels:y,widthMaxPixels:g};v.shaderInputs.setProps({path:b}),v.draw(this.context.renderPass)}_getModel(){const t=[0,1,2,1,4,2,1,3,4,3,5,4],i=[0,0,0,-1,0,1,1,-1,1,1,1,0];return new ds(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new ka({topology:"triangle-list",attributes:{indices:new Uint16Array(t),positions:{value:new Float32Array(i),size:2}}}),isInstanced:!0})}calculatePositions(t){const{pathTesselator:i}=this.state;t.startIndices=i.vertexStarts,t.value=i.get("positions")}calculateSegmentTypes(t){const{pathTesselator:i}=this.state;t.startIndices=i.vertexStarts,t.value=i.get("segmentTypes")}}mh.defaultProps=z2;mh.layerName="PathLayer";var Qo={exports:{}},E0;function U2(){if(E0)return Qo.exports;E0=1,Qo.exports=s,Qo.exports.default=s;function s(_,x,T){T=T||2;var I=x&&x.length,R=I?x[0]*T:_.length,P=t(_,0,R,T,!0),z=[];if(!P||P.next===P.prev)return z;var G,k,X,Lt,It,At,re;if(I&&(P=y(_,x,P,T)),_.length>80*T){G=X=_[0],k=Lt=_[1];for(var zt=T;zt<R;zt+=T)It=_[zt],At=_[zt+1],It<G&&(G=It),At<k&&(k=At),It>X&&(X=It),At>Lt&&(Lt=At);re=Math.max(X-G,Lt-k),re=re!==0?32767/re:0}return r(P,z,T,G,k,re,0),z}function t(_,x,T,I,R){var P,z;if(R===Re(_,x,T,I)>0)for(P=x;P<T;P+=I)z=Ae(P,_[P],_[P+1],z);else for(P=T-I;P>=x;P-=I)z=Ae(P,_[P],_[P+1],z);return z&&Nt(z,z.next)&&(te(z),z=z.next),z}function i(_,x){if(!_)return _;x||(x=_);var T=_,I;do if(I=!1,!T.steiner&&(Nt(T,T.next)||Q(T.prev,T,T.next)===0)){if(te(T),T=x=T.prev,T===T.next)break;I=!0}else T=T.next;while(I||T!==x);return x}function r(_,x,T,I,R,P,z){if(_){!z&&P&&M(_,I,R,P);for(var G=_,k,X;_.prev!==_.next;){if(k=_.prev,X=_.next,P?c(_,I,R,P):o(_)){x.push(k.i/T|0),x.push(_.i/T|0),x.push(X.i/T|0),te(_),_=X.next,G=X.next;continue}if(_=X,_===G){z?z===1?(_=d(i(_),x,T),r(_,x,T,I,R,P,2)):z===2&&h(_,x,T,I,R,P):r(i(_),x,T,I,R,P,1);break}}}}function o(_){var x=_.prev,T=_,I=_.next;if(Q(x,T,I)>=0)return!1;for(var R=x.x,P=T.x,z=I.x,G=x.y,k=T.y,X=I.y,Lt=R<P?R<z?R:z:P<z?P:z,It=G<k?G<X?G:X:k<X?k:X,At=R>P?R>z?R:z:P>z?P:z,re=G>k?G>X?G:X:k>X?k:X,zt=I.next;zt!==x;){if(zt.x>=Lt&&zt.x<=At&&zt.y>=It&&zt.y<=re&&q(R,G,P,k,z,X,zt.x,zt.y)&&Q(zt.prev,zt,zt.next)>=0)return!1;zt=zt.next}return!0}function c(_,x,T,I){var R=_.prev,P=_,z=_.next;if(Q(R,P,z)>=0)return!1;for(var G=R.x,k=P.x,X=z.x,Lt=R.y,It=P.y,At=z.y,re=G<k?G<X?G:X:k<X?k:X,zt=Lt<It?Lt<At?Lt:At:It<At?It:At,Fi=G>k?G>X?G:X:k>X?k:X,sn=Lt>It?Lt>At?Lt:At:It>At?It:At,nr=j(re,zt,x,T,I),Pi=j(Fi,sn,x,T,I),wt=_.prevZ,Ot=_.nextZ;wt&&wt.z>=nr&&Ot&&Ot.z<=Pi;){if(wt.x>=re&&wt.x<=Fi&&wt.y>=zt&&wt.y<=sn&&wt!==R&&wt!==z&&q(G,Lt,k,It,X,At,wt.x,wt.y)&&Q(wt.prev,wt,wt.next)>=0||(wt=wt.prevZ,Ot.x>=re&&Ot.x<=Fi&&Ot.y>=zt&&Ot.y<=sn&&Ot!==R&&Ot!==z&&q(G,Lt,k,It,X,At,Ot.x,Ot.y)&&Q(Ot.prev,Ot,Ot.next)>=0))return!1;Ot=Ot.nextZ}for(;wt&&wt.z>=nr;){if(wt.x>=re&&wt.x<=Fi&&wt.y>=zt&&wt.y<=sn&&wt!==R&&wt!==z&&q(G,Lt,k,It,X,At,wt.x,wt.y)&&Q(wt.prev,wt,wt.next)>=0)return!1;wt=wt.prevZ}for(;Ot&&Ot.z<=Pi;){if(Ot.x>=re&&Ot.x<=Fi&&Ot.y>=zt&&Ot.y<=sn&&Ot!==R&&Ot!==z&&q(G,Lt,k,It,X,At,Ot.x,Ot.y)&&Q(Ot.prev,Ot,Ot.next)>=0)return!1;Ot=Ot.nextZ}return!0}function d(_,x,T){var I=_;do{var R=I.prev,P=I.next.next;!Nt(R,P)&&gt(R,I,I.next,P)&&Yt(R,P)&&Yt(P,R)&&(x.push(R.i/T|0),x.push(I.i/T|0),x.push(P.i/T|0),te(I),te(I.next),I=_=P),I=I.next}while(I!==_);return i(I)}function h(_,x,T,I,R,P){var z=_;do{for(var G=z.next.next;G!==z.prev;){if(z.i!==G.i&&dt(z,G)){var k=di(z,G);z=i(z,z.next),k=i(k,k.next),r(z,x,T,I,R,P,0),r(k,x,T,I,R,P,0);return}G=G.next}z=z.next}while(z!==_)}function y(_,x,T,I){var R=[],P,z,G,k,X;for(P=0,z=x.length;P<z;P++)G=x[P]*I,k=P<z-1?x[P+1]*I:_.length,X=t(_,G,k,I,!1),X===X.next&&(X.steiner=!0),R.push(H(X));for(R.sort(g),P=0;P<R.length;P++)T=v(R[P],T);return T}function g(_,x){return _.x-x.x}function v(_,x){var T=b(_,x);if(!T)return x;var I=di(T,_);return i(I,I.next),i(T,T.next)}function b(_,x){var T=x,I=_.x,R=_.y,P=-1/0,z;do{if(R<=T.y&&R>=T.next.y&&T.next.y!==T.y){var G=T.x+(R-T.y)*(T.next.x-T.x)/(T.next.y-T.y);if(G<=I&&G>P&&(P=G,z=T.x<T.next.x?T:T.next,G===I))return z}T=T.next}while(T!==x);if(!z)return null;var k=z,X=z.x,Lt=z.y,It=1/0,At;T=z;do I>=T.x&&T.x>=X&&I!==T.x&&q(R<Lt?I:P,R,X,Lt,R<Lt?P:I,R,T.x,T.y)&&(At=Math.abs(R-T.y)/(I-T.x),Yt(T,_)&&(At<It||At===It&&(T.x>z.x||T.x===z.x&&E(z,T)))&&(z=T,It=At)),T=T.next;while(T!==k);return z}function E(_,x){return Q(_.prev,_,x.prev)<0&&Q(x.next,_,_.next)<0}function M(_,x,T,I){var R=_;do R.z===0&&(R.z=j(R.x,R.y,x,T,I)),R.prevZ=R.prev,R.nextZ=R.next,R=R.next;while(R!==_);R.prevZ.nextZ=null,R.prevZ=null,V(R)}function V(_){var x,T,I,R,P,z,G,k,X=1;do{for(T=_,_=null,P=null,z=0;T;){for(z++,I=T,G=0,x=0;x<X&&(G++,I=I.nextZ,!!I);x++);for(k=X;G>0||k>0&&I;)G!==0&&(k===0||!I||T.z<=I.z)?(R=T,T=T.nextZ,G--):(R=I,I=I.nextZ,k--),P?P.nextZ=R:_=R,R.prevZ=P,P=R;T=I}P.nextZ=null,X*=2}while(z>1);return _}function j(_,x,T,I,R){return _=(_-T)*R|0,x=(x-I)*R|0,_=(_|_<<8)&16711935,_=(_|_<<4)&252645135,_=(_|_<<2)&858993459,_=(_|_<<1)&1431655765,x=(x|x<<8)&16711935,x=(x|x<<4)&252645135,x=(x|x<<2)&858993459,x=(x|x<<1)&1431655765,_|x<<1}function H(_){var x=_,T=_;do(x.x<T.x||x.x===T.x&&x.y<T.y)&&(T=x),x=x.next;while(x!==_);return T}function q(_,x,T,I,R,P,z,G){return(R-z)*(x-G)>=(_-z)*(P-G)&&(_-z)*(I-G)>=(T-z)*(x-G)&&(T-z)*(P-G)>=(R-z)*(I-G)}function dt(_,x){return _.next.i!==x.i&&_.prev.i!==x.i&&!se(_,x)&&(Yt(_,x)&&Yt(x,_)&&ce(_,x)&&(Q(_.prev,_,x.prev)||Q(_,x.prev,x))||Nt(_,x)&&Q(_.prev,_,_.next)>0&&Q(x.prev,x,x.next)>0)}function Q(_,x,T){return(x.y-_.y)*(T.x-x.x)-(x.x-_.x)*(T.y-x.y)}function Nt(_,x){return _.x===x.x&&_.y===x.y}function gt(_,x,T,I){var R=Jt(Q(_,x,T)),P=Jt(Q(_,x,I)),z=Jt(Q(T,I,_)),G=Jt(Q(T,I,x));return!!(R!==P&&z!==G||R===0&&ht(_,T,x)||P===0&&ht(_,I,x)||z===0&&ht(T,_,I)||G===0&&ht(T,x,I))}function ht(_,x,T){return x.x<=Math.max(_.x,T.x)&&x.x>=Math.min(_.x,T.x)&&x.y<=Math.max(_.y,T.y)&&x.y>=Math.min(_.y,T.y)}function Jt(_){return _>0?1:_<0?-1:0}function se(_,x){var T=_;do{if(T.i!==_.i&&T.next.i!==_.i&&T.i!==x.i&&T.next.i!==x.i&&gt(T,T.next,_,x))return!0;T=T.next}while(T!==_);return!1}function Yt(_,x){return Q(_.prev,_,_.next)<0?Q(_,x,_.next)>=0&&Q(_,_.prev,x)>=0:Q(_,x,_.prev)<0||Q(_,_.next,x)<0}function ce(_,x){var T=_,I=!1,R=(_.x+x.x)/2,P=(_.y+x.y)/2;do T.y>P!=T.next.y>P&&T.next.y!==T.y&&R<(T.next.x-T.x)*(P-T.y)/(T.next.y-T.y)+T.x&&(I=!I),T=T.next;while(T!==_);return I}function di(_,x){var T=new kt(_.i,_.x,_.y),I=new kt(x.i,x.x,x.y),R=_.next,P=x.prev;return _.next=x,x.prev=_,T.next=R,R.prev=T,I.next=T,T.prev=I,P.next=I,I.prev=P,I}function Ae(_,x,T,I){var R=new kt(_,x,T);return I?(R.next=I.next,R.prev=I,I.next.prev=R,I.next=R):(R.prev=R,R.next=R),R}function te(_){_.next.prev=_.prev,_.prev.next=_.next,_.prevZ&&(_.prevZ.nextZ=_.nextZ),_.nextZ&&(_.nextZ.prevZ=_.prevZ)}function kt(_,x,T){this.i=_,this.x=x,this.y=T,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}s.deviation=function(_,x,T,I){var R=x&&x.length,P=R?x[0]*T:_.length,z=Math.abs(Re(_,0,P,T));if(R)for(var G=0,k=x.length;G<k;G++){var X=x[G]*T,Lt=G<k-1?x[G+1]*T:_.length;z-=Math.abs(Re(_,X,Lt,T))}var It=0;for(G=0;G<I.length;G+=3){var At=I[G]*T,re=I[G+1]*T,zt=I[G+2]*T;It+=Math.abs((_[At]-_[zt])*(_[re+1]-_[At+1])-(_[At]-_[re])*(_[zt+1]-_[At+1]))}return z===0&&It===0?0:Math.abs((It-z)/z)};function Re(_,x,T,I){for(var R=0,P=x,z=T-I;P<T;P+=I)R+=(_[z]-_[P])*(_[P+1]+_[z+1]),z=P;return R}return s.flatten=function(_){for(var x=_[0][0].length,T={vertices:[],holes:[],dimensions:x},I=0,R=0;R<_.length;R++){for(var P=0;P<_[R].length;P++)for(var z=0;z<x;z++)T.vertices.push(_[R][P][z]);R>0&&(I+=_[R-1].length,T.holes.push(I))}return T},Qo.exports}var F2=U2();const P2=Lv(F2),Zo=Iv.CLOCKWISE,w0=Iv.COUNTER_CLOCKWISE,fs={};function V2(s){if(s=s&&s.positions||s,!Array.isArray(s)&&!ArrayBuffer.isView(s))throw new Error("invalid polygon")}function el(s){return"positions"in s?s.positions:s}function rc(s){return"holeIndices"in s?s.holeIndices:null}function j2(s){return Array.isArray(s[0])}function G2(s){return s.length>=1&&s[0].length>=2&&Number.isFinite(s[0][0])}function H2(s){const t=s[0],i=s[s.length-1];return t[0]===i[0]&&t[1]===i[1]&&t[2]===i[2]}function q2(s,t,i,r){for(let o=0;o<t;o++)if(s[i+o]!==s[r-t+o])return!1;return!0}function O0(s,t,i,r,o){let c=t;const d=i.length;for(let h=0;h<d;h++)for(let y=0;y<r;y++)s[c++]=i[h][y]||0;if(!H2(i))for(let h=0;h<r;h++)s[c++]=i[0][h]||0;return fs.start=t,fs.end=c,fs.size=r,Rv(s,o,fs),c}function M0(s,t,i,r,o=0,c,d){c=c||i.length;const h=c-o;if(h<=0)return t;let y=t;for(let g=0;g<h;g++)s[y++]=i[o+g];if(!q2(i,r,o,c))for(let g=0;g<r;g++)s[y++]=i[o+g];return fs.start=t,fs.end=y,fs.size=r,Rv(s,d,fs),y}function Y2(s,t){V2(s);const i=[],r=[];if("positions"in s){const{positions:o,holeIndices:c}=s;if(c){let d=0;for(let h=0;h<=c.length;h++)d=M0(i,d,o,t,c[h-1],c[h],h===0?Zo:w0),r.push(d);return r.pop(),{positions:i,holeIndices:r}}s=o}if(!j2(s))return M0(i,0,s,t,0,i.length,Zo),i;if(!G2(s)){let o=0;for(const[c,d]of s.entries())o=O0(i,o,d,t,c===0?Zo:w0),r.push(o);return r.pop(),{positions:i,holeIndices:r}}return O0(i,0,s,t,Zo),i}function Dd(s,t,i){const r=s.length/3;let o=0;for(let c=0;c<r;c++){const d=(c+1)%r;o+=s[c*3+t]*s[d*3+i],o-=s[d*3+t]*s[c*3+i]}return Math.abs(o/2)}function L0(s,t,i,r){const o=s.length/3;for(let c=0;c<o;c++){const d=c*3,h=s[d+0],y=s[d+1],g=s[d+2];s[d+t]=h,s[d+i]=y,s[d+r]=g}}function k2(s,t,i,r){let o=rc(s);o&&(o=o.map(h=>h/t));let c=el(s);const d=r&&t===3;if(i){const h=c.length;c=c.slice();const y=[];for(let g=0;g<h;g+=t){y[0]=c[g],y[1]=c[g+1],d&&(y[2]=c[g+2]);const v=i(y);c[g]=v[0],c[g+1]=v[1],d&&(c[g+2]=v[2])}}if(d){const h=Dd(c,0,1),y=Dd(c,0,2),g=Dd(c,1,2);if(!h&&!y&&!g)return[];h>y&&h>g||(y>g?(i||(c=c.slice()),L0(c,0,2,1)):(i||(c=c.slice()),L0(c,2,0,1)))}return P2(c,o,t)}class Q2 extends Dv{constructor(t){const{fp64:i,IndexType:r=Uint32Array}=t;super({...t,attributes:{positions:{size:3,type:i?Float64Array:Float32Array},vertexValid:{type:Uint16Array,size:1},indices:{type:r,size:1}}})}get(t){const{attributes:i}=this;return t==="indices"?i.indices&&i.indices.subarray(0,this.vertexCount):i[t]}updateGeometry(t){super.updateGeometry(t);const i=this.buffers.indices;if(i)this.vertexCount=(i.value||i).length;else if(this.data&&!this.getGeometry)throw new Error("missing indices buffer")}normalizeGeometry(t){if(this.normalize){const i=Y2(t,this.positionSize);return this.opts.resolution?zv(el(i),rc(i),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?w2(el(i),rc(i),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):i}return t}getGeometrySize(t){if(C0(t)){let i=0;for(const r of t)i+=this.getGeometrySize(r);return i}return el(t).length/this.positionSize}getGeometryFromBuffer(t){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(t):null}updateGeometryAttributes(t,i){if(t&&C0(t))for(const r of t){const o=this.getGeometrySize(r);i.geometrySize=o,this.updateGeometryAttributes(r,i),i.vertexStart+=o,i.indexStart=this.indexStarts[i.geometryIndex+1]}else{const r=t;this._updateIndices(r,i),this._updatePositions(r,i),this._updateVertexValid(r,i)}}_updateIndices(t,{geometryIndex:i,vertexStart:r,indexStart:o}){const{attributes:c,indexStarts:d,typedArrayManager:h}=this;let y=c.indices;if(!y||!t)return;let g=o;const v=k2(t,this.positionSize,this.opts.preproject,this.opts.full3d);y=h.allocate(y,o+v.length,{copy:!0});for(let b=0;b<v.length;b++)y[g++]=v[b]+r;d[i+1]=o+v.length,c.indices=y}_updatePositions(t,{vertexStart:i,geometrySize:r}){const{attributes:{positions:o},positionSize:c}=this;if(!o||!t)return;const d=el(t);for(let h=i,y=0;y<r;h++,y++){const g=d[y*c],v=d[y*c+1],b=c>2?d[y*c+2]:0;o[h*3]=g,o[h*3+1]=v,o[h*3+2]=b}}_updateVertexValid(t,{vertexStart:i,geometrySize:r}){const{positionSize:o}=this,c=this.attributes.vertexValid,d=t&&rc(t);if(t&&t.edgeTypes?c.set(t.edgeTypes,i):c.fill(1,i,i+r),d)for(let h=0;h<d.length;h++)c[i+d[h]/o-1]=0;c[i+r-1]=0}}function C0(s){return Array.isArray(s)&&s.length>0&&!Number.isFinite(s[0])}const D0=`uniform solidPolygonUniforms {
  bool extruded;
  bool isWireframe;
  float elevationScale;
} solidPolygon;
`,Z2={name:"solidPolygon",vs:D0,fs:D0,uniformTypes:{extruded:"f32",isWireframe:"f32",elevationScale:"f32"}},jv=`in vec4 fillColors;
in vec4 lineColors;
in vec3 pickingColors;
out vec4 vColor;
struct PolygonProps {
vec3 positions;
vec3 positions64Low;
vec3 normal;
float elevations;
};
vec3 project_offset_normal(vec3 vector) {
if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {
return normalize(vector * project.commonUnitsPerWorldUnit);
}
return project_normal(vector);
}
void calculatePosition(PolygonProps props) {
vec3 pos = props.positions;
vec3 pos64Low = props.positions64Low;
vec3 normal = props.normal;
vec4 colors = solidPolygon.isWireframe ? lineColors : fillColors;
geometry.worldPosition = props.positions;
geometry.pickingColor = pickingColors;
if (solidPolygon.extruded) {
pos.z += props.elevations * solidPolygon.elevationScale;
}
gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
if (solidPolygon.extruded) {
#ifdef IS_SIDE_VERTEX
normal = project_offset_normal(normal);
#else
normal = project_normal(normal);
#endif
geometry.normal = normal;
vec3 lightColor = lighting_getLightColor(colors.rgb, project.cameraPosition, geometry.position.xyz, geometry.normal);
vColor = vec4(lightColor, colors.a * layer.opacity);
} else {
vColor = vec4(colors.rgb, colors.a * layer.opacity);
}
DECKGL_FILTER_COLOR(vColor, geometry);
}
`,X2=`#version 300 es
#define SHADER_NAME solid-polygon-layer-vertex-shader
in vec3 vertexPositions;
in vec3 vertexPositions64Low;
in float elevations;
${jv}
void main(void) {
PolygonProps props;
props.positions = vertexPositions;
props.positions64Low = vertexPositions64Low;
props.elevations = elevations;
props.normal = vec3(0.0, 0.0, 1.0);
calculatePosition(props);
}
`,K2=`#version 300 es
#define SHADER_NAME solid-polygon-layer-vertex-shader-side
#define IS_SIDE_VERTEX
in vec2 positions;
in vec3 vertexPositions;
in vec3 nextVertexPositions;
in vec3 vertexPositions64Low;
in vec3 nextVertexPositions64Low;
in float elevations;
in float instanceVertexValid;
${jv}
void main(void) {
if(instanceVertexValid < 0.5){
gl_Position = vec4(0.);
return;
}
PolygonProps props;
vec3 pos;
vec3 pos64Low;
vec3 nextPos;
vec3 nextPos64Low;
#if RING_WINDING_ORDER_CW == 1
pos = vertexPositions;
pos64Low = vertexPositions64Low;
nextPos = nextVertexPositions;
nextPos64Low = nextVertexPositions64Low;
#else
pos = nextVertexPositions;
pos64Low = nextVertexPositions64Low;
nextPos = vertexPositions;
nextPos64Low = vertexPositions64Low;
#endif
props.positions = mix(pos, nextPos, positions.x);
props.positions64Low = mix(pos64Low, nextPos64Low, positions.x);
props.normal = vec3(
pos.y - nextPos.y + (pos64Low.y - nextPos64Low.y),
nextPos.x - pos.x + (nextPos64Low.x - pos64Low.x),
0.0);
props.elevations = elevations * positions.y;
calculatePosition(props);
}
`,W2=`#version 300 es
#define SHADER_NAME solid-polygon-layer-fragment-shader
precision highp float;
in vec4 vColor;
out vec4 fragColor;
void main(void) {
fragColor = vColor;
geometry.uv = vec2(0.);
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,Sc=[0,0,0,255],J2={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",_full3d:!1,elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:s=>s.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:Sc},getLineColor:{type:"accessor",value:Sc},material:!0},Xo={enter:(s,t)=>t.length?t.subarray(t.length-s.length):s};class vh extends Ja{getShaders(t){return super.getShaders({vs:t==="top"?X2:K2,fs:W2,defines:{RING_WINDING_ORDER_CW:!this.props._normalize&&this.props._windingOrder==="CCW"?0:1},modules:[$a,MT,tr,Z2]})}get wrapLongitude(){return!1}getBounds(){return this.getAttributeManager()?.getBounds(["vertexPositions"])}initializeState(){const{viewport:t}=this.context;let{coordinateSystem:i}=this.props;const{_full3d:r}=this.props;t.isGeospatial&&i===ul.DEFAULT&&(i=ul.LNGLAT);let o;i===ul.LNGLAT&&(r?o=t.projectPosition.bind(t):o=t.projectFlat.bind(t)),this.setState({numInstances:0,polygonTesselator:new Q2({preproject:o,fp64:this.use64bitPositions(),IndexType:Uint32Array})});const c=this.getAttributeManager(),d=!0;c.remove(["instancePickingColors"]),c.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:d},vertexPositions:{size:3,type:"float64",stepMode:"dynamic",fp64:this.use64bitPositions(),transition:Xo,accessor:"getPolygon",update:this.calculatePositions,noAlloc:d,shaderAttributes:{nextVertexPositions:{vertexOffset:1}}},instanceVertexValid:{size:1,type:"uint16",stepMode:"instance",update:this.calculateVertexValid,noAlloc:d},elevations:{size:1,stepMode:"dynamic",transition:Xo,accessor:"getElevation"},fillColors:{size:this.props.colorFormat.length,type:"unorm8",stepMode:"dynamic",transition:Xo,accessor:"getFillColor",defaultValue:Sc},lineColors:{size:this.props.colorFormat.length,type:"unorm8",stepMode:"dynamic",transition:Xo,accessor:"getLineColor",defaultValue:Sc},pickingColors:{size:4,type:"uint8",stepMode:"dynamic",accessor:(h,{index:y,target:g})=>this.encodePickingColor(h&&h.__source?h.__source.index:y,g)}})}getPickingInfo(t){const i=super.getPickingInfo(t),{index:r}=i,o=this.props.data;return o[0]&&o[0].__source&&(i.object=o.find(c=>c.__source.index===r)),i}disablePickingIndex(t){const i=this.props.data;if(i[0]&&i[0].__source)for(let r=0;r<i.length;r++)i[r].__source.index===t&&this._disablePickingIndex(r);else super.disablePickingIndex(t)}draw({uniforms:t}){const{extruded:i,filled:r,wireframe:o,elevationScale:c}=this.props,{topModel:d,sideModel:h,wireframeModel:y,polygonTesselator:g}=this.state,v={extruded:!!i,elevationScale:c,isWireframe:!1};y&&o&&(y.setInstanceCount(g.instanceCount-1),y.shaderInputs.setProps({solidPolygon:{...v,isWireframe:!0}}),y.draw(this.context.renderPass)),h&&r&&(h.setInstanceCount(g.instanceCount-1),h.shaderInputs.setProps({solidPolygon:v}),h.draw(this.context.renderPass)),d&&r&&(d.setVertexCount(g.vertexCount),d.shaderInputs.setProps({solidPolygon:v}),d.draw(this.context.renderPass))}updateState(t){super.updateState(t),this.updateGeometry(t);const{props:i,oldProps:r,changeFlags:o}=t,c=this.getAttributeManager();(o.extensionsChanged||i.filled!==r.filled||i.extruded!==r.extruded)&&(this.state.models?.forEach(h=>h.destroy()),this.setState(this._getModels()),c.invalidateAll())}updateGeometry({props:t,oldProps:i,changeFlags:r}){if(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getPolygon)){const{polygonTesselator:c}=this.state,d=t.data.attributes||{};c.updateGeometry({data:t.data,normalize:t._normalize,geometryBuffer:d.getPolygon,buffers:d,getGeometry:t.getPolygon,positionFormat:t.positionFormat,wrapLongitude:t.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:r.dataChanged,full3d:t._full3d}),this.setState({numInstances:c.instanceCount,startIndices:c.vertexStarts}),r.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(){const{id:t,filled:i,extruded:r}=this.props;let o,c,d;if(i){const h=this.getShaders("top");h.defines.NON_INSTANCED_MODEL=1;const y=this.getAttributeManager().getBufferLayouts({isInstanced:!1});o=new ds(this.context.device,{...h,id:`${t}-top`,topology:"triangle-list",bufferLayout:y,isIndexed:!0,userData:{excludeAttributes:{instanceVertexValid:!0}}})}if(r){const h=this.getAttributeManager().getBufferLayouts({isInstanced:!0});c=new ds(this.context.device,{...this.getShaders("side"),id:`${t}-side`,bufferLayout:h,geometry:new ka({topology:"triangle-strip",attributes:{positions:{size:2,value:new Float32Array([1,0,0,0,1,1,0,1])}}}),isInstanced:!0,userData:{excludeAttributes:{indices:!0}}}),d=new ds(this.context.device,{...this.getShaders("side"),id:`${t}-wireframe`,bufferLayout:h,geometry:new ka({topology:"line-strip",attributes:{positions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),isInstanced:!0,userData:{excludeAttributes:{indices:!0}}})}return{models:[c,d,o].filter(Boolean),topModel:o,sideModel:c,wireframeModel:d}}calculateIndices(t){const{polygonTesselator:i}=this.state;t.startIndices=i.indexStarts,t.value=i.get("indices")}calculatePositions(t){const{polygonTesselator:i}=this.state;t.startIndices=i.vertexStarts,t.value=i.get("positions")}calculateVertexValid(t){t.value=this.state.polygonTesselator.get("vertexValid")}}vh.defaultProps=J2;vh.layerName="SolidPolygonLayer";function $2({data:s,getIndex:t,dataRange:i,replace:r}){const{startRow:o=0,endRow:c=1/0}=i,d=s.length;let h=d,y=d;for(let E=0;E<d;E++){const M=t(s[E]);if(h>E&&M>=o&&(h=E),M>=c){y=E;break}}let g=h;const b=y-h!==r.length?s.slice(y):void 0;for(let E=0;E<r.length;E++)s[g++]=r[E];if(b){for(let E=0;E<b.length;E++)s[g++]=b[E];s.length=g}return{startRow:h,endRow:h+r.length}}function tA(s,t){if(!s)return null;const i="startIndices"in s?s.startIndices[t]:t,r=s.featureIds.value[i];return i!==-1?eA(s,r,i):null}function eA(s,t,i){const r={properties:{...s.properties[t]}};for(const o in s.numericProps)r.properties[o]=s.numericProps[o].value[i];return r}function iA(s,t){const i={points:null,lines:null,polygons:null};for(const r in i){const o=s[r].globalFeatureIds.value;i[r]=new Uint8ClampedArray(o.length*4);const c=[];for(let d=0;d<o.length;d++)t(o[d],c),i[r][d*4+0]=c[0],i[r][d*4+1]=c[1],i[r][d*4+2]=c[2],i[r][d*4+3]=255}return i}const B0=`uniform sdfUniforms {
  float gamma;
  bool enabled;
  float buffer;
  float outlineBuffer;
  vec4 outlineColor;
} sdf;
`,nA={name:"sdf",vs:B0,fs:B0,uniformTypes:{gamma:"f32",enabled:"f32",buffer:"f32",outlineBuffer:"f32",outlineColor:"vec4<f32>"}},sA=`#version 300 es
#define SHADER_NAME multi-icon-layer-fragment-shader
precision highp float;
uniform sampler2D iconsTexture;
in vec4 vColor;
in vec2 vTextureCoords;
in vec2 uv;
out vec4 fragColor;
void main(void) {
geometry.uv = uv;
if (!bool(picking.isActive)) {
float alpha = texture(iconsTexture, vTextureCoords).a;
vec4 color = vColor;
if (sdf.enabled) {
float distance = alpha;
alpha = smoothstep(sdf.buffer - sdf.gamma, sdf.buffer + sdf.gamma, distance);
if (sdf.outlineBuffer > 0.0) {
float inFill = alpha;
float inBorder = smoothstep(sdf.outlineBuffer - sdf.gamma, sdf.outlineBuffer + sdf.gamma, distance);
color = mix(sdf.outlineColor, vColor, inFill);
alpha = inBorder;
}
}
float a = alpha * color.a;
if (a < icon.alphaCutoff) {
discard;
}
fragColor = vec4(color.rgb, a * layer.opacity);
}
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,Bd=192/256,I0=[],aA={getIconOffsets:{type:"accessor",value:s=>s.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}};class _h extends tu{getShaders(){const t=super.getShaders();return{...t,modules:[...t.modules,nA],fs:sA}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:"uint8",size:3,accessor:(i,{index:r,target:o})=>this.encodePickingColor(r,o)}})}updateState(t){super.updateState(t);const{props:i,oldProps:r}=t;let{outlineColor:o}=i;o!==r.outlineColor&&(o=o.map(c=>c/255),o[3]=Number.isFinite(o[3])?o[3]:1,this.setState({outlineColor:o})),!i.sdf&&i.outlineWidth&&$i.warn(`${this.id}: fontSettings.sdf is required to render outline`)()}draw(t){const{sdf:i,smoothing:r,outlineWidth:o}=this.props,{outlineColor:c}=this.state,d=o?Math.max(r,Bd*(1-o)):-1,h=this.state.model,y={buffer:Bd,outlineBuffer:d,gamma:r,enabled:!!i,outlineColor:c};if(h.shaderInputs.setProps({sdf:y}),super.draw(t),i&&o){const{iconManager:g}=this.state;g.getTexture()&&(h.shaderInputs.setProps({sdf:{...y,outlineBuffer:Bd}}),h.draw(this.context.renderPass))}}getInstanceOffset(t){return t?Array.from(t).flatMap(i=>super.getInstanceOffset(i)):I0}getInstanceColorMode(t){return 1}getInstanceIconFrame(t){return t?Array.from(t).flatMap(i=>super.getInstanceIconFrame(i)):I0}}_h.defaultProps=aA;_h.layerName="MultiIconLayer";const fl=1e20;class rA{constructor({fontSize:t=24,buffer:i=3,radius:r=8,cutoff:o=.25,fontFamily:c="sans-serif",fontWeight:d="normal",fontStyle:h="normal",lang:y=null}={}){this.buffer=i,this.cutoff=o,this.radius=r,this.lang=y;const g=this.size=t+i*4,v=this._createCanvas(g),b=this.ctx=v.getContext("2d",{willReadFrequently:!0});b.font=`${h} ${d} ${t}px ${c}`,b.textBaseline="alphabetic",b.textAlign="left",b.fillStyle="black",this.gridOuter=new Float64Array(g*g),this.gridInner=new Float64Array(g*g),this.f=new Float64Array(g),this.z=new Float64Array(g+1),this.v=new Uint16Array(g)}_createCanvas(t){const i=document.createElement("canvas");return i.width=i.height=t,i}draw(t){const{width:i,actualBoundingBoxAscent:r,actualBoundingBoxDescent:o,actualBoundingBoxLeft:c,actualBoundingBoxRight:d}=this.ctx.measureText(t),h=Math.ceil(r),y=0,g=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(d-c))),v=Math.min(this.size-this.buffer,h+Math.ceil(o)),b=g+2*this.buffer,E=v+2*this.buffer,M=Math.max(b*E,0),V=new Uint8ClampedArray(M),j={data:V,width:b,height:E,glyphWidth:g,glyphHeight:v,glyphTop:h,glyphLeft:y,glyphAdvance:i};if(g===0||v===0)return j;const{ctx:H,buffer:q,gridInner:dt,gridOuter:Q}=this;this.lang&&(H.lang=this.lang),H.clearRect(q,q,g,v),H.fillText(t,q,q+h);const Nt=H.getImageData(q,q,g,v);Q.fill(fl,0,M),dt.fill(0,0,M);for(let gt=0;gt<v;gt++)for(let ht=0;ht<g;ht++){const Jt=Nt.data[4*(gt*g+ht)+3]/255;if(Jt===0)continue;const se=(gt+q)*b+ht+q;if(Jt===1)Q[se]=0,dt[se]=fl;else{const Yt=.5-Jt;Q[se]=Yt>0?Yt*Yt:0,dt[se]=Yt<0?Yt*Yt:0}}R0(Q,0,0,b,E,b,this.f,this.v,this.z),R0(dt,q,q,g,v,b,this.f,this.v,this.z);for(let gt=0;gt<M;gt++){const ht=Math.sqrt(Q[gt])-Math.sqrt(dt[gt]);V[gt]=Math.round(255-255*(ht/this.radius+this.cutoff))}return j}}function R0(s,t,i,r,o,c,d,h,y){for(let g=t;g<t+r;g++)N0(s,i*c+g,c,o,d,h,y);for(let g=i;g<i+o;g++)N0(s,g*c+t,1,r,d,h,y)}function N0(s,t,i,r,o,c,d){c[0]=0,d[0]=-fl,d[1]=fl,o[0]=s[t];for(let h=1,y=0,g=0;h<r;h++){o[h]=s[t+h*i];const v=h*h;do{const b=c[y];g=(o[h]-o[b]+v-b*b)/(h-b)/2}while(g<=d[y]&&--y>-1);y++,c[y]=h,d[y]=g,d[y+1]=fl}for(let h=0,y=0;h<r;h++){for(;d[y+1]<h;)y++;const g=c[y],v=h-g;s[t+h*i]=o[g]+v*v}}const lA=32,oA=[];function cA(s){return Math.pow(2,Math.ceil(Math.log2(s)))}function uA({characterSet:s,getFontWidth:t,fontHeight:i,buffer:r,maxCanvasWidth:o,mapping:c={},xOffset:d=0,yOffset:h=0}){let y=0,g=d;const v=i+r*2;for(const b of s)if(!c[b]){const E=t(b);g+E+r*2>o&&(g=0,y++),c[b]={x:g+r,y:h+y*v+r,width:E,height:v,layoutWidth:E,layoutHeight:i},g+=E+r*2}return{mapping:c,xOffset:g,yOffset:h+y*v,canvasHeight:cA(h+(y+1)*v)}}function Gv(s,t,i,r){let o=0;for(let c=t;c<i;c++){const d=s[c];o+=r[d]?.layoutWidth||0}return o}function Hv(s,t,i,r,o,c){let d=t,h=0;for(let y=t;y<i;y++){const g=Gv(s,y,y+1,o);h+g>r&&(d<y&&c.push(y),d=y,h=0),h+=g}return h}function fA(s,t,i,r,o,c){let d=t,h=t,y=t,g=0;for(let v=t;v<i;v++)if((s[v]===" "||s[v+1]===" "||v+1===i)&&(y=v+1),y>h){let b=Gv(s,h,y,o);g+b>r&&(d<h&&(c.push(h),d=h,g=0),b>r&&(b=Hv(s,h,y,r,o,c),d=c[c.length-1])),h=y,g+=b}return g}function dA(s,t,i,r,o=0,c){c===void 0&&(c=s.length);const d=[];return t==="break-all"?Hv(s,o,c,i,r,d):fA(s,o,c,i,r,d),d}function hA(s,t,i,r,o,c){let d=0,h=0;for(let y=t;y<i;y++){const g=s[y],v=r[g];v?(h||(h=v.layoutHeight),o[y]=d+v.layoutWidth/2,d+=v.layoutWidth):($i.warn(`Missing character: ${g} (${g.codePointAt(0)})`)(),o[y]=d,d+=lA)}c[0]=d,c[1]=h}function yA(s,t,i,r,o){const c=Array.from(s),d=c.length,h=new Array(d),y=new Array(d),g=new Array(d),v=(i==="break-word"||i==="break-all")&&isFinite(r)&&r>0,b=[0,0],E=[0,0];let M=0,V=0,j=0;for(let H=0;H<=d;H++){const q=c[H];if((q===`
`||H===d)&&(j=H),j>V){const dt=v?dA(c,i,r,o,V,j):oA;for(let Q=0;Q<=dt.length;Q++){const Nt=Q===0?V:dt[Q-1],gt=Q<dt.length?dt[Q]:j;hA(c,Nt,gt,o,h,E);for(let ht=Nt;ht<gt;ht++){const Jt=c[ht],se=o[Jt]?.layoutOffsetY||0;y[ht]=M+E[1]/2+se,g[ht]=E[0]}M=M+E[1]*t,b[0]=Math.max(b[0],E[0])}V=j}q===`
`&&(h[V]=0,y[V]=0,g[V]=0,V++)}return b[1]=M,{x:h,y,rowWidth:g,size:b}}function pA({value:s,length:t,stride:i,offset:r,startIndices:o,characterSet:c}){const d=s.BYTES_PER_ELEMENT,h=i?i/d:1,y=r?r/d:0,g=o[t]||Math.ceil((s.length-y)/h),v=c&&new Set,b=new Array(t);let E=s;if(h>1||y>0){const M=s.constructor;E=new M(g);for(let V=0;V<g;V++)E[V]=s[V*h+y]}for(let M=0;M<t;M++){const V=o[M],j=o[M+1]||g,H=E.subarray(V,j);b[M]=String.fromCodePoint.apply(null,H),v&&H.forEach(v.add,v)}if(v)for(const M of v)c.add(String.fromCodePoint(M));return{texts:b,characterCount:g}}class qv{constructor(t=5){this._cache={},this._order=[],this.limit=t}get(t){const i=this._cache[t];return i&&(this._deleteOrder(t),this._appendOrder(t)),i}set(t,i){this._cache[t]?(this.delete(t),this._cache[t]=i,this._appendOrder(t)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[t]=i,this._appendOrder(t))}delete(t){this._cache[t]&&(delete this._cache[t],this._deleteOrder(t))}_deleteOrder(t){const i=this._order.indexOf(t);i>=0&&this._order.splice(i,1)}_appendOrder(t){this._order.push(t)}}function gA(){const s=[];for(let t=32;t<128;t++)s.push(String.fromCharCode(t));return s}const ja={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:gA(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1},z0=1024,U0=.9,F0=1.2,Yv=3;let Tc=new qv(Yv);function mA(s,t){let i;typeof t=="string"?i=new Set(Array.from(t)):i=new Set(t);const r=Tc.get(s);if(!r)return i;for(const o in r.mapping)i.has(o)&&i.delete(o);return i}function vA(s,t){for(let i=0;i<s.length;i++)t.data[4*i+3]=s[i]}function P0(s,t,i,r){s.font=`${r} ${i}px ${t}`,s.fillStyle="#000",s.textBaseline="alphabetic",s.textAlign="left"}function _A(s){$i.assert(Number.isFinite(s)&&s>=Yv,"Invalid cache limit"),Tc=new qv(s)}class bA{constructor(){this.props={...ja}}get atlas(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){const{fontSize:t,buffer:i}=this.props;return(t*F0+i*2)/t}setProps(t={}){Object.assign(this.props,t),this._key=this._getKey();const i=mA(this._key,this.props.characterSet),r=Tc.get(this._key);if(r&&i.size===0){this._atlas!==r&&(this._atlas=r);return}const o=this._generateFontAtlas(i,r);this._atlas=o,Tc.set(this._key,o)}_generateFontAtlas(t,i){const{fontFamily:r,fontWeight:o,fontSize:c,buffer:d,sdf:h,radius:y,cutoff:g}=this.props;let v=i&&i.data;v||(v=document.createElement("canvas"),v.width=z0);const b=v.getContext("2d",{willReadFrequently:!0});P0(b,r,c,o);const{mapping:E,canvasHeight:M,xOffset:V,yOffset:j}=uA({getFontWidth:H=>b.measureText(H).width,fontHeight:c*F0,buffer:d,characterSet:t,maxCanvasWidth:z0,...i&&{mapping:i.mapping,xOffset:i.xOffset,yOffset:i.yOffset}});if(v.height!==M){const H=b.getImageData(0,0,v.width,v.height);v.height=M,b.putImageData(H,0,0)}if(P0(b,r,c,o),h){const H=new rA({fontSize:c,buffer:d,radius:y,cutoff:g,fontFamily:r,fontWeight:`${o}`});for(const q of t){const{data:dt,width:Q,height:Nt,glyphTop:gt}=H.draw(q);E[q].width=Q,E[q].layoutOffsetY=c*U0-gt;const ht=b.createImageData(Q,Nt);vA(dt,ht),b.putImageData(ht,E[q].x,E[q].y)}}else for(const H of t)b.fillText(H,E[H].x,E[H].y+d+c*U0);return{xOffset:V,yOffset:j,mapping:E,data:v,width:v.width,height:v.height}}_getKey(){const{fontFamily:t,fontWeight:i,fontSize:r,buffer:o,sdf:c,radius:d,cutoff:h}=this.props;return c?`${t} ${i} ${r} ${o} ${d} ${h}`:`${t} ${i} ${r} ${o}`}}const V0=`uniform textBackgroundUniforms {
  bool billboard;
  float sizeScale;
  float sizeMinPixels;
  float sizeMaxPixels;
  vec4 borderRadius;
  vec4 padding;
  highp int sizeUnits;
  bool stroked;
} textBackground;
`,SA={name:"textBackground",vs:V0,fs:V0,uniformTypes:{billboard:"f32",sizeScale:"f32",sizeMinPixels:"f32",sizeMaxPixels:"f32",borderRadius:"vec4<f32>",padding:"vec4<f32>",sizeUnits:"i32",stroked:"f32"}},TA=`#version 300 es
#define SHADER_NAME text-background-layer-vertex-shader
in vec2 positions;
in vec3 instancePositions;
in vec3 instancePositions64Low;
in vec4 instanceRects;
in float instanceSizes;
in float instanceAngles;
in vec2 instancePixelOffsets;
in float instanceLineWidths;
in vec4 instanceFillColors;
in vec4 instanceLineColors;
in vec3 instancePickingColors;
out vec4 vFillColor;
out vec4 vLineColor;
out float vLineWidth;
out vec2 uv;
out vec2 dimensions;
vec2 rotate_by_angle(vec2 vertex, float angle) {
float angle_radian = radians(angle);
float cos_angle = cos(angle_radian);
float sin_angle = sin(angle_radian);
mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
return rotationMatrix * vertex;
}
void main(void) {
geometry.worldPosition = instancePositions;
geometry.uv = positions;
geometry.pickingColor = instancePickingColors;
uv = positions;
vLineWidth = instanceLineWidths;
float sizePixels = clamp(
project_size_to_pixel(instanceSizes * textBackground.sizeScale, textBackground.sizeUnits),
textBackground.sizeMinPixels, textBackground.sizeMaxPixels
);
dimensions = instanceRects.zw * sizePixels + textBackground.padding.xy + textBackground.padding.zw;
vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-textBackground.padding.xy, textBackground.padding.zw, positions);
pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);
pixelOffset += instancePixelOffsets;
pixelOffset.y *= -1.0;
if (textBackground.billboard)  {
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
vec3 offset = vec3(pixelOffset, 0.0);
DECKGL_FILTER_SIZE(offset, geometry);
gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
} else {
vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
DECKGL_FILTER_SIZE(offset_common, geometry);
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
}
vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * layer.opacity);
DECKGL_FILTER_COLOR(vFillColor, geometry);
vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * layer.opacity);
DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,AA=`#version 300 es
#define SHADER_NAME text-background-layer-fragment-shader
precision highp float;
in vec4 vFillColor;
in vec4 vLineColor;
in float vLineWidth;
in vec2 uv;
in vec2 dimensions;
out vec4 fragColor;
float round_rect(vec2 p, vec2 size, vec4 radii) {
vec2 pixelPositionCB = (p - 0.5) * size;
vec2 sizeCB = size * 0.5;
float maxBorderRadius = min(size.x, size.y) * 0.5;
vec4 borderRadius = vec4(min(radii, maxBorderRadius));
borderRadius.xy =
(pixelPositionCB.x > 0.0) ? borderRadius.xy : borderRadius.zw;
borderRadius.x = (pixelPositionCB.y > 0.0) ? borderRadius.x : borderRadius.y;
vec2 q = abs(pixelPositionCB) - sizeCB + borderRadius.x;
return -(min(max(q.x, q.y), 0.0) + length(max(q, 0.0)) - borderRadius.x);
}
float rect(vec2 p, vec2 size) {
vec2 pixelPosition = p * size;
return min(min(pixelPosition.x, size.x - pixelPosition.x),
min(pixelPosition.y, size.y - pixelPosition.y));
}
vec4 get_stroked_fragColor(float dist) {
float isBorder = smoothedge(dist, vLineWidth);
return mix(vFillColor, vLineColor, isBorder);
}
void main(void) {
geometry.uv = uv;
if (textBackground.borderRadius != vec4(0.0)) {
float distToEdge = round_rect(uv, dimensions, textBackground.borderRadius);
if (textBackground.stroked) {
fragColor = get_stroked_fragColor(distToEdge);
} else {
fragColor = vFillColor;
}
float shapeAlpha = smoothedge(-distToEdge, 0.0);
fragColor.a *= shapeAlpha;
} else {
if (textBackground.stroked) {
float distToEdge = rect(uv, dimensions);
fragColor = get_stroked_fragColor(distToEdge);
} else {
fragColor = vFillColor;
}
}
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,xA={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,borderRadius:{type:"object",value:0},padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:s=>s.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class bh extends Ja{getShaders(){return super.getShaders({vs:TA,fs:AA,modules:[$a,tr,SA]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,type:"unorm8",accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,type:"unorm8",accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(t){super.updateState(t);const{changeFlags:i}=t;i.extensionsChanged&&(this.state.model?.destroy(),this.state.model=this._getModel(),this.getAttributeManager().invalidateAll())}draw({uniforms:t}){const{billboard:i,sizeScale:r,sizeUnits:o,sizeMinPixels:c,sizeMaxPixels:d,getLineWidth:h}=this.props;let{padding:y,borderRadius:g}=this.props;y.length<4&&(y=[y[0],y[1],y[0],y[1]]),Array.isArray(g)||(g=[g,g,g,g]);const v=this.state.model,b={billboard:i,stroked:!!h,borderRadius:g,padding:y,sizeUnits:hl[o],sizeScale:r,sizeMinPixels:c,sizeMaxPixels:d};v.shaderInputs.setProps({textBackground:b}),v.draw(this.context.renderPass)}_getModel(){const t=[0,0,1,0,0,1,1,1];return new ds(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new ka({topology:"triangle-strip",vertexCount:4,attributes:{positions:{size:2,value:new Float32Array(t)}}}),isInstanced:!0})}}bh.defaultProps=xA;bh.layerName="TextBackgroundLayer";const j0={start:1,middle:0,end:-1},G0={top:1,center:0,bottom:-1},Id=[0,0,0,255],EA=1,wA={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:Id},getBorderWidth:{type:"accessor",value:0},backgroundBorderRadius:{type:"object",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:ja.characterSet},fontFamily:ja.fontFamily,fontWeight:ja.fontWeight,lineHeight:EA,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:Id},fontSettings:{type:"object",value:{},compare:1},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:s=>s.text},getPosition:{type:"accessor",value:s=>s.position},getColor:{type:"accessor",value:Id},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class Sh extends yh{constructor(){super(...arguments),this.getBoundingRect=(t,i)=>{let{size:[r,o]}=this.transformParagraph(t,i);const{fontSize:c}=this.state.fontAtlasManager.props;r/=c,o/=c;const{getTextAnchor:d,getAlignmentBaseline:h}=this.props,y=j0[typeof d=="function"?d(t,i):d],g=G0[typeof h=="function"?h(t,i):h];return[(y-1)*r/2,(g-1)*o/2,r,o]},this.getIconOffsets=(t,i)=>{const{getTextAnchor:r,getAlignmentBaseline:o}=this.props,{x:c,y:d,rowWidth:h,size:[y,g]}=this.transformParagraph(t,i),v=j0[typeof r=="function"?r(t,i):r],b=G0[typeof o=="function"?o(t,i):o],E=c.length,M=new Array(E*2);let V=0;for(let j=0;j<E;j++){const H=(1-v)*(y-h[j])/2;M[V++]=(v-1)*y/2+H+c[j],M[V++]=(b-1)*g/2+d[j]}return M}}initializeState(){this.state={styleVersion:0,fontAtlasManager:new bA},this.props.maxWidth>0&&$i.once(1,"v8.9 breaking change: TextLayer maxWidth is now relative to text size")()}updateState(t){const{props:i,oldProps:r,changeFlags:o}=t;(o.dataChanged||o.updateTriggersChanged&&(o.updateTriggersChanged.all||o.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||i.lineHeight!==r.lineHeight||i.wordBreak!==r.wordBreak||i.maxWidth!==r.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:t}){return t.object=t.index>=0?this.props.data[t.index]:null,t}_updateFontAtlas(){const{fontSettings:t,fontFamily:i,fontWeight:r}=this.props,{fontAtlasManager:o,characterSet:c}=this.state,d={...t,characterSet:c,fontFamily:i,fontWeight:r};if(!o.mapping)return o.setProps(d),!0;for(const h in d)if(d[h]!==o.props[h])return o.setProps(d),!0;return!1}_updateText(){const{data:t,characterSet:i}=this.props,r=t.attributes?.getText;let{getText:o}=this.props,c=t.startIndices,d;const h=i==="auto"&&new Set;if(r&&c){const{texts:y,characterCount:g}=pA({...ArrayBuffer.isView(r)?{value:r}:r,length:t.length,startIndices:c,characterSet:h});d=g,o=(v,{index:b})=>y[b]}else{const{iterable:y,objectInfo:g}=Cv(t);c=[0],d=0;for(const v of y){g.index++;const b=Array.from(o(v,g)||"");h&&b.forEach(h.add,h),d+=b.length,c.push(d)}}this.setState({getText:o,startIndices:c,numInstances:d,characterSet:h||i})}transformParagraph(t,i){const{fontAtlasManager:r}=this.state,o=r.mapping,c=this.state.getText,{wordBreak:d,lineHeight:h,maxWidth:y}=this.props,g=c(t,i)||"";return yA(g,h,d,y*r.props.fontSize,o)}renderLayers(){const{startIndices:t,numInstances:i,getText:r,fontAtlasManager:{scale:o,atlas:c,mapping:d},styleVersion:h}=this.state,{data:y,_dataDiff:g,getPosition:v,getColor:b,getSize:E,getAngle:M,getPixelOffset:V,getBackgroundColor:j,getBorderColor:H,getBorderWidth:q,backgroundBorderRadius:dt,backgroundPadding:Q,background:Nt,billboard:gt,fontSettings:ht,outlineWidth:Jt,outlineColor:se,sizeScale:Yt,sizeUnits:ce,sizeMinPixels:di,sizeMaxPixels:Ae,transitions:te,updateTriggers:kt}=this.props,Re=this.getSubLayerClass("characters",_h),_=this.getSubLayerClass("background",bh);return[Nt&&new _({getFillColor:j,getLineColor:H,getLineWidth:q,borderRadius:dt,padding:Q,getPosition:v,getSize:E,getAngle:M,getPixelOffset:V,billboard:gt,sizeScale:Yt,sizeUnits:ce,sizeMinPixels:di,sizeMaxPixels:Ae,transitions:te&&{getPosition:te.getPosition,getAngle:te.getAngle,getSize:te.getSize,getFillColor:te.getBackgroundColor,getLineColor:te.getBorderColor,getLineWidth:te.getBorderWidth,getPixelOffset:te.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:kt.getPosition,getAngle:kt.getAngle,getSize:kt.getSize,getFillColor:kt.getBackgroundColor,getLineColor:kt.getBorderColor,getLineWidth:kt.getBorderWidth,getPixelOffset:kt.getPixelOffset,getBoundingRect:{getText:kt.getText,getTextAnchor:kt.getTextAnchor,getAlignmentBaseline:kt.getAlignmentBaseline,styleVersion:h}}}),{data:y.attributes&&y.attributes.background?{length:y.length,attributes:y.attributes.background}:y,_dataDiff:g,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new Re({sdf:ht.sdf,smoothing:Number.isFinite(ht.smoothing)?ht.smoothing:ja.smoothing,outlineWidth:Jt/(ht.radius||ja.radius),outlineColor:se,iconAtlas:c,iconMapping:d,getPosition:v,getColor:b,getSize:E,getAngle:M,getPixelOffset:V,billboard:gt,sizeScale:Yt*o,sizeUnits:ce,sizeMinPixels:di*o,sizeMaxPixels:Ae*o,transitions:te&&{getPosition:te.getPosition,getAngle:te.getAngle,getColor:te.getColor,getSize:te.getSize,getPixelOffset:te.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{all:kt.getText,getPosition:kt.getPosition,getAngle:kt.getAngle,getColor:kt.getColor,getSize:kt.getSize,getPixelOffset:kt.getPixelOffset,getIconOffsets:{getTextAnchor:kt.getTextAnchor,getAlignmentBaseline:kt.getAlignmentBaseline,styleVersion:h}}}),{data:y,_dataDiff:g,startIndices:t,numInstances:i,getIconOffsets:this.getIconOffsets,getIcon:r})]}static set fontAtlasCacheLimit(t){_A(t)}}Sh.defaultProps=wA;Sh.layerName="TextLayer";const lc={circle:{type:gh,props:{filled:"filled",stroked:"stroked",lineWidthMaxPixels:"lineWidthMaxPixels",lineWidthMinPixels:"lineWidthMinPixels",lineWidthScale:"lineWidthScale",lineWidthUnits:"lineWidthUnits",pointRadiusMaxPixels:"radiusMaxPixels",pointRadiusMinPixels:"radiusMinPixels",pointRadiusScale:"radiusScale",pointRadiusUnits:"radiusUnits",pointAntialiasing:"antialiasing",pointBillboard:"billboard",getFillColor:"getFillColor",getLineColor:"getLineColor",getLineWidth:"getLineWidth",getPointRadius:"getRadius"}},icon:{type:tu,props:{iconAtlas:"iconAtlas",iconMapping:"iconMapping",iconSizeMaxPixels:"sizeMaxPixels",iconSizeMinPixels:"sizeMinPixels",iconSizeScale:"sizeScale",iconSizeUnits:"sizeUnits",iconAlphaCutoff:"alphaCutoff",iconBillboard:"billboard",getIcon:"getIcon",getIconAngle:"getAngle",getIconColor:"getColor",getIconPixelOffset:"getPixelOffset",getIconSize:"getSize"}},text:{type:Sh,props:{textSizeMaxPixels:"sizeMaxPixels",textSizeMinPixels:"sizeMinPixels",textSizeScale:"sizeScale",textSizeUnits:"sizeUnits",textBackground:"background",textBackgroundPadding:"backgroundPadding",textFontFamily:"fontFamily",textFontWeight:"fontWeight",textLineHeight:"lineHeight",textMaxWidth:"maxWidth",textOutlineColor:"outlineColor",textOutlineWidth:"outlineWidth",textWordBreak:"wordBreak",textCharacterSet:"characterSet",textBillboard:"billboard",textFontSettings:"fontSettings",getText:"getText",getTextAngle:"getAngle",getTextColor:"getColor",getTextPixelOffset:"getPixelOffset",getTextSize:"getSize",getTextAnchor:"getTextAnchor",getTextAlignmentBaseline:"getAlignmentBaseline",getTextBackgroundColor:"getBackgroundColor",getTextBorderColor:"getBorderColor",getTextBorderWidth:"getBorderWidth"}}},oc={type:mh,props:{lineWidthUnits:"widthUnits",lineWidthScale:"widthScale",lineWidthMinPixels:"widthMinPixels",lineWidthMaxPixels:"widthMaxPixels",lineJointRounded:"jointRounded",lineCapRounded:"capRounded",lineMiterLimit:"miterLimit",lineBillboard:"billboard",getLineColor:"getColor",getLineWidth:"getWidth"}},Xd={type:vh,props:{extruded:"extruded",filled:"filled",wireframe:"wireframe",elevationScale:"elevationScale",material:"material",_full3d:"_full3d",getElevation:"getElevation",getFillColor:"getFillColor",getLineColor:"getLineColor"}};function Jr({type:s,props:t}){const i={};for(const r in t)i[r]=s.defaultProps[t[r]];return i}function Rd(s,t){const{transitions:i,updateTriggers:r}=s.props,o={updateTriggers:{},transitions:i&&{getPosition:i.geometry}};for(const c in t){const d=t[c];let h=s.props[c];c.startsWith("get")&&(h=s.getSubLayerAccessor(h),o.updateTriggers[d]=r[c],i&&(o.transitions[d]=i[c])),o[d]=h}return o}function OA(s){if(Array.isArray(s))return s;switch($i.assert(s.type,"GeoJSON does not have type"),s.type){case"Feature":return[s];case"FeatureCollection":return $i.assert(Array.isArray(s.features),"GeoJSON does not have features array"),s.features;default:return[{geometry:s}]}}function H0(s,t,i={}){const r={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},{startRow:o=0,endRow:c=s.length}=i;for(let d=o;d<c;d++){const h=s[d],{geometry:y}=h;if(y)if(y.type==="GeometryCollection"){$i.assert(Array.isArray(y.geometries),"GeoJSON does not have geometries array");const{geometries:g}=y;for(let v=0;v<g.length;v++){const b=g[v];q0(b,r,t,h,d)}}else q0(y,r,t,h,d)}return r}function q0(s,t,i,r,o){const{type:c,coordinates:d}=s,{pointFeatures:h,lineFeatures:y,polygonFeatures:g,polygonOutlineFeatures:v}=t;if(!LA(c,d)){$i.warn(`${c} coordinates are malformed`)();return}switch(c){case"Point":h.push(i({geometry:s},r,o));break;case"MultiPoint":d.forEach(b=>{h.push(i({geometry:{type:"Point",coordinates:b}},r,o))});break;case"LineString":y.push(i({geometry:s},r,o));break;case"MultiLineString":d.forEach(b=>{y.push(i({geometry:{type:"LineString",coordinates:b}},r,o))});break;case"Polygon":g.push(i({geometry:s},r,o)),d.forEach(b=>{v.push(i({geometry:{type:"LineString",coordinates:b}},r,o))});break;case"MultiPolygon":d.forEach(b=>{g.push(i({geometry:{type:"Polygon",coordinates:b}},r,o)),b.forEach(E=>{v.push(i({geometry:{type:"LineString",coordinates:E}},r,o))})});break}}const MA={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function LA(s,t){let i=MA[s];for($i.assert(i,`Unknown GeoJSON type ${s}`);t&&--i>0;)t=t[0];return t&&Number.isFinite(t[0])}function kv(){return{points:{},lines:{},polygons:{},polygonsOutline:{}}}function Ko(s){return s.geometry.coordinates}function CA(s,t){const i=kv(),{pointFeatures:r,lineFeatures:o,polygonFeatures:c,polygonOutlineFeatures:d}=s;return i.points.data=r,i.points._dataDiff=t.pointFeatures&&(()=>t.pointFeatures),i.points.getPosition=Ko,i.lines.data=o,i.lines._dataDiff=t.lineFeatures&&(()=>t.lineFeatures),i.lines.getPath=Ko,i.polygons.data=c,i.polygons._dataDiff=t.polygonFeatures&&(()=>t.polygonFeatures),i.polygons.getPolygon=Ko,i.polygonsOutline.data=d,i.polygonsOutline._dataDiff=t.polygonOutlineFeatures&&(()=>t.polygonOutlineFeatures),i.polygonsOutline.getPath=Ko,i}function DA(s,t){const i=kv(),{points:r,lines:o,polygons:c}=s,d=iA(s,t);i.points.data={length:r.positions.value.length/r.positions.size,attributes:{...r.attributes,getPosition:r.positions,instancePickingColors:{size:4,value:d.points}},properties:r.properties,numericProps:r.numericProps,featureIds:r.featureIds},i.lines.data={length:o.pathIndices.value.length-1,startIndices:o.pathIndices.value,attributes:{...o.attributes,getPath:o.positions,instancePickingColors:{size:4,value:d.lines}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},i.lines._pathType="open";const h=c.positions.value.length/c.positions.size,y=Array(h).fill(1);for(const g of c.primitivePolygonIndices.value)y[g-1]=0;return i.polygons.data={length:c.polygonIndices.value.length-1,startIndices:c.polygonIndices.value,attributes:{...c.attributes,getPolygon:c.positions,instanceVertexValid:{size:1,value:new Uint16Array(y)},pickingColors:{size:4,value:d.polygons}},properties:c.properties,numericProps:c.numericProps,featureIds:c.featureIds},i.polygons._normalize=!1,c.triangles&&(i.polygons.data.attributes.indices=c.triangles.value),i.polygonsOutline.data={length:c.primitivePolygonIndices.value.length-1,startIndices:c.primitivePolygonIndices.value,attributes:{...c.attributes,getPath:c.positions,instancePickingColors:{size:4,value:d.polygons}},properties:c.properties,numericProps:c.numericProps,featureIds:c.featureIds},i.polygonsOutline._pathType="open",i}const BA=["points","linestrings","polygons"],IA={...Jr(lc.circle),...Jr(lc.icon),...Jr(lc.text),...Jr(oc),...Jr(Xd),stroked:!0,filled:!0,extruded:!1,wireframe:!1,_full3d:!1,iconAtlas:{type:"object",value:null},iconMapping:{type:"object",value:{}},getIcon:{type:"accessor",value:s=>s.properties.icon},getText:{type:"accessor",value:s=>s.properties.text},pointType:"circle",getRadius:{deprecatedFor:"getPointRadius"}};class eu extends yh{initializeState(){this.state={layerProps:{},features:{},featuresDiff:{}}}updateState({props:t,changeFlags:i}){if(!i.dataChanged)return;const{data:r}=this.props,o=r&&"points"in r&&"polygons"in r&&"lines"in r;this.setState({binary:o}),o?this._updateStateBinary({props:t,changeFlags:i}):this._updateStateJSON({props:t,changeFlags:i})}_updateStateBinary({props:t,changeFlags:i}){const r=DA(t.data,this.encodePickingColor);this.setState({layerProps:r})}_updateStateJSON({props:t,changeFlags:i}){const r=OA(t.data),o=this.getSubLayerRow.bind(this);let c={};const d={};if(Array.isArray(i.dataChanged)){const y=this.state.features;for(const g in y)c[g]=y[g].slice(),d[g]=[];for(const g of i.dataChanged){const v=H0(r,o,g);for(const b in y)d[b].push($2({data:c[b],getIndex:E=>E.__source.index,dataRange:g,replace:v[b]}))}}else c=H0(r,o);const h=CA(c,d);this.setState({features:c,featuresDiff:d,layerProps:h})}getPickingInfo(t){const i=super.getPickingInfo(t),{index:r,sourceLayer:o}=i;return i.featureType=BA.find(c=>o.id.startsWith(`${this.id}-${c}-`)),r>=0&&o.id.startsWith(`${this.id}-points-text`)&&this.state.binary&&(i.index=this.props.data.points.globalFeatureIds.value[r]),i}_updateAutoHighlight(t){const i=`${this.id}-points-`,r=t.featureType==="points";for(const o of this.getSubLayers())o.id.startsWith(i)===r&&o.updateAutoHighlight(t)}_renderPolygonLayer(){const{extruded:t,wireframe:i}=this.props,{layerProps:r}=this.state,o="polygons-fill",c=this.shouldRenderSubLayer(o,r.polygons?.data)&&this.getSubLayerClass(o,Xd.type);if(c){const d=Rd(this,Xd.props),h=t&&i;return h||delete d.getLineColor,d.updateTriggers.lineColors=h,new c(d,this.getSubLayerProps({id:o,updateTriggers:d.updateTriggers}),r.polygons)}return null}_renderLineLayers(){const{extruded:t,stroked:i}=this.props,{layerProps:r}=this.state,o="polygons-stroke",c="linestrings",d=!t&&i&&this.shouldRenderSubLayer(o,r.polygonsOutline?.data)&&this.getSubLayerClass(o,oc.type),h=this.shouldRenderSubLayer(c,r.lines?.data)&&this.getSubLayerClass(c,oc.type);if(d||h){const y=Rd(this,oc.props);return[d&&new d(y,this.getSubLayerProps({id:o,updateTriggers:y.updateTriggers}),r.polygonsOutline),h&&new h(y,this.getSubLayerProps({id:c,updateTriggers:y.updateTriggers}),r.lines)]}return null}_renderPointLayers(){const{pointType:t}=this.props,{layerProps:i,binary:r}=this.state;let{highlightedObjectIndex:o}=this.props;!r&&Number.isFinite(o)&&(o=i.points.data.findIndex(h=>h.__source.index===o));const c=new Set(t.split("+")),d=[];for(const h of c){const y=`points-${h}`,g=lc[h],v=g&&this.shouldRenderSubLayer(y,i.points?.data)&&this.getSubLayerClass(y,g.type);if(v){const b=Rd(this,g.props);let E=i.points;if(h==="text"&&r){const{instancePickingColors:M,...V}=E.data.attributes;E={...E,data:{...E.data,attributes:V}}}d.push(new v(b,this.getSubLayerProps({id:y,updateTriggers:b.updateTriggers,highlightedObjectIndex:o}),E))}}return d}renderLayers(){const{extruded:t}=this.props,i=this._renderPolygonLayer(),r=this._renderLineLayers(),o=this._renderPointLayers();return[!t&&i,r,o,t&&i]}getSubLayerAccessor(t){const{binary:i}=this.state;return!i||typeof t!="function"?super.getSubLayerAccessor(t):(r,o)=>{const{data:c,index:d}=o,h=tA(c,d);return t(h,o)}}}eu.layerName="GeoJsonLayer";eu.defaultProps=IA;class RA{constructor(t){this.index=t,this.isVisible=!1,this.isSelected=!1,this.parent=null,this.children=[],this.content=null,this._loader=void 0,this._abortController=null,this._loaderId=0,this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1}get bbox(){return this._bbox}set bbox(t){this._bbox||(this._bbox=t,"west"in t?this.boundingBox=[[t.west,t.south],[t.east,t.north]]:this.boundingBox=[[t.left,t.top],[t.right,t.bottom]])}get data(){return this.isLoading&&this._loader?this._loader.then(()=>this.data):this.content}get isLoaded(){return this._isLoaded&&!this._needsReload}get isLoading(){return!!this._loader&&!this._isCancelled}get needsReload(){return this._needsReload||this._isCancelled}get byteLength(){const t=this.content?this.content.byteLength:0;return Number.isFinite(t)||console.error("byteLength not defined in tile data"),t}async _loadData({getData:t,requestScheduler:i,onLoad:r,onError:o}){const{index:c,id:d,bbox:h,userData:y,zoom:g}=this,v=this._loaderId;this._abortController=new AbortController;const{signal:b}=this._abortController,E=await i.scheduleRequest(this,j=>j.isSelected?1:-1);if(!E){this._isCancelled=!0;return}if(this._isCancelled){E.done();return}let M=null,V;try{M=await t({index:c,id:d,bbox:h,userData:y,zoom:g,signal:b})}catch(j){V=j||!0}finally{E.done()}if(v===this._loaderId){if(this._loader=void 0,this.content=M,this._isCancelled&&!M){this._isLoaded=!1;return}this._isLoaded=!0,this._isCancelled=!1,V?o(V,this):r(this)}}loadData(t){return this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1,this._loaderId++,this._loader=this._loadData(t),this._loader}setNeedsReload(){this.isLoading&&(this.abort(),this._loader=void 0),this._needsReload=!0}abort(){this.isLoaded||(this._isCancelled=!0,this._abortController?.abort())}}const De={OUTSIDE:-1,INTERSECTING:0,INSIDE:1},Y0=new W,NA=new W;class Th{constructor(t=[0,0,0],i=[0,0,0],r){r=r||Y0.copy(t).add(i).scale(.5),this.center=new W(r),this.halfDiagonal=new W(i).subtract(this.center),this.minimum=new W(t),this.maximum=new W(i)}clone(){return new Th(this.minimum,this.maximum,this.center)}equals(t){return this===t||!!t&&this.minimum.equals(t.minimum)&&this.maximum.equals(t.maximum)}transform(t){return this.center.transformAsPoint(t),this.halfDiagonal.transform(t),this.minimum.transform(t),this.maximum.transform(t),this}intersectPlane(t){const{halfDiagonal:i}=this,r=NA.from(t.normal),o=i.x*Math.abs(r.x)+i.y*Math.abs(r.y)+i.z*Math.abs(r.z),c=this.center.dot(r)+t.distance;return c-o>0?De.INSIDE:c+o<0?De.OUTSIDE:De.INTERSECTING}distanceTo(t){return Math.sqrt(this.distanceSquaredTo(t))}distanceSquaredTo(t){const i=Y0.from(t).subtract(this.center),{halfDiagonal:r}=this;let o=0,c;return c=Math.abs(i.x)-r.x,c>0&&(o+=c*c),c=Math.abs(i.y)-r.y,c>0&&(o+=c*c),c=Math.abs(i.z)-r.z,c>0&&(o+=c*c),o}}const $r=new W,k0=new W;class Ah{constructor(t=[0,0,0],i=0){this.radius=-0,this.center=new W,this.fromCenterRadius(t,i)}fromCenterRadius(t,i){return this.center.from(t),this.radius=i,this}fromCornerPoints(t,i){return i=$r.from(i),this.center=new W().from(t).add(i).scale(.5),this.radius=this.center.distance(i),this}equals(t){return this===t||!!t&&this.center.equals(t.center)&&this.radius===t.radius}clone(){return new Ah(this.center,this.radius)}union(t){const i=this.center,r=this.radius,o=t.center,c=t.radius,d=$r.copy(o).subtract(i),h=d.magnitude();if(r>=h+c)return this.clone();if(c>=h+r)return t.clone();const y=(r+h+c)*.5;return k0.copy(d).scale((-r+y)/h).add(i),this.center.copy(k0),this.radius=y,this}expand(t){const r=$r.from(t).subtract(this.center).magnitude();return r>this.radius&&(this.radius=r),this}transform(t){this.center.transform(t);const i=LT($r,t);return this.radius=Math.max(i[0],Math.max(i[1],i[2]))*this.radius,this}distanceSquaredTo(t){const i=this.distanceTo(t);return i*i}distanceTo(t){const r=$r.from(t).subtract(this.center);return Math.max(0,r.len()-this.radius)}intersectPlane(t){const i=this.center,r=this.radius,c=t.normal.dot(i)+t.distance;return c<-r?De.OUTSIDE:c<r?De.INTERSECTING:De.INSIDE}}const zA=new W,UA=new W,Wo=new W,Jo=new W,$o=new W,FA=new W,PA=new W,An={COLUMN0ROW0:0,COLUMN0ROW1:1,COLUMN0ROW2:2,COLUMN1ROW0:3,COLUMN1ROW1:4,COLUMN1ROW2:5,COLUMN2ROW0:6,COLUMN2ROW1:7,COLUMN2ROW2:8};class xh{constructor(t=[0,0,0],i=[0,0,0,0,0,0,0,0,0]){this.center=new W().from(t),this.halfAxes=new Pe(i)}get halfSize(){const t=this.halfAxes.getColumn(0),i=this.halfAxes.getColumn(1),r=this.halfAxes.getColumn(2);return[new W(t).len(),new W(i).len(),new W(r).len()]}get quaternion(){const t=this.halfAxes.getColumn(0),i=this.halfAxes.getColumn(1),r=this.halfAxes.getColumn(2),o=new W(t).normalize(),c=new W(i).normalize(),d=new W(r).normalize();return new s0().fromMatrix3(new Pe([...o,...c,...d]))}fromCenterHalfSizeQuaternion(t,i,r){const o=new s0(r),c=new Pe().fromQuaternion(o);return c[0]=c[0]*i[0],c[1]=c[1]*i[0],c[2]=c[2]*i[0],c[3]=c[3]*i[1],c[4]=c[4]*i[1],c[5]=c[5]*i[1],c[6]=c[6]*i[2],c[7]=c[7]*i[2],c[8]=c[8]*i[2],this.center=new W().from(t),this.halfAxes=c,this}clone(){return new xh(this.center,this.halfAxes)}equals(t){return this===t||!!t&&this.center.equals(t.center)&&this.halfAxes.equals(t.halfAxes)}getBoundingSphere(t=new Ah){const i=this.halfAxes,r=i.getColumn(0,Wo),o=i.getColumn(1,Jo),c=i.getColumn(2,$o),d=zA.copy(r).add(o).add(c);return t.center.copy(this.center),t.radius=d.magnitude(),t}intersectPlane(t){const i=this.center,r=t.normal,o=this.halfAxes,c=r.x,d=r.y,h=r.z,y=Math.abs(c*o[An.COLUMN0ROW0]+d*o[An.COLUMN0ROW1]+h*o[An.COLUMN0ROW2])+Math.abs(c*o[An.COLUMN1ROW0]+d*o[An.COLUMN1ROW1]+h*o[An.COLUMN1ROW2])+Math.abs(c*o[An.COLUMN2ROW0]+d*o[An.COLUMN2ROW1]+h*o[An.COLUMN2ROW2]),g=r.dot(i)+t.distance;return g<=-y?De.OUTSIDE:g>=y?De.INSIDE:De.INTERSECTING}distanceTo(t){return Math.sqrt(this.distanceSquaredTo(t))}distanceSquaredTo(t){const i=UA.from(t).subtract(this.center),r=this.halfAxes,o=r.getColumn(0,Wo),c=r.getColumn(1,Jo),d=r.getColumn(2,$o),h=o.magnitude(),y=c.magnitude(),g=d.magnitude();o.normalize(),c.normalize(),d.normalize();let v=0,b;return b=Math.abs(i.dot(o))-h,b>0&&(v+=b*b),b=Math.abs(i.dot(c))-y,b>0&&(v+=b*b),b=Math.abs(i.dot(d))-g,b>0&&(v+=b*b),v}computePlaneDistances(t,i,r=[-0,-0]){let o=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY;const d=this.center,h=this.halfAxes,y=h.getColumn(0,Wo),g=h.getColumn(1,Jo),v=h.getColumn(2,$o),b=FA.copy(y).add(g).add(v).add(d),E=PA.copy(b).subtract(t);let M=i.dot(E);return o=Math.min(M,o),c=Math.max(M,c),b.copy(d).add(y).add(g).subtract(v),E.copy(b).subtract(t),M=i.dot(E),o=Math.min(M,o),c=Math.max(M,c),b.copy(d).add(y).subtract(g).add(v),E.copy(b).subtract(t),M=i.dot(E),o=Math.min(M,o),c=Math.max(M,c),b.copy(d).add(y).subtract(g).subtract(v),E.copy(b).subtract(t),M=i.dot(E),o=Math.min(M,o),c=Math.max(M,c),d.copy(b).subtract(y).add(g).add(v),E.copy(b).subtract(t),M=i.dot(E),o=Math.min(M,o),c=Math.max(M,c),d.copy(b).subtract(y).add(g).subtract(v),E.copy(b).subtract(t),M=i.dot(E),o=Math.min(M,o),c=Math.max(M,c),d.copy(b).subtract(y).subtract(g).add(v),E.copy(b).subtract(t),M=i.dot(E),o=Math.min(M,o),c=Math.max(M,c),d.copy(b).subtract(y).subtract(g).subtract(v),E.copy(b).subtract(t),M=i.dot(E),o=Math.min(M,o),c=Math.max(M,c),r[0]=o,r[1]=c,r}transform(t){this.center.transformAsPoint(t);const i=this.halfAxes.getColumn(0,Wo);i.transformAsPoint(t);const r=this.halfAxes.getColumn(1,Jo);r.transformAsPoint(t);const o=this.halfAxes.getColumn(2,$o);return o.transformAsPoint(t),this.halfAxes=new Pe([...i,...r,...o]),this}getTransform(){throw new Error("not implemented")}}const Q0=new W,Z0=new W;class gl{constructor(t=[0,0,1],i=0){this.normal=new W,this.distance=-0,this.fromNormalDistance(t,i)}fromNormalDistance(t,i){return kd(Number.isFinite(i)),this.normal.from(t).normalize(),this.distance=i,this}fromPointNormal(t,i){t=Q0.from(t),this.normal.from(i).normalize();const r=-this.normal.dot(t);return this.distance=r,this}fromCoefficients(t,i,r,o){return this.normal.set(t,i,r),kd(sc(this.normal.len(),1)),this.distance=o,this}clone(){return new gl(this.normal,this.distance)}equals(t){return sc(this.distance,t.distance)&&sc(this.normal,t.normal)}getPointDistance(t){return this.normal.dot(t)+this.distance}transform(t){const i=Z0.copy(this.normal).transformAsVector(t).normalize(),r=this.normal.scale(-this.distance).transform(t);return this.fromPointNormal(r,i)}projectPointOntoPlane(t,i=[0,0,0]){const r=Q0.from(t),o=this.getPointDistance(r),c=Z0.copy(this.normal).scale(o);return r.subtract(c).to(i)}}const X0=[new W([1,0,0]),new W([0,1,0]),new W([0,0,1])],K0=new W,VA=new W;class Cn{constructor(t=[]){this.planes=t}fromBoundingSphere(t){this.planes.length=2*X0.length;const i=t.center,r=t.radius;let o=0;for(const c of X0){let d=this.planes[o],h=this.planes[o+1];d||(d=this.planes[o]=new gl),h||(h=this.planes[o+1]=new gl);const y=K0.copy(c).scale(-r).add(i);d.fromPointNormal(y,c);const g=K0.copy(c).scale(r).add(i),v=VA.copy(c).negate();h.fromPointNormal(g,v),o+=2}return this}computeVisibility(t){let i=De.INSIDE;for(const r of this.planes)switch(t.intersectPlane(r)){case De.OUTSIDE:return De.OUTSIDE;case De.INTERSECTING:i=De.INTERSECTING;break}return i}computeVisibilityWithPlaneMask(t,i){if(kd(Number.isFinite(i),"parentPlaneMask is required."),i===Cn.MASK_OUTSIDE||i===Cn.MASK_INSIDE)return i;let r=Cn.MASK_INSIDE;const o=this.planes;for(let c=0;c<this.planes.length;++c){const d=c<31?1<<c:0;if(c<31&&(i&d)===0)continue;const h=o[c],y=t.intersectPlane(h);if(y===De.OUTSIDE)return Cn.MASK_OUTSIDE;y===De.INTERSECTING&&(r|=d)}return r}}Cn.MASK_OUTSIDE=4294967295;Cn.MASK_INSIDE=0;Cn.MASK_INDETERMINATE=2147483647;new W;new W;new W;new W;new W;new W;new W;new W;new W;new W;new W;new W;new W;new W;new W;new W;new W;const qi=new Pe,jA=new Pe,GA=new Pe,tc=new Pe,W0=new Pe;function HA(s,t={}){const i=CT,r=10;let o=0,c=0;const d=jA,h=GA;d.identity(),h.copy(s);const y=i*qA(h);for(;c<r&&YA(h)>y;)kA(h,tc),W0.copy(tc).transpose(),h.multiplyRight(tc),h.multiplyLeft(W0),d.multiplyRight(tc),++o>2&&(++c,o=0);return t.unitary=d.toTarget(t.unitary),t.diagonal=h.toTarget(t.diagonal),t}function qA(s){let t=0;for(let i=0;i<9;++i){const r=s[i];t+=r*r}return Math.sqrt(t)}const Kd=[1,0,0],Wd=[2,2,1];function YA(s){let t=0;for(let i=0;i<3;++i){const r=s[qi.getElementIndex(Wd[i],Kd[i])];t+=2*r*r}return Math.sqrt(t)}function kA(s,t){const i=DT;let r=0,o=1;for(let g=0;g<3;++g){const v=Math.abs(s[qi.getElementIndex(Wd[g],Kd[g])]);v>r&&(o=g,r=v)}const c=Kd[o],d=Wd[o];let h=1,y=0;if(Math.abs(s[qi.getElementIndex(d,c)])>i){const g=s[qi.getElementIndex(d,d)],v=s[qi.getElementIndex(c,c)],b=s[qi.getElementIndex(d,c)],E=(g-v)/2/b;let M;E<0?M=-1/(-E+Math.sqrt(1+E*E)):M=1/(E+Math.sqrt(1+E*E)),h=1/Math.sqrt(1+M*M),y=M*h}return Pe.IDENTITY.to(t),t[qi.getElementIndex(c,c)]=t[qi.getElementIndex(d,d)]=h,t[qi.getElementIndex(d,c)]=y,t[qi.getElementIndex(c,d)]=-y,t}const rs=new W,QA=new W,ZA=new W,XA=new W,KA=new W,WA=new Pe,JA={diagonal:new Pe,unitary:new Pe};function $A(s,t=new xh){if(!s||s.length===0)return t.halfAxes=new Pe([0,0,0,0,0,0,0,0,0]),t.center=new W,t;const i=s.length,r=new W(0,0,0);for(const Yt of s)r.add(Yt);const o=1/i;r.multiplyByScalar(o);let c=0,d=0,h=0,y=0,g=0,v=0;for(const Yt of s){const ce=rs.copy(Yt).subtract(r);c+=ce.x*ce.x,d+=ce.x*ce.y,h+=ce.x*ce.z,y+=ce.y*ce.y,g+=ce.y*ce.z,v+=ce.z*ce.z}c*=o,d*=o,h*=o,y*=o,g*=o,v*=o;const b=WA;b[0]=c,b[1]=d,b[2]=h,b[3]=d,b[4]=y,b[5]=g,b[6]=h,b[7]=g,b[8]=v;const{unitary:E}=HA(b,JA),M=t.halfAxes.copy(E);let V=M.getColumn(0,ZA),j=M.getColumn(1,XA),H=M.getColumn(2,KA),q=-Number.MAX_VALUE,dt=-Number.MAX_VALUE,Q=-Number.MAX_VALUE,Nt=Number.MAX_VALUE,gt=Number.MAX_VALUE,ht=Number.MAX_VALUE;for(const Yt of s)rs.copy(Yt),q=Math.max(rs.dot(V),q),dt=Math.max(rs.dot(j),dt),Q=Math.max(rs.dot(H),Q),Nt=Math.min(rs.dot(V),Nt),gt=Math.min(rs.dot(j),gt),ht=Math.min(rs.dot(H),ht);V=V.multiplyByScalar(.5*(Nt+q)),j=j.multiplyByScalar(.5*(gt+dt)),H=H.multiplyByScalar(.5*(ht+Q)),t.center.copy(V).add(j).add(H);const Jt=QA.set(q-Nt,dt-gt,Q-ht).multiplyByScalar(.5),se=new Pe([Jt[0],0,0,0,Jt[1],0,0,0,Jt[2]]);return t.halfAxes.multiplyRight(se),t}const Fa=512,J0=3,Qv=[[.5,.5],[0,0],[0,1],[1,0],[1,1]],Zv=Qv.concat([[0,.5],[.5,0],[1,.5],[.5,1]]),tx=Zv.concat([[.25,.5],[.75,.5]]);class Pa{constructor(t,i,r){this.x=t,this.y=i,this.z=r}get children(){if(!this._children){const t=this.x*2,i=this.y*2,r=this.z+1;this._children=[new Pa(t,i,r),new Pa(t,i+1,r),new Pa(t+1,i,r),new Pa(t+1,i+1,r)]}return this._children}update(t){const{viewport:i,cullingVolume:r,elevationBounds:o,minZ:c,maxZ:d,bounds:h,offset:y,project:g}=t,v=this.getBoundingVolume(o,y,g);if(h&&!this.insideBounds(h)||r.computeVisibility(v)<0)return!1;if(!this.childVisible){let{z:E}=this;if(E<d&&E>=c){const M=v.distanceTo(i.cameraPosition)*i.scale/i.height;E+=Math.floor(Math.log2(M))}if(E>=d)return this.selected=!0,!0}this.selected=!1,this.childVisible=!0;for(const E of this.children)E.update(t);return!0}getSelected(t=[]){if(this.selected&&t.push(this),this._children)for(const i of this._children)i.getSelected(t);return t}insideBounds([t,i,r,o]){const c=Math.pow(2,this.z),d=Fa/c;return this.x*d<r&&this.y*d<o&&(this.x+1)*d>t&&(this.y+1)*d>i}getBoundingVolume(t,i,r){if(r){const y=this.z<1?tx:this.z<2?Zv:Qv,g=[];for(const v of y){const b=$d(this.x+v[0],this.y+v[1],this.z);b[2]=t[0],g.push(r(b)),t[0]!==t[1]&&(b[2]=t[1],g.push(r(b)))}return $A(g)}const o=Math.pow(2,this.z),c=Fa/o,d=this.x*c+i*Fa,h=Fa-(this.y+1)*c;return new Th([d,h,t[0]],[d+c,h+c,t[1]])}}function ex(s,t,i,r){const o=s instanceof BT&&s.resolution?s.projectPosition:null,c=Object.values(s.getFrustumPlanes()).map(({normal:M,distance:V})=>new gl(M.clone().negate(),V)),d=new Cn(c),h=s.distanceScales.unitsPerMeter[2],y=i&&i[0]*h||0,g=i&&i[1]*h||0,v=s instanceof a0&&s.pitch<=60?t:0;if(r){const[M,V,j,H]=r,q=bc([M,H]),dt=bc([j,V]);r=[q[0],Fa-q[1],dt[0],Fa-dt[1]]}const b=new Pa(0,0,0),E={viewport:s,project:o,cullingVolume:d,elevationBounds:[y,g],minZ:v,maxZ:t,bounds:r,offset:0};if(b.update(E),s instanceof a0&&s.subViewports&&s.subViewports.length>1){for(E.offset=-1;b.update(E)&&!(--E.offset<-J0););for(E.offset=1;b.update(E)&&!(++E.offset>J0););}return b.getSelected()}const Dn=512,ix=[-1/0,-1/0,1/0,1/0],nx={equal:(s,t)=>{if(s===t)return!0;if(!Array.isArray(s)||!Array.isArray(t))return!1;const i=s.length;if(i!==t.length)return!1;for(let r=0;r<i;r++)if(s[r]!==t[r])return!1;return!0}};function Eh(s,t){const i=[t.transformAsPoint([s[0],s[1]]),t.transformAsPoint([s[2],s[1]]),t.transformAsPoint([s[0],s[3]]),t.transformAsPoint([s[2],s[3]])];return[Math.min(...i.map(o=>o[0])),Math.min(...i.map(o=>o[1])),Math.max(...i.map(o=>o[0])),Math.max(...i.map(o=>o[1]))]}function sx(s){return Math.abs(s.split("").reduce((t,i)=>(t<<5)-t+i.charCodeAt(0)|0,0))}function ax(s,t){if(!s||!s.length)return null;const{index:i,id:r}=t;if(Array.isArray(s)){const c=sx(r)%s.length;s=s[c]}let o=s;for(const c of Object.keys(i)){const d=new RegExp(`{${c}}`,"g");o=o.replace(d,String(i[c]))}return Number.isInteger(i.y)&&Number.isInteger(i.z)&&(o=o.replace(/\{-y\}/g,String(Math.pow(2,i.z)-i.y-1))),o}function rx(s,t,i){let r;return r=s.getBounds(),s.isGeospatial?[Math.max(r[0],i[0]),Math.max(r[1],i[1]),Math.min(r[2],i[2]),Math.min(r[3],i[3])]:[Math.max(Math.min(r[0],i[2]),i[0]),Math.max(Math.min(r[1],i[3]),i[1]),Math.min(Math.max(r[2],i[0]),i[2]),Math.min(Math.max(r[3],i[1]),i[3])]}function lx({viewport:s,z:t,cullRect:i}){return(s.subViewports||[s]).map(o=>Jd(o,t||0,i))}function Jd(s,t,i){if(!Array.isArray(t)){const c=i.x-s.x,d=i.y-s.y,{width:h,height:y}=i,g={targetZ:t},v=s.unproject([c,d],g),b=s.unproject([c+h,d],g),E=s.unproject([c,d+y],g),M=s.unproject([c+h,d+y],g);return[Math.min(v[0],b[0],E[0],M[0]),Math.min(v[1],b[1],E[1],M[1]),Math.max(v[0],b[0],E[0],M[0]),Math.max(v[1],b[1],E[1],M[1])]}const r=Jd(s,t[0],i),o=Jd(s,t[1],i);return[Math.min(r[0],o[0]),Math.min(r[1],o[1]),Math.max(r[2],o[2]),Math.max(r[3],o[3])]}function ox(s,t,i){return i?Eh(s,i).map(o=>o*t/Dn):s.map(r=>r*t/Dn)}function wh(s,t){return Math.pow(2,s)*Dn/t}function $d(s,t,i){const r=wh(i,Dn),o=s/r*360-180,c=Math.PI-2*Math.PI*t/r,d=180/Math.PI*Math.atan(.5*(Math.exp(c)-Math.exp(-c)));return[o,d]}function $0(s,t,i,r){const o=wh(i,r);return[s/o*Dn,t/o*Dn]}function cx(s,t,i,r,o=Dn){if(s.isGeospatial){const[g,v]=$d(t,i,r),[b,E]=$d(t+1,i+1,r);return{west:g,north:v,east:b,south:E}}const[c,d]=$0(t,i,r,o),[h,y]=$0(t+1,i+1,r,o);return{left:c,top:d,right:h,bottom:y}}function ux(s,t,i,r,o){const c=rx(s,null,r),d=wh(t,i),[h,y,g,v]=ox(c,d,o),b=[];for(let E=Math.floor(h);E<g;E++)for(let M=Math.floor(y);M<v;M++)b.push({x:E,y:M,z:t});return b}function fx({viewport:s,maxZoom:t,minZoom:i,zRange:r,extent:o,tileSize:c=Dn,modelMatrix:d,modelMatrixInverse:h,zoomOffset:y=0}){let g=s.isGeospatial?Math.round(s.zoom+Math.log2(Dn/c))+y:Math.ceil(s.zoom)+y;if(typeof i=="number"&&Number.isFinite(i)&&g<i){if(!o)return[];g=i}typeof t=="number"&&Number.isFinite(t)&&g>t&&(g=t);let v=o;return d&&h&&o&&!s.isGeospatial&&(v=Eh(o,d)),s.isGeospatial?ex(s,g,r,o):ux(s,g,c,v||ix,h)}function dx(s){let t={},i;return r=>{for(const o in r)if(!hx(r[o],t[o])){i=s(r),t=r;break}return i}}function hx(s,t){if(s===t)return!0;if(Array.isArray(s)){const i=s.length;if(!t||t.length!==i)return!1;for(let r=0;r<i;r++)if(s[r]!==t[r])return!1;return!0}return!1}const tv=1,iu=2,yx="never",px="no-overlap",Oh="best-available",gx=5,mx={[Oh]:bx,[px]:Sx,[yx]:()=>{}},vx={extent:null,tileSize:512,maxZoom:null,minZoom:null,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:"best-available",zRange:null,maxRequests:6,debounceTime:0,zoomOffset:0,onTileLoad:()=>{},onTileUnload:()=>{},onTileError:()=>{}};class _x{constructor(t){this._getCullBounds=dx(lx),this.opts={...vx,...t},this.setOptions(this.opts),this.onTileLoad=i=>{this.opts.onTileLoad?.(i),this.opts.maxCacheByteSize!==null&&(this._cacheByteSize+=i.byteLength,this._resizeCache())},this._requestScheduler=new IT({throttleRequests:this.opts.maxRequests>0||this.opts.debounceTime>0,maxRequests:this.opts.maxRequests,debounceTime:this.opts.debounceTime}),this._cache=new Map,this._tiles=[],this._dirty=!1,this._cacheByteSize=0,this._viewport=null,this._zRange=null,this._selectedTiles=null,this._frameNumber=0,this._modelMatrix=new Oa,this._modelMatrixInverse=new Oa}get tiles(){return this._tiles}get selectedTiles(){return this._selectedTiles}get isLoaded(){return this._selectedTiles!==null&&this._selectedTiles.every(t=>t.isLoaded)}get needsReload(){return this._selectedTiles!==null&&this._selectedTiles.some(t=>t.needsReload)}setOptions(t){Object.assign(this.opts,t),Number.isFinite(t.maxZoom)&&(this._maxZoom=Math.floor(t.maxZoom)),Number.isFinite(t.minZoom)&&(this._minZoom=Math.ceil(t.minZoom))}finalize(){for(const t of this._cache.values())t.isLoading&&t.abort();this._cache.clear(),this._tiles=[],this._selectedTiles=null}reloadAll(){for(const t of this._cache.keys()){const i=this._cache.get(t);!this._selectedTiles||!this._selectedTiles.includes(i)?this._cache.delete(t):i.setNeedsReload()}}update(t,{zRange:i,modelMatrix:r}={zRange:null,modelMatrix:null}){const o=r?new Oa(r):new Oa,c=!o.equals(this._modelMatrix);if(!this._viewport||!t.equals(this._viewport)||!sc(this._zRange,i)||c){c&&(this._modelMatrixInverse=o.clone().invert(),this._modelMatrix=o),this._viewport=t,this._zRange=i;const h=this.getTileIndices({viewport:t,maxZoom:this._maxZoom,minZoom:this._minZoom,zRange:i,modelMatrix:this._modelMatrix,modelMatrixInverse:this._modelMatrixInverse});this._selectedTiles=h.map(y=>this._getTile(y,!0)),this._dirty&&this._rebuildTree()}else this.needsReload&&(this._selectedTiles=this._selectedTiles.map(h=>this._getTile(h.index,!0)));const d=this.updateTileStates();return this._pruneRequests(),this._dirty&&this._resizeCache(),d&&this._frameNumber++,this._frameNumber}isTileVisible(t,i,r){if(!t.isVisible)return!1;if(i&&this._viewport){const o=this._getCullBounds({viewport:this._viewport,z:this._zRange,cullRect:i});let{bbox:c}=t;for(const[d,h,y,g]of o){let v;if("west"in c)v=c.west<y&&c.east>d&&c.south<g&&c.north>h;else{if(r&&!Oa.IDENTITY.equals(r)){const[M,V,j,H]=Eh([c.left,c.top,c.right,c.bottom],r);c={left:M,top:V,right:j,bottom:H}}const b=Math.min(c.top,c.bottom),E=Math.max(c.top,c.bottom);v=c.left<y&&c.right>d&&b<g&&E>h}if(v)return!0}return!1}return!0}getTileIndices({viewport:t,maxZoom:i,minZoom:r,zRange:o,modelMatrix:c,modelMatrixInverse:d}){const{tileSize:h,extent:y,zoomOffset:g}=this.opts;return fx({viewport:t,maxZoom:i,minZoom:r,zRange:o,tileSize:h,extent:y,modelMatrix:c,modelMatrixInverse:d,zoomOffset:g})}getTileId(t){return`${t.x}-${t.y}-${t.z}`}getTileZoom(t){return t.z}getTileMetadata(t){const{tileSize:i}=this.opts;return{bbox:cx(this._viewport,t.x,t.y,t.z,i)}}getParentIndex(t){const i=Math.floor(t.x/2),r=Math.floor(t.y/2),o=t.z-1;return{x:i,y:r,z:o}}updateTileStates(){const t=this.opts.refinementStrategy||Oh,i=new Array(this._cache.size);let r=0;for(const o of this._cache.values())i[r++]=o.isVisible,o.isSelected=!1,o.isVisible=!1;for(const o of this._selectedTiles)o.isSelected=!0,o.isVisible=!0;(typeof t=="function"?t:mx[t])(Array.from(this._cache.values())),r=0;for(const o of this._cache.values())if(i[r++]!==o.isVisible)return!0;return!1}_pruneRequests(){const{maxRequests:t=0}=this.opts,i=[];let r=0;for(const o of this._cache.values())o.isLoading&&(r++,!o.isSelected&&!o.isVisible&&i.push(o));for(;t>0&&r>t&&i.length>0;)i.shift().abort(),r--}_rebuildTree(){const{_cache:t}=this;for(const i of t.values())i.parent=null,i.children&&(i.children.length=0);for(const i of t.values()){const r=this._getNearestAncestor(i);i.parent=r,r?.children&&r.children.push(i)}}_resizeCache(){const{_cache:t,opts:i}=this,r=i.maxCacheSize??(i.maxCacheByteSize!==null?1/0:gx*this.selectedTiles.length),o=i.maxCacheByteSize??1/0;if(t.size>r||this._cacheByteSize>o){for(const[d,h]of t)if(!h.isVisible&&!h.isSelected&&(this._cacheByteSize-=i.maxCacheByteSize!==null?h.byteLength:0,t.delete(d),this.opts.onTileUnload?.(h)),t.size<=r&&this._cacheByteSize<=o)break;this._rebuildTree(),this._dirty=!0}this._dirty&&(this._tiles=Array.from(this._cache.values()).sort((d,h)=>d.zoom-h.zoom),this._dirty=!1)}_getTile(t,i){const r=this.getTileId(t);let o=this._cache.get(r),c=!1;return!o&&i?(o=new RA(t),Object.assign(o,this.getTileMetadata(o.index)),Object.assign(o,{id:r,zoom:this.getTileZoom(o.index)}),c=!0,this._cache.set(r,o),this._dirty=!0):o&&o.needsReload&&(c=!0),o&&c&&o.loadData({getData:this.opts.getTileData,requestScheduler:this._requestScheduler,onLoad:this.onTileLoad,onError:this.opts.onTileError}),o}_getNearestAncestor(t){const{_minZoom:i=0}=this;let r=t.index;for(;this.getTileZoom(r)>i;){r=this.getParentIndex(r);const o=this._getTile(r);if(o)return o}return null}}function bx(s){for(const t of s)t.state=0;for(const t of s)t.isSelected&&!Xv(t)&&Mh(t);for(const t of s)t.isVisible=!!(t.state&iu)}function Sx(s){for(const i of s)i.state=0;for(const i of s)i.isSelected&&Xv(i);const t=Array.from(s).sort((i,r)=>i.zoom-r.zoom);for(const i of t)if(i.isVisible=!!(i.state&iu),i.children&&(i.isVisible||i.state&tv))for(const r of i.children)r.state=tv;else i.isSelected&&Mh(i)}function Xv(s){let t=s;for(;t;){if(t.isLoaded||t.content)return t.state|=iu,!0;t=t.parent}return!1}function Mh(s){for(const t of s.children)t.isLoaded||t.content?t.state|=iu:Mh(t)}const Tx={TilesetClass:_x,data:{type:"data",value:[]},dataComparator:nx.equal,renderSubLayers:{type:"function",value:s=>new eu(s)},getTileData:{type:"function",optional:!0,value:null},onViewportLoad:{type:"function",optional:!0,value:null},onTileLoad:{type:"function",value:s=>{}},onTileUnload:{type:"function",value:s=>{}},onTileError:{type:"function",value:s=>console.error(s)},extent:{type:"array",optional:!0,value:null,compare:!0},tileSize:512,maxZoom:null,minZoom:0,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:Oh,zRange:null,maxRequests:6,debounceTime:0,zoomOffset:0};class Lh extends yh{initializeState(){this.state={tileset:null,isLoaded:!1}}finalizeState(){this.state?.tileset?.finalize()}get isLoaded(){return!!this.state?.tileset?.selectedTiles?.every(t=>t.isLoaded&&t.layers&&t.layers.every(i=>i.isLoaded))}shouldUpdateState({changeFlags:t}){return t.somethingChanged}updateState({changeFlags:t}){let{tileset:i}=this.state;const r=t.propsOrDataChanged||t.updateTriggersChanged,o=t.dataChanged||t.updateTriggersChanged&&(t.updateTriggersChanged.all||t.updateTriggersChanged.getTileData);i?r&&(i.setOptions(this._getTilesetOptions()),o?i.reloadAll():i.tiles.forEach(c=>{c.layers=null})):(i=new this.props.TilesetClass(this._getTilesetOptions()),this.setState({tileset:i})),this._updateTileset()}_getTilesetOptions(){const{tileSize:t,maxCacheSize:i,maxCacheByteSize:r,refinementStrategy:o,extent:c,maxZoom:d,minZoom:h,maxRequests:y,debounceTime:g,zoomOffset:v}=this.props;return{maxCacheSize:i,maxCacheByteSize:r,maxZoom:d,minZoom:h,tileSize:t,refinementStrategy:o,extent:c,maxRequests:y,debounceTime:g,zoomOffset:v,getTileData:this.getTileData.bind(this),onTileLoad:this._onTileLoad.bind(this),onTileError:this._onTileError.bind(this),onTileUnload:this._onTileUnload.bind(this)}}_updateTileset(){const t=this.state.tileset,{zRange:i,modelMatrix:r}=this.props,o=t.update(this.context.viewport,{zRange:i,modelMatrix:r}),{isLoaded:c}=t,d=this.state.isLoaded!==c,h=this.state.frameNumber!==o;c&&(d||h)&&this._onViewportLoad(),h&&this.setState({frameNumber:o}),this.state.isLoaded=c}_onViewportLoad(){const{tileset:t}=this.state,{onViewportLoad:i}=this.props;i&&i(t.selectedTiles)}_onTileLoad(t){this.props.onTileLoad(t),t.layers=null,this.setNeedsUpdate()}_onTileError(t,i){this.props.onTileError(t),i.layers=null,this.setNeedsUpdate()}_onTileUnload(t){this.props.onTileUnload(t)}getTileData(t){const{data:i,getTileData:r,fetch:o}=this.props,{signal:c}=t;return t.url=typeof i=="string"||Array.isArray(i)?ax(i,t):null,r?r(t):o&&t.url?o(t.url,{propName:"data",layer:this,signal:c}):null}renderSubLayers(t){return this.props.renderSubLayers(t)}getSubLayerPropsByTile(t){return null}getPickingInfo(t){const i=t.sourceLayer,r=i.props.tile,o=t.info;return o.picked&&(o.tile=r),o.sourceTile=r,o.sourceTileSubLayer=i,o}_updateAutoHighlight(t){t.sourceTileSubLayer.updateAutoHighlight(t)}renderLayers(){return this.state.tileset.tiles.map(t=>{const i=this.getSubLayerPropsByTile(t);if(!(!t.isLoaded&&!t.content))if(t.layers)i&&t.layers[0]&&Object.keys(i).some(r=>t.layers[0].props[r]!==i[r])&&(t.layers=t.layers.map(r=>r.clone(i)));else{const r=this.renderSubLayers({...this.props,...this.getSubLayerProps({id:t.id,updateTriggers:this.props.updateTriggers}),data:t.content,_offset:0,tile:t});t.layers=RT(r,Boolean).map(o=>o.clone({tile:t,...i}))}return t.layers})}filterSubLayer({layer:t,cullRect:i}){const{tile:r}=t.props,{modelMatrix:o}=this.props;return this.state.tileset.isTileVisible(r,i,o?new Oa(o):null)}}Lh.defaultProps=Tx;Lh.layerName="TileLayer";function Ax(s){const{data:t}=s,i=new Lh({data:"https://cyberjapandata.gsi.go.jp/xyz/pale/{z}/{x}/{y}.png",minZoom:0,maxZoom:19,tileSize:256,renderSubLayers:o=>{const{bbox:{west:c,south:d,east:h,north:y}}=o.tile;return new ph(o,{data:null,image:o.data,bounds:[c,d,h,y]})}}),r=new eu({id:"geojson-layer",data:t,pickable:!0,stroked:!1,filled:!0,pointType:"circle",pointRadiusMinPixels:5,getPointRadius:10,getFillColor:[255,0,0]});return[i,r]}function ut(s,t,i,r){function o(c){return c instanceof i?c:new i(function(d){d(c)})}return new(i||(i=Promise))(function(c,d){function h(v){try{g(r.next(v))}catch(b){d(b)}}function y(v){try{g(r.throw(v))}catch(b){d(b)}}function g(v){v.done?c(v.value):o(v.value).then(h,y)}g((r=r.apply(s,t||[])).next())})}function ev(s){var t=typeof Symbol=="function"&&Symbol.iterator,i=t&&s[t],r=0;if(i)return i.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&r>=s.length&&(s=void 0),{value:s&&s[r++],done:!s}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function pt(s){return this instanceof pt?(this.v=s,this):new pt(s)}function Wi(s,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=i.apply(s,t||[]),o,c=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",d),o[Symbol.asyncIterator]=function(){return this},o;function d(M){return function(V){return Promise.resolve(V).then(M,b)}}function h(M,V){r[M]&&(o[M]=function(j){return new Promise(function(H,q){c.push([M,j,H,q])>1||y(M,j)})},V&&(o[M]=V(o[M])))}function y(M,V){try{g(r[M](V))}catch(j){E(c[0][3],j)}}function g(M){M.value instanceof pt?Promise.resolve(M.value.v).then(v,b):E(c[0][2],M)}function v(M){y("next",M)}function b(M){y("throw",M)}function E(M,V){M(V),c.shift(),c.length&&y(c[0][0],c[0][1])}}function cc(s){var t,i;return t={},r("next"),r("throw",function(o){throw o}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(o,c){t[o]=s[o]?function(d){return(i=!i)?{value:pt(s[o](d)),done:!1}:c?c(d):d}:c}}function Fs(s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=s[Symbol.asyncIterator],i;return t?t.call(s):(s=typeof ev=="function"?ev(s):s[Symbol.iterator](),i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i);function r(c){i[c]=s[c]&&function(d){return new Promise(function(h,y){d=s[c](d),o(h,y,d.done,d.value)})}}function o(c,d,h,y){Promise.resolve(y).then(function(g){c({value:g,done:h})},d)}}const xx=new TextDecoder("utf-8"),th=s=>xx.decode(s),Ex=new TextEncoder,Ch=s=>Ex.encode(s),wx=s=>typeof s=="number",Kv=s=>typeof s=="boolean",Se=s=>typeof s=="function",We=s=>s!=null&&Object(s)===s,Ps=s=>We(s)&&Se(s.then),Al=s=>We(s)&&Se(s[Symbol.iterator]),er=s=>We(s)&&Se(s[Symbol.asyncIterator]),eh=s=>We(s)&&We(s.schema),Wv=s=>We(s)&&"done"in s&&"value"in s,Jv=s=>We(s)&&Se(s.stat)&&wx(s.fd),$v=s=>We(s)&&Dh(s.body),nu=s=>"_getDOMStream"in s&&"_getNodeStream"in s,Ox=s=>We(s)&&Se(s.abort)&&Se(s.getWriter)&&!nu(s),Dh=s=>We(s)&&Se(s.cancel)&&Se(s.getReader)&&!nu(s),Mx=s=>We(s)&&Se(s.end)&&Se(s.write)&&Kv(s.writable)&&!nu(s),t_=s=>We(s)&&Se(s.read)&&Se(s.pipe)&&Kv(s.readable)&&!nu(s),Lx=s=>We(s)&&Se(s.clear)&&Se(s.bytes)&&Se(s.position)&&Se(s.setPosition)&&Se(s.capacity)&&Se(s.getBufferIdentifier)&&Se(s.createLong),Bh=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function Cx(s){const t=s[0]?[s[0]]:[];let i,r,o,c;for(let d,h,y=0,g=0,v=s.length;++y<v;){if(d=t[g],h=s[y],!d||!h||d.buffer!==h.buffer||h.byteOffset<d.byteOffset){h&&(t[++g]=h);continue}if({byteOffset:i,byteLength:o}=d,{byteOffset:r,byteLength:c}=h,i+o<r||r+c<i){h&&(t[++g]=h);continue}t[g]=new Uint8Array(d.buffer,i,r-i+c)}return t}function iv(s,t,i=0,r=t.byteLength){const o=s.byteLength,c=new Uint8Array(s.buffer,s.byteOffset,o),d=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,o));return c.set(d,i),s}function tn(s,t){const i=Cx(s),r=i.reduce((v,b)=>v+b.byteLength,0);let o,c,d,h=0,y=-1;const g=Math.min(t||Number.POSITIVE_INFINITY,r);for(const v=i.length;++y<v;){if(o=i[y],c=o.subarray(0,Math.min(o.length,g-h)),g<=h+c.length){c.length<o.length?i[y]=o.subarray(c.length):c.length===o.length&&y++,d?iv(d,c,h):d=c;break}iv(d||(d=new Uint8Array(g)),c,h),h+=c.length}return[d||new Uint8Array(0),i.slice(y),r-(d?d.byteLength:0)]}function qt(s,t){let i=Wv(t)?t.value:t;return i instanceof s?s===Uint8Array?new s(i.buffer,i.byteOffset,i.byteLength):i:i?(typeof i=="string"&&(i=Ch(i)),i instanceof ArrayBuffer?new s(i):i instanceof Bh?new s(i):Lx(i)?qt(s,i.bytes()):ArrayBuffer.isView(i)?i.byteLength<=0?new s(0):new s(i.buffer,i.byteOffset,i.byteLength/s.BYTES_PER_ELEMENT):s.from(i)):new s(0)}const tl=s=>qt(Int32Array,s),nv=s=>qt(BigInt64Array,s),Et=s=>qt(Uint8Array,s),ih=s=>(s.next(),s);function*Dx(s,t){const i=function*(o){yield o},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof Bh?i(t):Al(t)?t:i(t);return yield*ih((function*(o){let c=null;do c=o.next(yield qt(s,c));while(!c.done)})(r[Symbol.iterator]())),new s}const Bx=s=>Dx(Uint8Array,s);function e_(s,t){return Wi(this,arguments,function*(){if(Ps(t))return yield pt(yield pt(yield*cc(Fs(e_(s,yield pt(t))))));const r=function(d){return Wi(this,arguments,function*(){yield yield pt(yield pt(d))})},o=function(d){return Wi(this,arguments,function*(){yield pt(yield*cc(Fs(ih((function*(h){let y=null;do y=h.next(yield y?.value);while(!y.done)})(d[Symbol.iterator]())))))})},c=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof Bh?r(t):Al(t)?o(t):er(t)?t:r(t);return yield pt(yield*cc(Fs(ih((function(d){return Wi(this,arguments,function*(){let h=null;do h=yield pt(d.next(yield yield pt(qt(s,h))));while(!h.done)})})(c[Symbol.asyncIterator]()))))),yield pt(new s)})}const Ix=s=>e_(Uint8Array,s);function i_(s,t,i){if(s!==0){i=i.slice(0,t);for(let r=-1,o=i.length;++r<o;)i[r]+=s}return i.subarray(0,t)}function Rx(s,t){let i=0;const r=s.length;if(r!==t.length)return!1;if(r>0)do if(s[i]!==t[i])return!1;while(++i<r);return!0}const xi={fromIterable(s){return ec(Nx(s))},fromAsyncIterable(s){return ec(zx(s))},fromDOMStream(s){return ec(Ux(s))},fromNodeStream(s){return ec(Px(s))},toDOMStream(s,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(s,t){throw new Error('"toNodeStream" not available in this environment')}},ec=s=>(s.next(),s);function*Nx(s){let t,i=!1,r=[],o,c,d,h=0;function y(){return c==="peek"?tn(r,d)[0]:([o,r,h]=tn(r,d),o)}({cmd:c,size:d}=(yield null)||{cmd:"read",size:0});const g=Bx(s)[Symbol.iterator]();try{do if({done:t,value:o}=Number.isNaN(d-h)?g.next():g.next(d-h),!t&&o.byteLength>0&&(r.push(o),h+=o.byteLength),t||d<=h)do({cmd:c,size:d}=yield y());while(d<h);while(!t)}catch(v){(i=!0)&&typeof g.throw=="function"&&g.throw(v)}finally{i===!1&&typeof g.return=="function"&&g.return(null)}return null}function zx(s){return Wi(this,arguments,function*(){let i,r=!1,o=[],c,d,h,y=0;function g(){return d==="peek"?tn(o,h)[0]:([c,o,y]=tn(o,h),c)}({cmd:d,size:h}=(yield yield pt(null))||{cmd:"read",size:0});const v=Ix(s)[Symbol.asyncIterator]();try{do if({done:i,value:c}=Number.isNaN(h-y)?yield pt(v.next()):yield pt(v.next(h-y)),!i&&c.byteLength>0&&(o.push(c),y+=c.byteLength),i||h<=y)do({cmd:d,size:h}=yield yield pt(g()));while(h<y);while(!i)}catch(b){(r=!0)&&typeof v.throw=="function"&&(yield pt(v.throw(b)))}finally{r===!1&&typeof v.return=="function"&&(yield pt(v.return(new Uint8Array(0))))}return yield pt(null)})}function Ux(s){return Wi(this,arguments,function*(){let i=!1,r=!1,o=[],c,d,h,y=0;function g(){return d==="peek"?tn(o,h)[0]:([c,o,y]=tn(o,h),c)}({cmd:d,size:h}=(yield yield pt(null))||{cmd:"read",size:0});const v=new Fx(s);try{do if({done:i,value:c}=Number.isNaN(h-y)?yield pt(v.read()):yield pt(v.read(h-y)),!i&&c.byteLength>0&&(o.push(Et(c)),y+=c.byteLength),i||h<=y)do({cmd:d,size:h}=yield yield pt(g()));while(h<y);while(!i)}catch(b){(r=!0)&&(yield pt(v.cancel(b)))}finally{r===!1?yield pt(v.cancel()):s.locked&&v.releaseLock()}return yield pt(null)})}class Fx{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return ut(this,void 0,void 0,function*(){const{reader:i,source:r}=this;i&&(yield i.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return ut(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const i=yield this.reader.read();return!i.done&&(i.value=Et(i)),i})}}const Nd=(s,t)=>{const i=o=>r([t,o]);let r;return[t,i,new Promise(o=>(r=o)&&s.once(t,i))]};function Px(s){return Wi(this,arguments,function*(){const i=[];let r="error",o=!1,c=null,d,h,y=0,g=[],v;function b(){return d==="peek"?tn(g,h)[0]:([v,g,y]=tn(g,h),v)}if({cmd:d,size:h}=(yield yield pt(null))||{cmd:"read",size:0},s.isTTY)return yield yield pt(new Uint8Array(0)),yield pt(null);try{i[0]=Nd(s,"end"),i[1]=Nd(s,"error");do{if(i[2]=Nd(s,"readable"),[r,c]=yield pt(Promise.race(i.map(M=>M[2]))),r==="error")break;if((o=r==="end")||(Number.isFinite(h-y)?(v=Et(s.read(h-y)),v.byteLength<h-y&&(v=Et(s.read()))):v=Et(s.read()),v.byteLength>0&&(g.push(v),y+=v.byteLength)),o||h<=y)do({cmd:d,size:h}=yield yield pt(b()));while(h<y)}while(!o)}finally{yield pt(E(i,r==="error"?c:null))}return yield pt(null);function E(M,V){return v=g=null,new Promise((j,H)=>{for(const[q,dt]of M)s.off(q,dt);try{const q=s.destroy;q&&q.call(s,V),V=void 0}catch(q){V=q||V}finally{V!=null?H(V):j()}})}})}var ye;(function(s){s[s.V1=0]="V1",s[s.V2=1]="V2",s[s.V3=2]="V3",s[s.V4=3]="V4",s[s.V5=4]="V5"})(ye||(ye={}));var Ie;(function(s){s[s.Sparse=0]="Sparse",s[s.Dense=1]="Dense"})(Ie||(Ie={}));var Be;(function(s){s[s.HALF=0]="HALF",s[s.SINGLE=1]="SINGLE",s[s.DOUBLE=2]="DOUBLE"})(Be||(Be={}));var Mi;(function(s){s[s.DAY=0]="DAY",s[s.MILLISECOND=1]="MILLISECOND"})(Mi||(Mi={}));var st;(function(s){s[s.SECOND=0]="SECOND",s[s.MILLISECOND=1]="MILLISECOND",s[s.MICROSECOND=2]="MICROSECOND",s[s.NANOSECOND=3]="NANOSECOND"})(st||(st={}));var en;(function(s){s[s.YEAR_MONTH=0]="YEAR_MONTH",s[s.DAY_TIME=1]="DAY_TIME",s[s.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(en||(en={}));const zd=2,Zi=4,Mn=4,Pt=4,cs=new Int32Array(2),sv=new Float32Array(cs.buffer),av=new Float64Array(cs.buffer),ic=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var nh;(function(s){s[s.UTF8_BYTES=1]="UTF8_BYTES",s[s.UTF16_STRING=2]="UTF16_STRING"})(nh||(nh={}));let Qa=class n_{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new n_(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return cs[0]=this.readInt32(t),sv[0]}readFloat64(t){return cs[ic?0:1]=this.readInt32(t),cs[ic?1:0]=this.readInt32(t+4),av[0]}writeInt8(t,i){this.bytes_[t]=i}writeUint8(t,i){this.bytes_[t]=i}writeInt16(t,i){this.bytes_[t]=i,this.bytes_[t+1]=i>>8}writeUint16(t,i){this.bytes_[t]=i,this.bytes_[t+1]=i>>8}writeInt32(t,i){this.bytes_[t]=i,this.bytes_[t+1]=i>>8,this.bytes_[t+2]=i>>16,this.bytes_[t+3]=i>>24}writeUint32(t,i){this.bytes_[t]=i,this.bytes_[t+1]=i>>8,this.bytes_[t+2]=i>>16,this.bytes_[t+3]=i>>24}writeInt64(t,i){this.writeInt32(t,Number(BigInt.asIntN(32,i))),this.writeInt32(t+4,Number(BigInt.asIntN(32,i>>BigInt(32))))}writeUint64(t,i){this.writeUint32(t,Number(BigInt.asUintN(32,i))),this.writeUint32(t+4,Number(BigInt.asUintN(32,i>>BigInt(32))))}writeFloat32(t,i){sv[0]=i,this.writeInt32(t,cs[0])}writeFloat64(t,i){av[0]=i,this.writeInt32(t,cs[ic?0:1]),this.writeInt32(t+4,cs[ic?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Zi+Mn)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let i=0;i<Mn;i++)t+=String.fromCharCode(this.readInt8(this.position_+Zi+i));return t}__offset(t,i){const r=t-this.readInt32(t);return i<this.readInt16(r)?this.readInt16(r+i):0}__union(t,i){return t.bb_pos=i+this.readInt32(i),t.bb=this,t}__string(t,i){t+=this.readInt32(t);const r=this.readInt32(t);t+=Zi;const o=this.bytes_.subarray(t,t+r);return i===nh.UTF8_BYTES?o:this.text_decoder_.decode(o)}__union_with_string(t,i){return typeof t=="string"?this.__string(i):this.__union(t,i)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+Zi}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=Mn)throw new Error("FlatBuffers: file identifier must be length "+Mn);for(let i=0;i<Mn;i++)if(t.charCodeAt(i)!=this.readInt8(this.position()+Zi+i))return!1;return!0}createScalarList(t,i){const r=[];for(let o=0;o<i;++o){const c=t(o);c!==null&&r.push(c)}return r}createObjList(t,i){const r=[];for(let o=0;o<i;++o){const c=t(o);c!==null&&r.push(c.unpack())}return r}},s_=class a_{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let i;t?i=t:i=1024,this.bb=Qa.allocate(i),this.space=i}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,i){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+i)+1&t-1;for(;this.space<r+t+i;){const o=this.bb.capacity();this.bb=a_.growByteBuffer(this.bb),this.space+=this.bb.capacity()-o}this.pad(r)}pad(t){for(let i=0;i<t;i++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,i,r){(this.force_defaults||i!=r)&&(this.addInt8(i),this.slot(t))}addFieldInt16(t,i,r){(this.force_defaults||i!=r)&&(this.addInt16(i),this.slot(t))}addFieldInt32(t,i,r){(this.force_defaults||i!=r)&&(this.addInt32(i),this.slot(t))}addFieldInt64(t,i,r){(this.force_defaults||i!==r)&&(this.addInt64(i),this.slot(t))}addFieldFloat32(t,i,r){(this.force_defaults||i!=r)&&(this.addFloat32(i),this.slot(t))}addFieldFloat64(t,i,r){(this.force_defaults||i!=r)&&(this.addFloat64(i),this.slot(t))}addFieldOffset(t,i,r){(this.force_defaults||i!=r)&&(this.addOffset(i),this.slot(t))}addFieldStruct(t,i,r){i!=r&&(this.nested(i),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const i=t.capacity();if(i&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=i<<1,o=Qa.allocate(r);return o.setPosition(r-i),o.bytes().set(t.bytes(),r-i),o}addOffset(t){this.prep(Zi,0),this.writeInt32(this.offset()-t+Zi)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let i=0;i<t;i++)this.vtable[i]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let i=this.vtable_in_use-1;for(;i>=0&&this.vtable[i]==0;i--);const r=i+1;for(;i>=0;i--)this.addInt16(this.vtable[i]!=0?t-this.vtable[i]:0);const o=2;this.addInt16(t-this.object_start);const c=(r+o)*zd;this.addInt16(c);let d=0;const h=this.space;t:for(i=0;i<this.vtables.length;i++){const y=this.bb.capacity()-this.vtables[i];if(c==this.bb.readInt16(y)){for(let g=zd;g<c;g+=zd)if(this.bb.readInt16(h+g)!=this.bb.readInt16(y+g))continue t;d=this.vtables[i];break}}return d?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,d-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,i,r){const o=r?Pt:0;if(i){const c=i;if(this.prep(this.minalign,Zi+Mn+o),c.length!=Mn)throw new TypeError("FlatBuffers: file identifier must be length "+Mn);for(let d=Mn-1;d>=0;d--)this.writeInt8(c.charCodeAt(d))}this.prep(this.minalign,Zi+o),this.addOffset(t),o&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,i){this.finish(t,i,!0)}requiredField(t,i){const r=this.bb.capacity()-t,o=r-this.bb.readInt32(r);if(!(i<this.bb.readInt16(o)&&this.bb.readInt16(o+i)!=0))throw new TypeError("FlatBuffers: field "+i+" must be set")}startVector(t,i,r){this.notNested(),this.vector_num_elems=i,this.prep(Zi,t*i),this.prep(r,t*i)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const i=this.createString(t);return this.string_maps.set(t,i),i}createString(t){if(t==null)return 0;let i;return t instanceof Uint8Array?i=t:i=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,i.length,1),this.bb.setPosition(this.space-=i.length),this.bb.bytes().set(i,this.space),this.endVector()}createByteVector(t){return t==null?0:(this.startVector(1,t.length,1),this.bb.setPosition(this.space-=t.length),this.bb.bytes().set(t,this.space),this.endVector())}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const i=[];for(let r=0;r<t.length;++r){const o=t[r];if(o!==null)i.push(this.createObjectOffset(o));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return i}createStructOffsetList(t,i){return i(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};var Ac;(function(s){s[s.BUFFER=0]="BUFFER"})(Ac||(Ac={}));var xc;(function(s){s[s.LZ4_FRAME=0]="LZ4_FRAME",s[s.ZSTD=1]="ZSTD"})(xc||(xc={}));class us{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsBodyCompression(t,i){return(i||new us).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,i){return t.setPosition(t.position()+Pt),(i||new us).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):xc.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):Ac.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,i){t.addFieldInt8(0,i,xc.LZ4_FRAME)}static addMethod(t,i){t.addFieldInt8(1,i,Ac.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,i,r){return us.startBodyCompression(t),us.addCodec(t,i),us.addMethod(t,r),us.endBodyCompression(t)}}class r_{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,i,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(i??0)),t.offset()}}let l_=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,i,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(i??0)),t.offset()}},En=class sh{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsRecordBatch(t,i){return(i||new sh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,i){return t.setPosition(t.position()+Pt),(i||new sh).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,i){const r=this.bb.__offset(this.bb_pos,6);return r?(i||new l_).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,i){const r=this.bb.__offset(this.bb_pos,8);return r?(i||new r_).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const i=this.bb.__offset(this.bb_pos,10);return i?(t||new us).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,i){t.addFieldInt64(0,i,BigInt("0"))}static addNodes(t,i){t.addFieldOffset(1,i,0)}static startNodesVector(t,i){t.startVector(16,i,8)}static addBuffers(t,i){t.addFieldOffset(2,i,0)}static startBuffersVector(t,i){t.startVector(16,i,8)}static addCompression(t,i){t.addFieldOffset(3,i,0)}static endRecordBatch(t){return t.endObject()}},Ma=class ah{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsDictionaryBatch(t,i){return(i||new ah).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,i){return t.setPosition(t.position()+Pt),(i||new ah).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const i=this.bb.__offset(this.bb_pos,6);return i?(t||new En).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,i){t.addFieldInt64(0,i,BigInt("0"))}static addData(t,i){t.addFieldOffset(1,i,0)}static addIsDelta(t,i){t.addFieldInt8(2,+i,0)}static endDictionaryBatch(t){return t.endObject()}};var Za;(function(s){s[s.Little=0]="Little",s[s.Big=1]="Big"})(Za||(Za={}));var Ec;(function(s){s[s.DenseArray=0]="DenseArray"})(Ec||(Ec={}));class ui{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsInt(t,i){return(i||new ui).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,i){return t.setPosition(t.position()+Pt),(i||new ui).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,i){t.addFieldInt32(0,i,0)}static addIsSigned(t,i){t.addFieldInt8(1,+i,0)}static endInt(t){return t.endObject()}static createInt(t,i,r){return ui.startInt(t),ui.addBitWidth(t,i),ui.addIsSigned(t,r),ui.endInt(t)}}class Ln{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsDictionaryEncoding(t,i){return(i||new Ln).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,i){return t.setPosition(t.position()+Pt),(i||new Ln).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const i=this.bb.__offset(this.bb_pos,6);return i?(t||new ui).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):Ec.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,i){t.addFieldInt64(0,i,BigInt("0"))}static addIndexType(t,i){t.addFieldOffset(1,i,0)}static addIsOrdered(t,i){t.addFieldInt8(2,+i,0)}static addDictionaryKind(t,i){t.addFieldInt16(3,i,Ec.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class Te{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsKeyValue(t,i){return(i||new Te).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,i){return t.setPosition(t.position()+Pt),(i||new Te).__init(t.readInt32(t.position())+t.position(),t)}key(t){const i=this.bb.__offset(this.bb_pos,4);return i?this.bb.__string(this.bb_pos+i,t):null}value(t){const i=this.bb.__offset(this.bb_pos,6);return i?this.bb.__string(this.bb_pos+i,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,i){t.addFieldOffset(0,i,0)}static addValue(t,i){t.addFieldOffset(1,i,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,i,r){return Te.startKeyValue(t),Te.addKey(t,i),Te.addValue(t,r),Te.endKeyValue(t)}}let rv=class il{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsBinary(t,i){return(i||new il).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,i){return t.setPosition(t.position()+Pt),(i||new il).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return il.startBinary(t),il.endBinary(t)}},lv=class nl{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsBool(t,i){return(i||new nl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,i){return t.setPosition(t.position()+Pt),(i||new nl).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return nl.startBool(t),nl.endBool(t)}},uc=class La{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsDate(t,i){return(i||new La).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,i){return t.setPosition(t.position()+Pt),(i||new La).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Mi.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,i){t.addFieldInt16(0,i,Mi.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,i){return La.startDate(t),La.addUnit(t,i),La.endDate(t)}},Ca=class os{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsDecimal(t,i){return(i||new os).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,i){return t.setPosition(t.position()+Pt),(i||new os).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,i){t.addFieldInt32(0,i,0)}static addScale(t,i){t.addFieldInt32(1,i,0)}static addBitWidth(t,i){t.addFieldInt32(2,i,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,i,r,o){return os.startDecimal(t),os.addPrecision(t,i),os.addScale(t,r),os.addBitWidth(t,o),os.endDecimal(t)}},fc=class Da{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsDuration(t,i){return(i||new Da).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,i){return t.setPosition(t.position()+Pt),(i||new Da).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):st.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,i){t.addFieldInt16(0,i,st.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,i){return Da.startDuration(t),Da.addUnit(t,i),Da.endDuration(t)}},dc=class Ba{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsFixedSizeBinary(t,i){return(i||new Ba).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,i){return t.setPosition(t.position()+Pt),(i||new Ba).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,i){t.addFieldInt32(0,i,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,i){return Ba.startFixedSizeBinary(t),Ba.addByteWidth(t,i),Ba.endFixedSizeBinary(t)}},hc=class Ia{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsFixedSizeList(t,i){return(i||new Ia).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,i){return t.setPosition(t.position()+Pt),(i||new Ia).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,i){t.addFieldInt32(0,i,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,i){return Ia.startFixedSizeList(t),Ia.addListSize(t,i),Ia.endFixedSizeList(t)}};class Xi{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsFloatingPoint(t,i){return(i||new Xi).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,i){return t.setPosition(t.position()+Pt),(i||new Xi).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Be.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,i){t.addFieldInt16(0,i,Be.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,i){return Xi.startFloatingPoint(t),Xi.addPrecision(t,i),Xi.endFloatingPoint(t)}}class Ki{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsInterval(t,i){return(i||new Ki).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,i){return t.setPosition(t.position()+Pt),(i||new Ki).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):en.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,i){t.addFieldInt16(0,i,en.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,i){return Ki.startInterval(t),Ki.addUnit(t,i),Ki.endInterval(t)}}let ov=class sl{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsLargeBinary(t,i){return(i||new sl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsLargeBinary(t,i){return t.setPosition(t.position()+Pt),(i||new sl).__init(t.readInt32(t.position())+t.position(),t)}static startLargeBinary(t){t.startObject(0)}static endLargeBinary(t){return t.endObject()}static createLargeBinary(t){return sl.startLargeBinary(t),sl.endLargeBinary(t)}},cv=class al{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsLargeUtf8(t,i){return(i||new al).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsLargeUtf8(t,i){return t.setPosition(t.position()+Pt),(i||new al).__init(t.readInt32(t.position())+t.position(),t)}static startLargeUtf8(t){t.startObject(0)}static endLargeUtf8(t){return t.endObject()}static createLargeUtf8(t){return al.startLargeUtf8(t),al.endLargeUtf8(t)}},uv=class rl{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsList(t,i){return(i||new rl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,i){return t.setPosition(t.position()+Pt),(i||new rl).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return rl.startList(t),rl.endList(t)}},yc=class Ra{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsMap(t,i){return(i||new Ra).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,i){return t.setPosition(t.position()+Pt),(i||new Ra).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,i){t.addFieldInt8(0,+i,0)}static endMap(t){return t.endObject()}static createMap(t,i){return Ra.startMap(t),Ra.addKeysSorted(t,i),Ra.endMap(t)}},fv=class ll{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsNull(t,i){return(i||new ll).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,i){return t.setPosition(t.position()+Pt),(i||new ll).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return ll.startNull(t),ll.endNull(t)}};class Us{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsStruct_(t,i){return(i||new Us).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,i){return t.setPosition(t.position()+Pt),(i||new Us).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return Us.startStruct_(t),Us.endStruct_(t)}}class Ei{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsTime(t,i){return(i||new Ei).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,i){return t.setPosition(t.position()+Pt),(i||new Ei).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):st.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,i){t.addFieldInt16(0,i,st.MILLISECOND)}static addBitWidth(t,i){t.addFieldInt32(1,i,32)}static endTime(t){return t.endObject()}static createTime(t,i,r){return Ei.startTime(t),Ei.addUnit(t,i),Ei.addBitWidth(t,r),Ei.endTime(t)}}class wi{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsTimestamp(t,i){return(i||new wi).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,i){return t.setPosition(t.position()+Pt),(i||new wi).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):st.SECOND}timezone(t){const i=this.bb.__offset(this.bb_pos,6);return i?this.bb.__string(this.bb_pos+i,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,i){t.addFieldInt16(0,i,st.SECOND)}static addTimezone(t,i){t.addFieldOffset(1,i,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,i,r){return wi.startTimestamp(t),wi.addUnit(t,i),wi.addTimezone(t,r),wi.endTimestamp(t)}}class Xe{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsUnion(t,i){return(i||new Xe).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,i){return t.setPosition(t.position()+Pt),(i||new Xe).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Ie.Sparse}typeIds(t){const i=this.bb.__offset(this.bb_pos,6);return i?this.bb.readInt32(this.bb.__vector(this.bb_pos+i)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,i){t.addFieldInt16(0,i,Ie.Sparse)}static addTypeIds(t,i){t.addFieldOffset(1,i,0)}static createTypeIdsVector(t,i){t.startVector(4,i.length,4);for(let r=i.length-1;r>=0;r--)t.addInt32(i[r]);return t.endVector()}static startTypeIdsVector(t,i){t.startVector(4,i,4)}static endUnion(t){return t.endObject()}static createUnion(t,i,r){return Xe.startUnion(t),Xe.addMode(t,i),Xe.addTypeIds(t,r),Xe.endUnion(t)}}let dv=class ol{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsUtf8(t,i){return(i||new ol).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,i){return t.setPosition(t.position()+Pt),(i||new ol).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return ol.startUtf8(t),ol.endUtf8(t)}};var $t;(function(s){s[s.NONE=0]="NONE",s[s.Null=1]="Null",s[s.Int=2]="Int",s[s.FloatingPoint=3]="FloatingPoint",s[s.Binary=4]="Binary",s[s.Utf8=5]="Utf8",s[s.Bool=6]="Bool",s[s.Decimal=7]="Decimal",s[s.Date=8]="Date",s[s.Time=9]="Time",s[s.Timestamp=10]="Timestamp",s[s.Interval=11]="Interval",s[s.List=12]="List",s[s.Struct_=13]="Struct_",s[s.Union=14]="Union",s[s.FixedSizeBinary=15]="FixedSizeBinary",s[s.FixedSizeList=16]="FixedSizeList",s[s.Map=17]="Map",s[s.Duration=18]="Duration",s[s.LargeBinary=19]="LargeBinary",s[s.LargeUtf8=20]="LargeUtf8",s[s.LargeList=21]="LargeList",s[s.RunEndEncoded=22]="RunEndEncoded"})($t||($t={}));let Ai=class pc{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsField(t,i){return(i||new pc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,i){return t.setPosition(t.position()+Pt),(i||new pc).__init(t.readInt32(t.position())+t.position(),t)}name(t){const i=this.bb.__offset(this.bb_pos,4);return i?this.bb.__string(this.bb_pos+i,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):$t.NONE}type(t){const i=this.bb.__offset(this.bb_pos,10);return i?this.bb.__union(t,this.bb_pos+i):null}dictionary(t){const i=this.bb.__offset(this.bb_pos,12);return i?(t||new Ln).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}children(t,i){const r=this.bb.__offset(this.bb_pos,14);return r?(i||new pc).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,i){const r=this.bb.__offset(this.bb_pos,16);return r?(i||new Te).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,i){t.addFieldOffset(0,i,0)}static addNullable(t,i){t.addFieldInt8(1,+i,0)}static addTypeType(t,i){t.addFieldInt8(2,i,$t.NONE)}static addType(t,i){t.addFieldOffset(3,i,0)}static addDictionary(t,i){t.addFieldOffset(4,i,0)}static addChildren(t,i){t.addFieldOffset(5,i,0)}static createChildrenVector(t,i){t.startVector(4,i.length,4);for(let r=i.length-1;r>=0;r--)t.addOffset(i[r]);return t.endVector()}static startChildrenVector(t,i){t.startVector(4,i,4)}static addCustomMetadata(t,i){t.addFieldOffset(6,i,0)}static createCustomMetadataVector(t,i){t.startVector(4,i.length,4);for(let r=i.length-1;r>=0;r--)t.addOffset(i[r]);return t.endVector()}static startCustomMetadataVector(t,i){t.startVector(4,i,4)}static endField(t){return t.endObject()}},ki=class xn{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsSchema(t,i){return(i||new xn).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,i){return t.setPosition(t.position()+Pt),(i||new xn).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Za.Little}fields(t,i){const r=this.bb.__offset(this.bb_pos,6);return r?(i||new Ai).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,i){const r=this.bb.__offset(this.bb_pos,8);return r?(i||new Te).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const i=this.bb.__offset(this.bb_pos,10);return i?this.bb.readInt64(this.bb.__vector(this.bb_pos+i)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,i){t.addFieldInt16(0,i,Za.Little)}static addFields(t,i){t.addFieldOffset(1,i,0)}static createFieldsVector(t,i){t.startVector(4,i.length,4);for(let r=i.length-1;r>=0;r--)t.addOffset(i[r]);return t.endVector()}static startFieldsVector(t,i){t.startVector(4,i,4)}static addCustomMetadata(t,i){t.addFieldOffset(2,i,0)}static createCustomMetadataVector(t,i){t.startVector(4,i.length,4);for(let r=i.length-1;r>=0;r--)t.addOffset(i[r]);return t.endVector()}static startCustomMetadataVector(t,i){t.startVector(4,i,4)}static addFeatures(t,i){t.addFieldOffset(3,i,0)}static createFeaturesVector(t,i){t.startVector(8,i.length,8);for(let r=i.length-1;r>=0;r--)t.addInt64(i[r]);return t.endVector()}static startFeaturesVector(t,i){t.startVector(8,i,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,i){t.finish(i)}static finishSizePrefixedSchemaBuffer(t,i){t.finish(i,void 0,!0)}static createSchema(t,i,r,o,c){return xn.startSchema(t),xn.addEndianness(t,i),xn.addFields(t,r),xn.addCustomMetadata(t,o),xn.addFeatures(t,c),xn.endSchema(t)}};var Bt;(function(s){s[s.NONE=0]="NONE",s[s.Schema=1]="Schema",s[s.DictionaryBatch=2]="DictionaryBatch",s[s.RecordBatch=3]="RecordBatch",s[s.Tensor=4]="Tensor",s[s.SparseTensor=5]="SparseTensor"})(Bt||(Bt={}));var A;(function(s){s[s.NONE=0]="NONE",s[s.Null=1]="Null",s[s.Int=2]="Int",s[s.Float=3]="Float",s[s.Binary=4]="Binary",s[s.Utf8=5]="Utf8",s[s.Bool=6]="Bool",s[s.Decimal=7]="Decimal",s[s.Date=8]="Date",s[s.Time=9]="Time",s[s.Timestamp=10]="Timestamp",s[s.Interval=11]="Interval",s[s.List=12]="List",s[s.Struct=13]="Struct",s[s.Union=14]="Union",s[s.FixedSizeBinary=15]="FixedSizeBinary",s[s.FixedSizeList=16]="FixedSizeList",s[s.Map=17]="Map",s[s.Duration=18]="Duration",s[s.LargeBinary=19]="LargeBinary",s[s.LargeUtf8=20]="LargeUtf8",s[s.Dictionary=-1]="Dictionary",s[s.Int8=-2]="Int8",s[s.Int16=-3]="Int16",s[s.Int32=-4]="Int32",s[s.Int64=-5]="Int64",s[s.Uint8=-6]="Uint8",s[s.Uint16=-7]="Uint16",s[s.Uint32=-8]="Uint32",s[s.Uint64=-9]="Uint64",s[s.Float16=-10]="Float16",s[s.Float32=-11]="Float32",s[s.Float64=-12]="Float64",s[s.DateDay=-13]="DateDay",s[s.DateMillisecond=-14]="DateMillisecond",s[s.TimestampSecond=-15]="TimestampSecond",s[s.TimestampMillisecond=-16]="TimestampMillisecond",s[s.TimestampMicrosecond=-17]="TimestampMicrosecond",s[s.TimestampNanosecond=-18]="TimestampNanosecond",s[s.TimeSecond=-19]="TimeSecond",s[s.TimeMillisecond=-20]="TimeMillisecond",s[s.TimeMicrosecond=-21]="TimeMicrosecond",s[s.TimeNanosecond=-22]="TimeNanosecond",s[s.DenseUnion=-23]="DenseUnion",s[s.SparseUnion=-24]="SparseUnion",s[s.IntervalDayTime=-25]="IntervalDayTime",s[s.IntervalYearMonth=-26]="IntervalYearMonth",s[s.DurationSecond=-27]="DurationSecond",s[s.DurationMillisecond=-28]="DurationMillisecond",s[s.DurationMicrosecond=-29]="DurationMicrosecond",s[s.DurationNanosecond=-30]="DurationNanosecond"})(A||(A={}));var wn;(function(s){s[s.OFFSET=0]="OFFSET",s[s.DATA=1]="DATA",s[s.VALIDITY=2]="VALIDITY",s[s.TYPE=3]="TYPE"})(wn||(wn={}));const Vx=void 0;function ml(s){if(s===null)return"null";if(s===Vx)return"undefined";switch(typeof s){case"number":return`${s}`;case"bigint":return`${s}`;case"string":return`"${s}"`}return typeof s[Symbol.toPrimitive]=="function"?s[Symbol.toPrimitive]("string"):ArrayBuffer.isView(s)?s instanceof BigInt64Array||s instanceof BigUint64Array?`[${[...s].map(t=>ml(t))}]`:`[${s}]`:ArrayBuffer.isView(s)?`[${s}]`:JSON.stringify(s,(t,i)=>typeof i=="bigint"?`${i}`:i)}function Wt(s){if(typeof s=="bigint"&&(s<Number.MIN_SAFE_INTEGER||s>Number.MAX_SAFE_INTEGER))throw new TypeError(`${s} is not safe to convert to a number.`);return Number(s)}function o_(s,t){return Wt(s/t)+Wt(s%t)/Wt(t)}const jx=Symbol.for("isArrowBigNum");function Ui(s,...t){return t.length===0?Object.setPrototypeOf(qt(this.TypedArray,s),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(s,...t),this.constructor.prototype)}Ui.prototype[jx]=!0;Ui.prototype.toJSON=function(){return`"${_l(this)}"`};Ui.prototype.valueOf=function(s){return c_(this,s)};Ui.prototype.toString=function(){return _l(this)};Ui.prototype[Symbol.toPrimitive]=function(s="default"){switch(s){case"number":return c_(this);case"string":return _l(this);case"default":return qx(this)}return _l(this)};function Ga(...s){return Ui.apply(this,s)}function Ha(...s){return Ui.apply(this,s)}function vl(...s){return Ui.apply(this,s)}Object.setPrototypeOf(Ga.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Ha.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(vl.prototype,Object.create(Uint32Array.prototype));Object.assign(Ga.prototype,Ui.prototype,{constructor:Ga,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(Ha.prototype,Ui.prototype,{constructor:Ha,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(vl.prototype,Ui.prototype,{constructor:vl,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});const Gx=BigInt(4294967296)*BigInt(4294967296),Hx=Gx-BigInt(1);function c_(s,t){const{buffer:i,byteOffset:r,byteLength:o,signed:c}=s,d=new BigUint64Array(i,r,o/8),h=c&&d.at(-1)&BigInt(1)<<BigInt(63);let y=BigInt(0),g=0;if(h){for(const v of d)y|=(v^Hx)*(BigInt(1)<<BigInt(64*g++));y*=BigInt(-1),y-=BigInt(1)}else for(const v of d)y|=v*(BigInt(1)<<BigInt(64*g++));if(typeof t=="number"){const v=BigInt(Math.pow(10,t)),b=y/v,E=y%v;return Wt(b)+Wt(E)/Wt(v)}return Wt(y)}function _l(s){if(s.byteLength===8)return`${new s.BigIntArray(s.buffer,s.byteOffset,1)[0]}`;if(!s.signed)return Ud(s);let t=new Uint16Array(s.buffer,s.byteOffset,s.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return Ud(s);t=t.slice();let r=1;for(let c=0;c<t.length;c++){const d=t[c],h=~d+r;t[c]=h,r&=d===0?1:0}return`-${Ud(t)}`}function qx(s){return s.byteLength===8?new s.BigIntArray(s.buffer,s.byteOffset,1)[0]:_l(s)}function Ud(s){let t="";const i=new Uint32Array(2);let r=new Uint16Array(s.buffer,s.byteOffset,s.byteLength/2);const o=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let c=-1;const d=r.length-1;do{for(i[0]=r[c=0];c<d;)r[c++]=i[1]=i[0]/10,i[0]=(i[0]-i[1]*10<<16)+r[c];r[c]=i[1]=i[0]/10,i[0]=i[0]-i[1]*10,t=`${i[0]}${t}`}while(o[0]||o[1]||o[2]||o[3]);return t??"0"}class Ih{static new(t,i){switch(i){case!0:return new Ga(t);case!1:return new Ha(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new Ga(t)}return t.byteLength===16?new vl(t):new Ha(t)}static signed(t){return new Ga(t)}static unsigned(t){return new Ha(t)}static decimal(t){return new vl(t)}constructor(t,i){return Ih.new(t,i)}}var u_,f_,d_,h_,y_,p_,g_,m_,v_,__,b_,S_,T_,A_,x_,E_,w_,O_,M_,L_,C_,D_;class K{static isNull(t){return t?.typeId===A.Null}static isInt(t){return t?.typeId===A.Int}static isFloat(t){return t?.typeId===A.Float}static isBinary(t){return t?.typeId===A.Binary}static isLargeBinary(t){return t?.typeId===A.LargeBinary}static isUtf8(t){return t?.typeId===A.Utf8}static isLargeUtf8(t){return t?.typeId===A.LargeUtf8}static isBool(t){return t?.typeId===A.Bool}static isDecimal(t){return t?.typeId===A.Decimal}static isDate(t){return t?.typeId===A.Date}static isTime(t){return t?.typeId===A.Time}static isTimestamp(t){return t?.typeId===A.Timestamp}static isInterval(t){return t?.typeId===A.Interval}static isDuration(t){return t?.typeId===A.Duration}static isList(t){return t?.typeId===A.List}static isStruct(t){return t?.typeId===A.Struct}static isUnion(t){return t?.typeId===A.Union}static isFixedSizeBinary(t){return t?.typeId===A.FixedSizeBinary}static isFixedSizeList(t){return t?.typeId===A.FixedSizeList}static isMap(t){return t?.typeId===A.Map}static isDictionary(t){return t?.typeId===A.Dictionary}static isDenseUnion(t){return K.isUnion(t)&&t.mode===Ie.Dense}static isSparseUnion(t){return K.isUnion(t)&&t.mode===Ie.Sparse}constructor(t){this.typeId=t}}u_=Symbol.toStringTag;K[u_]=(s=>(s.children=null,s.ArrayType=Array,s.OffsetArrayType=Int32Array,s[Symbol.toStringTag]="DataType"))(K.prototype);class hs extends K{constructor(){super(A.Null)}toString(){return"Null"}}f_=Symbol.toStringTag;hs[f_]=(s=>s[Symbol.toStringTag]="Null")(hs.prototype);class Vs extends K{constructor(t,i){super(A.Int),this.isSigned=t,this.bitWidth=i}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}d_=Symbol.toStringTag;Vs[d_]=(s=>(s.isSigned=null,s.bitWidth=null,s[Symbol.toStringTag]="Int"))(Vs.prototype);class bl extends Vs{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}Object.defineProperty(bl.prototype,"ArrayType",{value:Int32Array});class wc extends K{constructor(t){super(A.Float),this.precision=t}get ArrayType(){switch(this.precision){case Be.HALF:return Uint16Array;case Be.SINGLE:return Float32Array;case Be.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}h_=Symbol.toStringTag;wc[h_]=(s=>(s.precision=null,s[Symbol.toStringTag]="Float"))(wc.prototype);class Oc extends K{constructor(){super(A.Binary)}toString(){return"Binary"}}y_=Symbol.toStringTag;Oc[y_]=(s=>(s.ArrayType=Uint8Array,s[Symbol.toStringTag]="Binary"))(Oc.prototype);class Mc extends K{constructor(){super(A.LargeBinary)}toString(){return"LargeBinary"}}p_=Symbol.toStringTag;Mc[p_]=(s=>(s.ArrayType=Uint8Array,s.OffsetArrayType=BigInt64Array,s[Symbol.toStringTag]="LargeBinary"))(Mc.prototype);class Lc extends K{constructor(){super(A.Utf8)}toString(){return"Utf8"}}g_=Symbol.toStringTag;Lc[g_]=(s=>(s.ArrayType=Uint8Array,s[Symbol.toStringTag]="Utf8"))(Lc.prototype);class Cc extends K{constructor(){super(A.LargeUtf8)}toString(){return"LargeUtf8"}}m_=Symbol.toStringTag;Cc[m_]=(s=>(s.ArrayType=Uint8Array,s.OffsetArrayType=BigInt64Array,s[Symbol.toStringTag]="LargeUtf8"))(Cc.prototype);class Dc extends K{constructor(){super(A.Bool)}toString(){return"Bool"}}v_=Symbol.toStringTag;Dc[v_]=(s=>(s.ArrayType=Uint8Array,s[Symbol.toStringTag]="Bool"))(Dc.prototype);class Bc extends K{constructor(t,i,r=128){super(A.Decimal),this.scale=t,this.precision=i,this.bitWidth=r}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}__=Symbol.toStringTag;Bc[__]=(s=>(s.scale=null,s.precision=null,s.ArrayType=Uint32Array,s[Symbol.toStringTag]="Decimal"))(Bc.prototype);class Ic extends K{constructor(t){super(A.Date),this.unit=t}toString(){return`Date${(this.unit+1)*32}<${Mi[this.unit]}>`}get ArrayType(){return this.unit===Mi.DAY?Int32Array:BigInt64Array}}b_=Symbol.toStringTag;Ic[b_]=(s=>(s.unit=null,s[Symbol.toStringTag]="Date"))(Ic.prototype);class Rc extends K{constructor(t,i){super(A.Time),this.unit=t,this.bitWidth=i}toString(){return`Time${this.bitWidth}<${st[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}S_=Symbol.toStringTag;Rc[S_]=(s=>(s.unit=null,s.bitWidth=null,s[Symbol.toStringTag]="Time"))(Rc.prototype);class Nc extends K{constructor(t,i){super(A.Timestamp),this.unit=t,this.timezone=i}toString(){return`Timestamp<${st[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}T_=Symbol.toStringTag;Nc[T_]=(s=>(s.unit=null,s.timezone=null,s.ArrayType=BigInt64Array,s[Symbol.toStringTag]="Timestamp"))(Nc.prototype);class zc extends K{constructor(t){super(A.Interval),this.unit=t}toString(){return`Interval<${en[this.unit]}>`}}A_=Symbol.toStringTag;zc[A_]=(s=>(s.unit=null,s.ArrayType=Int32Array,s[Symbol.toStringTag]="Interval"))(zc.prototype);class Uc extends K{constructor(t){super(A.Duration),this.unit=t}toString(){return`Duration<${st[this.unit]}>`}}x_=Symbol.toStringTag;Uc[x_]=(s=>(s.unit=null,s.ArrayType=BigInt64Array,s[Symbol.toStringTag]="Duration"))(Uc.prototype);class Fc extends K{constructor(t){super(A.List),this.children=[t]}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}E_=Symbol.toStringTag;Fc[E_]=(s=>(s.children=null,s[Symbol.toStringTag]="List"))(Fc.prototype);class Ue extends K{constructor(t){super(A.Struct),this.children=t}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}w_=Symbol.toStringTag;Ue[w_]=(s=>(s.children=null,s[Symbol.toStringTag]="Struct"))(Ue.prototype);class Pc extends K{constructor(t,i,r){super(A.Union),this.mode=t,this.children=r,this.typeIds=i=Int32Array.from(i),this.typeIdToChildIndex=i.reduce((o,c,d)=>(o[c]=d)&&o||o,Object.create(null))}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}O_=Symbol.toStringTag;Pc[O_]=(s=>(s.mode=null,s.typeIds=null,s.children=null,s.typeIdToChildIndex=null,s.ArrayType=Int8Array,s[Symbol.toStringTag]="Union"))(Pc.prototype);class Vc extends K{constructor(t){super(A.FixedSizeBinary),this.byteWidth=t}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}M_=Symbol.toStringTag;Vc[M_]=(s=>(s.byteWidth=null,s.ArrayType=Uint8Array,s[Symbol.toStringTag]="FixedSizeBinary"))(Vc.prototype);class jc extends K{constructor(t,i){super(A.FixedSizeList),this.listSize=t,this.children=[i]}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}L_=Symbol.toStringTag;jc[L_]=(s=>(s.children=null,s.listSize=null,s[Symbol.toStringTag]="FixedSizeList"))(jc.prototype);class Gc extends K{constructor(t,i=!1){var r,o,c;if(super(A.Map),this.children=[t],this.keysSorted=i,t&&(t.name="entries",!((r=t?.type)===null||r===void 0)&&r.children)){const d=(o=t?.type)===null||o===void 0?void 0:o.children[0];d&&(d.name="key");const h=(c=t?.type)===null||c===void 0?void 0:c.children[1];h&&(h.name="value")}}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}C_=Symbol.toStringTag;Gc[C_]=(s=>(s.children=null,s.keysSorted=null,s[Symbol.toStringTag]="Map_"))(Gc.prototype);const Yx=(s=>()=>++s)(-1);class Xa extends K{constructor(t,i,r,o){super(A.Dictionary),this.indices=i,this.dictionary=t,this.isOrdered=o||!1,this.id=r==null?Yx():Wt(r)}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}D_=Symbol.toStringTag;Xa[D_]=(s=>(s.id=null,s.indices=null,s.isOrdered=null,s.dictionary=null,s[Symbol.toStringTag]="Dictionary"))(Xa.prototype);function On(s){const t=s;switch(s.typeId){case A.Decimal:return s.bitWidth/32;case A.Interval:return 1+t.unit;case A.FixedSizeList:return t.listSize;case A.FixedSizeBinary:return t.byteWidth;default:return 1}}class mt{visitMany(t,...i){return t.map((r,o)=>this.visit(r,...i.map(c=>c[o])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,i=!0){return kx(this,t,i)}getVisitFnByTypeId(t,i=!0){return Na(this,t,i)}visitNull(t,...i){return null}visitBool(t,...i){return null}visitInt(t,...i){return null}visitFloat(t,...i){return null}visitUtf8(t,...i){return null}visitLargeUtf8(t,...i){return null}visitBinary(t,...i){return null}visitLargeBinary(t,...i){return null}visitFixedSizeBinary(t,...i){return null}visitDate(t,...i){return null}visitTimestamp(t,...i){return null}visitTime(t,...i){return null}visitDecimal(t,...i){return null}visitList(t,...i){return null}visitStruct(t,...i){return null}visitUnion(t,...i){return null}visitDictionary(t,...i){return null}visitInterval(t,...i){return null}visitDuration(t,...i){return null}visitFixedSizeList(t,...i){return null}visitMap(t,...i){return null}}function kx(s,t,i=!0){return typeof t=="number"?Na(s,t,i):typeof t=="string"&&t in A?Na(s,A[t],i):t&&t instanceof K?Na(s,hv(t),i):t?.type&&t.type instanceof K?Na(s,hv(t.type),i):Na(s,A.NONE,i)}function Na(s,t,i=!0){let r=null;switch(t){case A.Null:r=s.visitNull;break;case A.Bool:r=s.visitBool;break;case A.Int:r=s.visitInt;break;case A.Int8:r=s.visitInt8||s.visitInt;break;case A.Int16:r=s.visitInt16||s.visitInt;break;case A.Int32:r=s.visitInt32||s.visitInt;break;case A.Int64:r=s.visitInt64||s.visitInt;break;case A.Uint8:r=s.visitUint8||s.visitInt;break;case A.Uint16:r=s.visitUint16||s.visitInt;break;case A.Uint32:r=s.visitUint32||s.visitInt;break;case A.Uint64:r=s.visitUint64||s.visitInt;break;case A.Float:r=s.visitFloat;break;case A.Float16:r=s.visitFloat16||s.visitFloat;break;case A.Float32:r=s.visitFloat32||s.visitFloat;break;case A.Float64:r=s.visitFloat64||s.visitFloat;break;case A.Utf8:r=s.visitUtf8;break;case A.LargeUtf8:r=s.visitLargeUtf8;break;case A.Binary:r=s.visitBinary;break;case A.LargeBinary:r=s.visitLargeBinary;break;case A.FixedSizeBinary:r=s.visitFixedSizeBinary;break;case A.Date:r=s.visitDate;break;case A.DateDay:r=s.visitDateDay||s.visitDate;break;case A.DateMillisecond:r=s.visitDateMillisecond||s.visitDate;break;case A.Timestamp:r=s.visitTimestamp;break;case A.TimestampSecond:r=s.visitTimestampSecond||s.visitTimestamp;break;case A.TimestampMillisecond:r=s.visitTimestampMillisecond||s.visitTimestamp;break;case A.TimestampMicrosecond:r=s.visitTimestampMicrosecond||s.visitTimestamp;break;case A.TimestampNanosecond:r=s.visitTimestampNanosecond||s.visitTimestamp;break;case A.Time:r=s.visitTime;break;case A.TimeSecond:r=s.visitTimeSecond||s.visitTime;break;case A.TimeMillisecond:r=s.visitTimeMillisecond||s.visitTime;break;case A.TimeMicrosecond:r=s.visitTimeMicrosecond||s.visitTime;break;case A.TimeNanosecond:r=s.visitTimeNanosecond||s.visitTime;break;case A.Decimal:r=s.visitDecimal;break;case A.List:r=s.visitList;break;case A.Struct:r=s.visitStruct;break;case A.Union:r=s.visitUnion;break;case A.DenseUnion:r=s.visitDenseUnion||s.visitUnion;break;case A.SparseUnion:r=s.visitSparseUnion||s.visitUnion;break;case A.Dictionary:r=s.visitDictionary;break;case A.Interval:r=s.visitInterval;break;case A.IntervalDayTime:r=s.visitIntervalDayTime||s.visitInterval;break;case A.IntervalYearMonth:r=s.visitIntervalYearMonth||s.visitInterval;break;case A.Duration:r=s.visitDuration;break;case A.DurationSecond:r=s.visitDurationSecond||s.visitDuration;break;case A.DurationMillisecond:r=s.visitDurationMillisecond||s.visitDuration;break;case A.DurationMicrosecond:r=s.visitDurationMicrosecond||s.visitDuration;break;case A.DurationNanosecond:r=s.visitDurationNanosecond||s.visitDuration;break;case A.FixedSizeList:r=s.visitFixedSizeList;break;case A.Map:r=s.visitMap;break}if(typeof r=="function")return r;if(!i)return()=>null;throw new Error(`Unrecognized type '${A[t]}'`)}function hv(s){switch(s.typeId){case A.Null:return A.Null;case A.Int:{const{bitWidth:t,isSigned:i}=s;switch(t){case 8:return i?A.Int8:A.Uint8;case 16:return i?A.Int16:A.Uint16;case 32:return i?A.Int32:A.Uint32;case 64:return i?A.Int64:A.Uint64}return A.Int}case A.Float:switch(s.precision){case Be.HALF:return A.Float16;case Be.SINGLE:return A.Float32;case Be.DOUBLE:return A.Float64}return A.Float;case A.Binary:return A.Binary;case A.LargeBinary:return A.LargeBinary;case A.Utf8:return A.Utf8;case A.LargeUtf8:return A.LargeUtf8;case A.Bool:return A.Bool;case A.Decimal:return A.Decimal;case A.Time:switch(s.unit){case st.SECOND:return A.TimeSecond;case st.MILLISECOND:return A.TimeMillisecond;case st.MICROSECOND:return A.TimeMicrosecond;case st.NANOSECOND:return A.TimeNanosecond}return A.Time;case A.Timestamp:switch(s.unit){case st.SECOND:return A.TimestampSecond;case st.MILLISECOND:return A.TimestampMillisecond;case st.MICROSECOND:return A.TimestampMicrosecond;case st.NANOSECOND:return A.TimestampNanosecond}return A.Timestamp;case A.Date:switch(s.unit){case Mi.DAY:return A.DateDay;case Mi.MILLISECOND:return A.DateMillisecond}return A.Date;case A.Interval:switch(s.unit){case en.DAY_TIME:return A.IntervalDayTime;case en.YEAR_MONTH:return A.IntervalYearMonth}return A.Interval;case A.Duration:switch(s.unit){case st.SECOND:return A.DurationSecond;case st.MILLISECOND:return A.DurationMillisecond;case st.MICROSECOND:return A.DurationMicrosecond;case st.NANOSECOND:return A.DurationNanosecond}return A.Duration;case A.Map:return A.Map;case A.List:return A.List;case A.Struct:return A.Struct;case A.Union:switch(s.mode){case Ie.Dense:return A.DenseUnion;case Ie.Sparse:return A.SparseUnion}return A.Union;case A.FixedSizeBinary:return A.FixedSizeBinary;case A.FixedSizeList:return A.FixedSizeList;case A.Dictionary:return A.Dictionary}throw new Error(`Unrecognized type '${A[s.typeId]}'`)}mt.prototype.visitInt8=null;mt.prototype.visitInt16=null;mt.prototype.visitInt32=null;mt.prototype.visitInt64=null;mt.prototype.visitUint8=null;mt.prototype.visitUint16=null;mt.prototype.visitUint32=null;mt.prototype.visitUint64=null;mt.prototype.visitFloat16=null;mt.prototype.visitFloat32=null;mt.prototype.visitFloat64=null;mt.prototype.visitDateDay=null;mt.prototype.visitDateMillisecond=null;mt.prototype.visitTimestampSecond=null;mt.prototype.visitTimestampMillisecond=null;mt.prototype.visitTimestampMicrosecond=null;mt.prototype.visitTimestampNanosecond=null;mt.prototype.visitTimeSecond=null;mt.prototype.visitTimeMillisecond=null;mt.prototype.visitTimeMicrosecond=null;mt.prototype.visitTimeNanosecond=null;mt.prototype.visitDenseUnion=null;mt.prototype.visitSparseUnion=null;mt.prototype.visitIntervalDayTime=null;mt.prototype.visitIntervalYearMonth=null;mt.prototype.visitDuration=null;mt.prototype.visitDurationSecond=null;mt.prototype.visitDurationMillisecond=null;mt.prototype.visitDurationMicrosecond=null;mt.prototype.visitDurationNanosecond=null;const B_=new Float64Array(1),wa=new Uint32Array(B_.buffer);function I_(s){const t=(s&31744)>>10,i=(s&1023)/1024,r=Math.pow(-1,(s&32768)>>15);switch(t){case 31:return r*(i?Number.NaN:1/0);case 0:return r*(i?6103515625e-14*i:0)}return r*Math.pow(2,t-15)*(1+i)}function Qx(s){if(s!==s)return 32256;B_[0]=s;const t=(wa[1]&2147483648)>>16&65535;let i=wa[1]&2146435072,r=0;return i>=1089470464?wa[0]>0?i=31744:(i=(i&2080374784)>>16,r=(wa[1]&1048575)>>10):i<=1056964608?(r=1048576+(wa[1]&1048575),r=1048576+(r<<(i>>20)-998)>>21,i=0):(i=i-1056964608>>10,r=(wa[1]&1048575)+512>>10),t|i|r&65535}class at extends mt{}function ot(s){return(t,i,r)=>{if(t.setValid(i,r!=null))return s(t,i,r)}}const Zx=(s,t,i)=>{s[t]=Math.floor(i/864e5)},R_=(s,t,i,r)=>{if(i+1<t.length){const o=Wt(t[i]),c=Wt(t[i+1]);s.set(r.subarray(0,c-o),o)}},Xx=({offset:s,values:t},i,r)=>{const o=s+i;r?t[o>>3]|=1<<o%8:t[o>>3]&=~(1<<o%8)},Bn=({values:s},t,i)=>{s[t]=i},Rh=({values:s},t,i)=>{s[t]=i},N_=({values:s},t,i)=>{s[t]=Qx(i)},Kx=(s,t,i)=>{switch(s.type.precision){case Be.HALF:return N_(s,t,i);case Be.SINGLE:case Be.DOUBLE:return Rh(s,t,i)}},z_=({values:s},t,i)=>{Zx(s,t,i.valueOf())},U_=({values:s},t,i)=>{s[t]=BigInt(i)},Wx=({stride:s,values:t},i,r)=>{t.set(r.subarray(0,s),s*i)},F_=({values:s,valueOffsets:t},i,r)=>R_(s,t,i,r),P_=({values:s,valueOffsets:t},i,r)=>R_(s,t,i,Ch(r)),Jx=(s,t,i)=>{s.type.unit===Mi.DAY?z_(s,t,i):U_(s,t,i)},V_=({values:s},t,i)=>{s[t]=BigInt(i/1e3)},j_=({values:s},t,i)=>{s[t]=BigInt(i)},G_=({values:s},t,i)=>{s[t]=BigInt(i*1e3)},H_=({values:s},t,i)=>{s[t]=BigInt(i*1e6)},$x=(s,t,i)=>{switch(s.type.unit){case st.SECOND:return V_(s,t,i);case st.MILLISECOND:return j_(s,t,i);case st.MICROSECOND:return G_(s,t,i);case st.NANOSECOND:return H_(s,t,i)}},q_=({values:s},t,i)=>{s[t]=i},Y_=({values:s},t,i)=>{s[t]=i},k_=({values:s},t,i)=>{s[t]=i},Q_=({values:s},t,i)=>{s[t]=i},tE=(s,t,i)=>{switch(s.type.unit){case st.SECOND:return q_(s,t,i);case st.MILLISECOND:return Y_(s,t,i);case st.MICROSECOND:return k_(s,t,i);case st.NANOSECOND:return Q_(s,t,i)}},eE=({values:s,stride:t},i,r)=>{s.set(r.subarray(0,t),t*i)},iE=(s,t,i)=>{const r=s.children[0],o=s.valueOffsets,c=Li.getVisitFn(r);if(Array.isArray(i))for(let d=-1,h=o[t],y=o[t+1];h<y;)c(r,h++,i[++d]);else for(let d=-1,h=o[t],y=o[t+1];h<y;)c(r,h++,i.get(++d))},nE=(s,t,i)=>{const r=s.children[0],{valueOffsets:o}=s,c=Li.getVisitFn(r);let{[t]:d,[t+1]:h}=o;const y=i instanceof Map?i.entries():Object.entries(i);for(const g of y)if(c(r,d,g),++d>=h)break},sE=(s,t)=>(i,r,o,c)=>r&&i(r,s,t[c]),aE=(s,t)=>(i,r,o,c)=>r&&i(r,s,t.get(c)),rE=(s,t)=>(i,r,o,c)=>r&&i(r,s,t.get(o.name)),lE=(s,t)=>(i,r,o,c)=>r&&i(r,s,t[o.name]),oE=(s,t,i)=>{const r=s.type.children.map(c=>Li.getVisitFn(c.type)),o=i instanceof Map?rE(t,i):i instanceof Ut?aE(t,i):Array.isArray(i)?sE(t,i):lE(t,i);s.type.children.forEach((c,d)=>o(r[d],s.children[d],c,d))},cE=(s,t,i)=>{s.type.mode===Ie.Dense?Z_(s,t,i):X_(s,t,i)},Z_=(s,t,i)=>{const r=s.type.typeIdToChildIndex[s.typeIds[t]],o=s.children[r];Li.visit(o,s.valueOffsets[t],i)},X_=(s,t,i)=>{const r=s.type.typeIdToChildIndex[s.typeIds[t]],o=s.children[r];Li.visit(o,t,i)},uE=(s,t,i)=>{var r;(r=s.dictionary)===null||r===void 0||r.set(s.values[t],i)},fE=(s,t,i)=>{s.type.unit===en.DAY_TIME?K_(s,t,i):W_(s,t,i)},K_=({values:s},t,i)=>{s.set(i.subarray(0,2),2*t)},W_=({values:s},t,i)=>{s[t]=i[0]*12+i[1]%12},J_=({values:s},t,i)=>{s[t]=i},$_=({values:s},t,i)=>{s[t]=i},tb=({values:s},t,i)=>{s[t]=i},eb=({values:s},t,i)=>{s[t]=i},dE=(s,t,i)=>{switch(s.type.unit){case st.SECOND:return J_(s,t,i);case st.MILLISECOND:return $_(s,t,i);case st.MICROSECOND:return tb(s,t,i);case st.NANOSECOND:return eb(s,t,i)}},hE=(s,t,i)=>{const{stride:r}=s,o=s.children[0],c=Li.getVisitFn(o);if(Array.isArray(i))for(let d=-1,h=t*r;++d<r;)c(o,h+d,i[d]);else for(let d=-1,h=t*r;++d<r;)c(o,h+d,i.get(d))};at.prototype.visitBool=ot(Xx);at.prototype.visitInt=ot(Bn);at.prototype.visitInt8=ot(Bn);at.prototype.visitInt16=ot(Bn);at.prototype.visitInt32=ot(Bn);at.prototype.visitInt64=ot(Bn);at.prototype.visitUint8=ot(Bn);at.prototype.visitUint16=ot(Bn);at.prototype.visitUint32=ot(Bn);at.prototype.visitUint64=ot(Bn);at.prototype.visitFloat=ot(Kx);at.prototype.visitFloat16=ot(N_);at.prototype.visitFloat32=ot(Rh);at.prototype.visitFloat64=ot(Rh);at.prototype.visitUtf8=ot(P_);at.prototype.visitLargeUtf8=ot(P_);at.prototype.visitBinary=ot(F_);at.prototype.visitLargeBinary=ot(F_);at.prototype.visitFixedSizeBinary=ot(Wx);at.prototype.visitDate=ot(Jx);at.prototype.visitDateDay=ot(z_);at.prototype.visitDateMillisecond=ot(U_);at.prototype.visitTimestamp=ot($x);at.prototype.visitTimestampSecond=ot(V_);at.prototype.visitTimestampMillisecond=ot(j_);at.prototype.visitTimestampMicrosecond=ot(G_);at.prototype.visitTimestampNanosecond=ot(H_);at.prototype.visitTime=ot(tE);at.prototype.visitTimeSecond=ot(q_);at.prototype.visitTimeMillisecond=ot(Y_);at.prototype.visitTimeMicrosecond=ot(k_);at.prototype.visitTimeNanosecond=ot(Q_);at.prototype.visitDecimal=ot(eE);at.prototype.visitList=ot(iE);at.prototype.visitStruct=ot(oE);at.prototype.visitUnion=ot(cE);at.prototype.visitDenseUnion=ot(Z_);at.prototype.visitSparseUnion=ot(X_);at.prototype.visitDictionary=ot(uE);at.prototype.visitInterval=ot(fE);at.prototype.visitIntervalDayTime=ot(K_);at.prototype.visitIntervalYearMonth=ot(W_);at.prototype.visitDuration=ot(dE);at.prototype.visitDurationSecond=ot(J_);at.prototype.visitDurationMillisecond=ot($_);at.prototype.visitDurationMicrosecond=ot(tb);at.prototype.visitDurationNanosecond=ot(eb);at.prototype.visitFixedSizeList=ot(hE);at.prototype.visitMap=ot(nE);const Li=new at,Ri=Symbol.for("parent"),qa=Symbol.for("rowIndex");class Nh{constructor(t,i){return this[Ri]=t,this[qa]=i,new Proxy(this,new pE)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[qa],i=this[Ri],r=i.type.children,o={};for(let c=-1,d=r.length;++c<d;)o[r[c].name]=Je.visit(i.children[c],t);return o}toString(){return`{${[...this].map(([t,i])=>`${ml(t)}: ${ml(i)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new yE(this[Ri],this[qa])}}class yE{constructor(t,i){this.childIndex=0,this.children=t.children,this.rowIndex=i,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,Je.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(Nh.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Ri]:{writable:!0,enumerable:!1,configurable:!1,value:null},[qa]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class pE{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Ri].type.children.map(i=>i.name)}has(t,i){return t[Ri].type.children.findIndex(r=>r.name===i)!==-1}getOwnPropertyDescriptor(t,i){if(t[Ri].type.children.findIndex(r=>r.name===i)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,i){if(Reflect.has(t,i))return t[i];const r=t[Ri].type.children.findIndex(o=>o.name===i);if(r!==-1){const o=Je.visit(t[Ri].children[r],t[qa]);return Reflect.set(t,i,o),o}}set(t,i,r){const o=t[Ri].type.children.findIndex(c=>c.name===i);return o!==-1?(Li.visit(t[Ri].children[o],t[qa],r),Reflect.set(t,i,r)):Reflect.has(t,i)||typeof i=="symbol"?Reflect.set(t,i,r):!1}}class tt extends mt{}function rt(s){return(t,i)=>t.getValid(i)?s(t,i):null}const gE=(s,t)=>864e5*s[t],mE=(s,t)=>null,ib=(s,t,i)=>{if(i+1>=t.length)return null;const r=Wt(t[i]),o=Wt(t[i+1]);return s.subarray(r,o)},vE=({offset:s,values:t},i)=>{const r=s+i;return(t[r>>3]&1<<r%8)!==0},nb=({values:s},t)=>gE(s,t),sb=({values:s},t)=>Wt(s[t]),ms=({stride:s,values:t},i)=>t[s*i],_E=({stride:s,values:t},i)=>I_(t[s*i]),ab=({values:s},t)=>s[t],bE=({stride:s,values:t},i)=>t.subarray(s*i,s*(i+1)),rb=({values:s,valueOffsets:t},i)=>ib(s,t,i),lb=({values:s,valueOffsets:t},i)=>{const r=ib(s,t,i);return r!==null?th(r):null},SE=({values:s},t)=>s[t],TE=({type:s,values:t},i)=>s.precision!==Be.HALF?t[i]:I_(t[i]),AE=(s,t)=>s.type.unit===Mi.DAY?nb(s,t):sb(s,t),ob=({values:s},t)=>1e3*Wt(s[t]),cb=({values:s},t)=>Wt(s[t]),ub=({values:s},t)=>o_(s[t],BigInt(1e3)),fb=({values:s},t)=>o_(s[t],BigInt(1e6)),xE=(s,t)=>{switch(s.type.unit){case st.SECOND:return ob(s,t);case st.MILLISECOND:return cb(s,t);case st.MICROSECOND:return ub(s,t);case st.NANOSECOND:return fb(s,t)}},db=({values:s},t)=>s[t],hb=({values:s},t)=>s[t],yb=({values:s},t)=>s[t],pb=({values:s},t)=>s[t],EE=(s,t)=>{switch(s.type.unit){case st.SECOND:return db(s,t);case st.MILLISECOND:return hb(s,t);case st.MICROSECOND:return yb(s,t);case st.NANOSECOND:return pb(s,t)}},wE=({values:s,stride:t},i)=>Ih.decimal(s.subarray(t*i,t*(i+1))),OE=(s,t)=>{const{valueOffsets:i,stride:r,children:o}=s,{[t*r]:c,[t*r+1]:d}=i,y=o[0].slice(c,d-c);return new Ut([y])},ME=(s,t)=>{const{valueOffsets:i,children:r}=s,{[t]:o,[t+1]:c}=i,d=r[0];return new zh(d.slice(o,c-o))},LE=(s,t)=>new Nh(s,t),CE=(s,t)=>s.type.mode===Ie.Dense?gb(s,t):mb(s,t),gb=(s,t)=>{const i=s.type.typeIdToChildIndex[s.typeIds[t]],r=s.children[i];return Je.visit(r,s.valueOffsets[t])},mb=(s,t)=>{const i=s.type.typeIdToChildIndex[s.typeIds[t]],r=s.children[i];return Je.visit(r,t)},DE=(s,t)=>{var i;return(i=s.dictionary)===null||i===void 0?void 0:i.get(s.values[t])},BE=(s,t)=>s.type.unit===en.DAY_TIME?vb(s,t):_b(s,t),vb=({values:s},t)=>s.subarray(2*t,2*(t+1)),_b=({values:s},t)=>{const i=s[t],r=new Int32Array(2);return r[0]=Math.trunc(i/12),r[1]=Math.trunc(i%12),r},bb=({values:s},t)=>s[t],Sb=({values:s},t)=>s[t],Tb=({values:s},t)=>s[t],Ab=({values:s},t)=>s[t],IE=(s,t)=>{switch(s.type.unit){case st.SECOND:return bb(s,t);case st.MILLISECOND:return Sb(s,t);case st.MICROSECOND:return Tb(s,t);case st.NANOSECOND:return Ab(s,t)}},RE=(s,t)=>{const{stride:i,children:r}=s,c=r[0].slice(t*i,i);return new Ut([c])};tt.prototype.visitNull=rt(mE);tt.prototype.visitBool=rt(vE);tt.prototype.visitInt=rt(SE);tt.prototype.visitInt8=rt(ms);tt.prototype.visitInt16=rt(ms);tt.prototype.visitInt32=rt(ms);tt.prototype.visitInt64=rt(ab);tt.prototype.visitUint8=rt(ms);tt.prototype.visitUint16=rt(ms);tt.prototype.visitUint32=rt(ms);tt.prototype.visitUint64=rt(ab);tt.prototype.visitFloat=rt(TE);tt.prototype.visitFloat16=rt(_E);tt.prototype.visitFloat32=rt(ms);tt.prototype.visitFloat64=rt(ms);tt.prototype.visitUtf8=rt(lb);tt.prototype.visitLargeUtf8=rt(lb);tt.prototype.visitBinary=rt(rb);tt.prototype.visitLargeBinary=rt(rb);tt.prototype.visitFixedSizeBinary=rt(bE);tt.prototype.visitDate=rt(AE);tt.prototype.visitDateDay=rt(nb);tt.prototype.visitDateMillisecond=rt(sb);tt.prototype.visitTimestamp=rt(xE);tt.prototype.visitTimestampSecond=rt(ob);tt.prototype.visitTimestampMillisecond=rt(cb);tt.prototype.visitTimestampMicrosecond=rt(ub);tt.prototype.visitTimestampNanosecond=rt(fb);tt.prototype.visitTime=rt(EE);tt.prototype.visitTimeSecond=rt(db);tt.prototype.visitTimeMillisecond=rt(hb);tt.prototype.visitTimeMicrosecond=rt(yb);tt.prototype.visitTimeNanosecond=rt(pb);tt.prototype.visitDecimal=rt(wE);tt.prototype.visitList=rt(OE);tt.prototype.visitStruct=rt(LE);tt.prototype.visitUnion=rt(CE);tt.prototype.visitDenseUnion=rt(gb);tt.prototype.visitSparseUnion=rt(mb);tt.prototype.visitDictionary=rt(DE);tt.prototype.visitInterval=rt(BE);tt.prototype.visitIntervalDayTime=rt(vb);tt.prototype.visitIntervalYearMonth=rt(_b);tt.prototype.visitDuration=rt(IE);tt.prototype.visitDurationSecond=rt(bb);tt.prototype.visitDurationMillisecond=rt(Sb);tt.prototype.visitDurationMicrosecond=rt(Tb);tt.prototype.visitDurationNanosecond=rt(Ab);tt.prototype.visitFixedSizeList=rt(RE);tt.prototype.visitMap=rt(ME);const Je=new tt,za=Symbol.for("keys"),Ya=Symbol.for("vals"),Ua=Symbol.for("kKeysAsStrings"),rh=Symbol.for("_kKeysAsStrings");class zh{constructor(t){return this[za]=new Ut([t.children[0]]).memoize(),this[Ya]=t.children[1],new Proxy(this,new zE)}get[Ua](){return this[rh]||(this[rh]=Array.from(this[za].toArray(),String))}[Symbol.iterator](){return new NE(this[za],this[Ya])}get size(){return this[za].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[za],i=this[Ya],r={};for(let o=-1,c=t.length;++o<c;)r[t.get(o)]=Je.visit(i,o);return r}toString(){return`{${[...this].map(([t,i])=>`${ml(t)}: ${ml(i)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class NE{constructor(t,i){this.keys=t,this.vals=i,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),Je.visit(this.vals,t)]})}}class zE{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Ua]}has(t,i){return t[Ua].includes(i)}getOwnPropertyDescriptor(t,i){if(t[Ua].indexOf(i)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,i){if(Reflect.has(t,i))return t[i];const r=t[Ua].indexOf(i);if(r!==-1){const o=Je.visit(Reflect.get(t,Ya),r);return Reflect.set(t,i,o),o}}set(t,i,r){const o=t[Ua].indexOf(i);return o!==-1?(Li.visit(Reflect.get(t,Ya),o,r),Reflect.set(t,i,r)):Reflect.has(t,i)?Reflect.set(t,i,r):!1}}Object.defineProperties(zh.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[za]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Ya]:{writable:!0,enumerable:!1,configurable:!1,value:null},[rh]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let yv;function xb(s,t,i,r){const{length:o=0}=s;let c=typeof t!="number"?0:t,d=typeof i!="number"?o:i;return c<0&&(c=(c%o+o)%o),d<0&&(d=(d%o+o)%o),d<c&&(yv=c,c=d,d=yv),d>o&&(d=o),r?r(s,c,d):[c,d]}const Uh=(s,t)=>s<0?t+s:s,pv=s=>s!==s;function ir(s){if(typeof s!=="object"||s===null)return pv(s)?pv:i=>i===s;if(s instanceof Date){const i=s.valueOf();return r=>r instanceof Date?r.valueOf()===i:!1}return ArrayBuffer.isView(s)?i=>i?Rx(s,i):!1:s instanceof Map?FE(s):Array.isArray(s)?UE(s):s instanceof Ut?PE(s):VE(s,!0)}function UE(s){const t=[];for(let i=-1,r=s.length;++i<r;)t[i]=ir(s[i]);return su(t)}function FE(s){let t=-1;const i=[];for(const r of s.values())i[++t]=ir(r);return su(i)}function PE(s){const t=[];for(let i=-1,r=s.length;++i<r;)t[i]=ir(s.get(i));return su(t)}function VE(s,t=!1){const i=Object.keys(s);if(!t&&i.length===0)return()=>!1;const r=[];for(let o=-1,c=i.length;++o<c;)r[o]=ir(s[i[o]]);return su(r,i)}function su(s,t){return i=>{if(!i||typeof i!="object")return!1;switch(i.constructor){case Array:return jE(s,i);case Map:return gv(s,i,i.keys());case zh:case Nh:case Object:case void 0:return gv(s,i,t||Object.keys(i))}return i instanceof Ut?GE(s,i):!1}}function jE(s,t){const i=s.length;if(t.length!==i)return!1;for(let r=-1;++r<i;)if(!s[r](t[r]))return!1;return!0}function GE(s,t){const i=s.length;if(t.length!==i)return!1;for(let r=-1;++r<i;)if(!s[r](t.get(r)))return!1;return!0}function gv(s,t,i){const r=i[Symbol.iterator](),o=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),c=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let d=0;const h=s.length;let y=c.next(),g=r.next(),v=o.next();for(;d<h&&!g.done&&!v.done&&!y.done&&!(g.value!==v.value||!s[d](y.value));++d,g=r.next(),v=o.next(),y=c.next());return d===h&&g.done&&v.done&&y.done?!0:(r.return&&r.return(),o.return&&o.return(),c.return&&c.return(),!1)}function Eb(s,t,i,r){return(i&1<<r)!==0}function HE(s,t,i,r){return(i&1<<r)>>r}function Hc(s,t,i){const r=i.byteLength+7&-8;if(s>0||i.byteLength<r){const o=new Uint8Array(r);return o.set(s%8===0?i.subarray(s>>3):qc(new Fh(i,s,t,null,Eb)).subarray(0,r)),o}return i}function qc(s){const t=[];let i=0,r=0,o=0;for(const d of s)d&&(o|=1<<r),++r===8&&(t[i++]=o,o=r=0);(i===0||r>0)&&(t[i++]=o);const c=new Uint8Array(t.length+7&-8);return c.set(t),c}class Fh{constructor(t,i,r,o,c){this.bytes=t,this.length=r,this.context=o,this.get=c,this.bit=i%8,this.byteIndex=i>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function lh(s,t,i){if(i-t<=0)return 0;if(i-t<8){let c=0;for(const d of new Fh(s,t,i-t,s,HE))c+=d;return c}const r=i>>3<<3,o=t+(t%8===0?0:8-t%8);return lh(s,t,o)+lh(s,r,i)+qE(s,o>>3,r-o>>3)}function qE(s,t,i){let r=0,o=Math.trunc(t);const c=new DataView(s.buffer,s.byteOffset,s.byteLength),d=i===void 0?s.byteLength:o+i;for(;d-o>=4;)r+=Fd(c.getUint32(o)),o+=4;for(;d-o>=2;)r+=Fd(c.getUint16(o)),o+=2;for(;d-o>=1;)r+=Fd(c.getUint8(o)),o+=1;return r}function Fd(s){let t=Math.trunc(s);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const YE=-1;class Gt{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return K.isSparseUnion(t)?this.children.some(i=>i.nullable):K.isDenseUnion(t)?this.children.some(i=>i.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:i,values:r,nullBitmap:o,typeIds:c}=this;return i&&(t+=i.byteLength),r&&(t+=r.byteLength),o&&(t+=o.byteLength),c&&(t+=c.byteLength),this.children.reduce((d,h)=>d+h.byteLength,t)}get nullCount(){if(K.isUnion(this.type))return this.children.reduce((r,o)=>r+o.nullCount,0);let t=this._nullCount,i;return t<=YE&&(i=this.nullBitmap)&&(this._nullCount=t=i.length===0?0:this.length-lh(i,this.offset,this.offset+this.length)),t}constructor(t,i,r,o,c,d=[],h){this.type=t,this.children=d,this.dictionary=h,this.offset=Math.floor(Math.max(i||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(o||0,-1));let y;c instanceof Gt?(this.stride=c.stride,this.values=c.values,this.typeIds=c.typeIds,this.nullBitmap=c.nullBitmap,this.valueOffsets=c.valueOffsets):(this.stride=On(t),c&&((y=c[0])&&(this.valueOffsets=y),(y=c[1])&&(this.values=y),(y=c[2])&&(this.nullBitmap=y),(y=c[3])&&(this.typeIds=y)))}getValid(t){const{type:i}=this;if(K.isUnion(i)){const r=i,o=this.children[r.typeIdToChildIndex[this.typeIds[t]]],c=r.mode===Ie.Dense?this.valueOffsets[t]:t;return o.getValid(c)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,i){let r;const{type:o}=this;if(K.isUnion(o)){const c=o,d=this.children[c.typeIdToChildIndex[this.typeIds[t]]],h=c.mode===Ie.Dense?this.valueOffsets[t]:t;r=d.getValid(h),d.setValid(h,i)}else{let{nullBitmap:c}=this;const{offset:d,length:h}=this,y=d+t,g=1<<y%8,v=y>>3;(!c||c.byteLength<=v)&&(c=new Uint8Array((d+h+63&-64)>>3).fill(255),this.nullCount>0?(c.set(Hc(d,h,this.nullBitmap),0),Object.assign(this,{nullBitmap:c})):Object.assign(this,{nullBitmap:c,_nullCount:0}));const b=c[v];r=(b&g)!==0,c[v]=i?b|g:b&~g}return r!==!!i&&(this._nullCount=this.nullCount+(i?-1:1)),i}clone(t=this.type,i=this.offset,r=this.length,o=this._nullCount,c=this,d=this.children){return new Gt(t,i,r,o,c,d,this.dictionary)}slice(t,i){const{stride:r,typeId:o,children:c}=this,d=+(this._nullCount===0)-1,h=o===16?r:1,y=this._sliceBuffers(t,i,r,o);return this.clone(this.type,this.offset+t,i,d,y,c.length===0||this.valueOffsets?c:this._sliceChildren(c,h*t,h*i))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===A.Null)return this.clone(this.type,0,t,0);const{length:i,nullCount:r}=this,o=new Uint8Array((t+63&-64)>>3).fill(255,0,i>>3);o[i>>3]=(1<<i-(i&-8))-1,r>0&&o.set(Hc(this.offset,i,this.nullBitmap),0);const c=this.buffers;return c[wn.VALIDITY]=o,this.clone(this.type,0,t,r+(t-i),c)}_sliceBuffers(t,i,r,o){let c;const{buffers:d}=this;return(c=d[wn.TYPE])&&(d[wn.TYPE]=c.subarray(t,t+i)),(c=d[wn.OFFSET])&&(d[wn.OFFSET]=c.subarray(t,t+i+1))||(c=d[wn.DATA])&&(d[wn.DATA]=o===6?c:c.subarray(r*t,r*(t+i))),d}_sliceChildren(t,i,r){return t.map(o=>o.slice(i,r))}}Gt.prototype.children=Object.freeze([]);class dl extends mt{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:i,["offset"]:r=0,["length"]:o=0}=t;return new Gt(i,r,o,o)}visitBool(t){const{["type"]:i,["offset"]:r=0}=t,o=Et(t.nullBitmap),c=qt(i.ArrayType,t.data),{["length"]:d=c.length>>3,["nullCount"]:h=t.nullBitmap?-1:0}=t;return new Gt(i,r,d,h,[void 0,c,o])}visitInt(t){const{["type"]:i,["offset"]:r=0}=t,o=Et(t.nullBitmap),c=qt(i.ArrayType,t.data),{["length"]:d=c.length,["nullCount"]:h=t.nullBitmap?-1:0}=t;return new Gt(i,r,d,h,[void 0,c,o])}visitFloat(t){const{["type"]:i,["offset"]:r=0}=t,o=Et(t.nullBitmap),c=qt(i.ArrayType,t.data),{["length"]:d=c.length,["nullCount"]:h=t.nullBitmap?-1:0}=t;return new Gt(i,r,d,h,[void 0,c,o])}visitUtf8(t){const{["type"]:i,["offset"]:r=0}=t,o=Et(t.data),c=Et(t.nullBitmap),d=tl(t.valueOffsets),{["length"]:h=d.length-1,["nullCount"]:y=t.nullBitmap?-1:0}=t;return new Gt(i,r,h,y,[d,o,c])}visitLargeUtf8(t){const{["type"]:i,["offset"]:r=0}=t,o=Et(t.data),c=Et(t.nullBitmap),d=nv(t.valueOffsets),{["length"]:h=d.length-1,["nullCount"]:y=t.nullBitmap?-1:0}=t;return new Gt(i,r,h,y,[d,o,c])}visitBinary(t){const{["type"]:i,["offset"]:r=0}=t,o=Et(t.data),c=Et(t.nullBitmap),d=tl(t.valueOffsets),{["length"]:h=d.length-1,["nullCount"]:y=t.nullBitmap?-1:0}=t;return new Gt(i,r,h,y,[d,o,c])}visitLargeBinary(t){const{["type"]:i,["offset"]:r=0}=t,o=Et(t.data),c=Et(t.nullBitmap),d=nv(t.valueOffsets),{["length"]:h=d.length-1,["nullCount"]:y=t.nullBitmap?-1:0}=t;return new Gt(i,r,h,y,[d,o,c])}visitFixedSizeBinary(t){const{["type"]:i,["offset"]:r=0}=t,o=Et(t.nullBitmap),c=qt(i.ArrayType,t.data),{["length"]:d=c.length/On(i),["nullCount"]:h=t.nullBitmap?-1:0}=t;return new Gt(i,r,d,h,[void 0,c,o])}visitDate(t){const{["type"]:i,["offset"]:r=0}=t,o=Et(t.nullBitmap),c=qt(i.ArrayType,t.data),{["length"]:d=c.length/On(i),["nullCount"]:h=t.nullBitmap?-1:0}=t;return new Gt(i,r,d,h,[void 0,c,o])}visitTimestamp(t){const{["type"]:i,["offset"]:r=0}=t,o=Et(t.nullBitmap),c=qt(i.ArrayType,t.data),{["length"]:d=c.length/On(i),["nullCount"]:h=t.nullBitmap?-1:0}=t;return new Gt(i,r,d,h,[void 0,c,o])}visitTime(t){const{["type"]:i,["offset"]:r=0}=t,o=Et(t.nullBitmap),c=qt(i.ArrayType,t.data),{["length"]:d=c.length/On(i),["nullCount"]:h=t.nullBitmap?-1:0}=t;return new Gt(i,r,d,h,[void 0,c,o])}visitDecimal(t){const{["type"]:i,["offset"]:r=0}=t,o=Et(t.nullBitmap),c=qt(i.ArrayType,t.data),{["length"]:d=c.length/On(i),["nullCount"]:h=t.nullBitmap?-1:0}=t;return new Gt(i,r,d,h,[void 0,c,o])}visitList(t){const{["type"]:i,["offset"]:r=0,["child"]:o}=t,c=Et(t.nullBitmap),d=tl(t.valueOffsets),{["length"]:h=d.length-1,["nullCount"]:y=t.nullBitmap?-1:0}=t;return new Gt(i,r,h,y,[d,void 0,c],[o])}visitStruct(t){const{["type"]:i,["offset"]:r=0,["children"]:o=[]}=t,c=Et(t.nullBitmap),{length:d=o.reduce((y,{length:g})=>Math.max(y,g),0),nullCount:h=t.nullBitmap?-1:0}=t;return new Gt(i,r,d,h,[void 0,void 0,c],o)}visitUnion(t){const{["type"]:i,["offset"]:r=0,["children"]:o=[]}=t,c=qt(i.ArrayType,t.typeIds),{["length"]:d=c.length,["nullCount"]:h=-1}=t;if(K.isSparseUnion(i))return new Gt(i,r,d,h,[void 0,void 0,void 0,c],o);const y=tl(t.valueOffsets);return new Gt(i,r,d,h,[y,void 0,void 0,c],o)}visitDictionary(t){const{["type"]:i,["offset"]:r=0}=t,o=Et(t.nullBitmap),c=qt(i.indices.ArrayType,t.data),{["dictionary"]:d=new Ut([new dl().visit({type:i.dictionary})])}=t,{["length"]:h=c.length,["nullCount"]:y=t.nullBitmap?-1:0}=t;return new Gt(i,r,h,y,[void 0,c,o],[],d)}visitInterval(t){const{["type"]:i,["offset"]:r=0}=t,o=Et(t.nullBitmap),c=qt(i.ArrayType,t.data),{["length"]:d=c.length/On(i),["nullCount"]:h=t.nullBitmap?-1:0}=t;return new Gt(i,r,d,h,[void 0,c,o])}visitDuration(t){const{["type"]:i,["offset"]:r=0}=t,o=Et(t.nullBitmap),c=qt(i.ArrayType,t.data),{["length"]:d=c.length,["nullCount"]:h=t.nullBitmap?-1:0}=t;return new Gt(i,r,d,h,[void 0,c,o])}visitFixedSizeList(t){const{["type"]:i,["offset"]:r=0,["child"]:o=new dl().visit({type:i.valueType})}=t,c=Et(t.nullBitmap),{["length"]:d=o.length/On(i),["nullCount"]:h=t.nullBitmap?-1:0}=t;return new Gt(i,r,d,h,[void 0,void 0,c],[o])}visitMap(t){const{["type"]:i,["offset"]:r=0,["child"]:o=new dl().visit({type:i.childType})}=t,c=Et(t.nullBitmap),d=tl(t.valueOffsets),{["length"]:h=d.length-1,["nullCount"]:y=t.nullBitmap?-1:0}=t;return new Gt(i,r,h,y,[d,void 0,c],[o])}}const kE=new dl;function vt(s){return kE.visit(s)}class mv{constructor(t=0,i){this.numChunks=t,this.getChunkIterator=i,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function QE(s){return s.some(t=>t.nullable)}function wb(s){return s.reduce((t,i)=>t+i.nullCount,0)}function Ob(s){return s.reduce((t,i,r)=>(t[r+1]=t[r]+i.length,t),new Uint32Array(s.length+1))}function Mb(s,t,i,r){const o=[];for(let c=-1,d=s.length;++c<d;){const h=s[c],y=t[c],{length:g}=h;if(y>=r)break;if(i>=y+g)continue;if(y>=i&&y+g<=r){o.push(h);continue}const v=Math.max(0,i-y),b=Math.min(r-y,g);o.push(h.slice(v,b-v))}return o.length===0&&o.push(s[0].slice(0,0)),o}function Ph(s,t,i,r){let o=0,c=0,d=t.length-1;do{if(o>=d-1)return i<t[d]?r(s,o,i-t[o]):null;c=o+Math.trunc((d-o)*.5),i<t[c]?d=c:o=c}while(o<d)}function Vh(s,t){return s.getValid(t)}function Yc(s){function t(i,r,o){return s(i[r],o)}return function(i){const r=this.data;return Ph(r,this._offsets,i,t)}}function Lb(s){let t;function i(r,o,c){return s(r[o],c,t)}return function(r,o){const c=this.data;t=o;const d=Ph(c,this._offsets,r,i);return t=void 0,d}}function Cb(s){let t;function i(r,o,c){let d=c,h=0,y=0;for(let g=o-1,v=r.length;++g<v;){const b=r[g];if(~(h=s(b,t,d)))return y+h;d=0,y+=b.length}return-1}return function(r,o){t=r;const c=this.data,d=typeof o!="number"?i(c,0,0):Ph(c,this._offsets,o,i);return t=void 0,d}}class et extends mt{}function ZE(s,t){return t===null&&s.length>0?0:-1}function XE(s,t){const{nullBitmap:i}=s;if(!i||s.nullCount<=0)return-1;let r=0;for(const o of new Fh(i,s.offset+(t||0),s.length,i,Eb)){if(!o)return r;++r}return-1}function ct(s,t,i){if(t===void 0)return-1;if(t===null)switch(s.typeId){case A.Union:break;case A.Dictionary:break;default:return XE(s,i)}const r=Je.getVisitFn(s),o=ir(t);for(let c=(i||0)-1,d=s.length;++c<d;)if(o(r(s,c)))return c;return-1}function Db(s,t,i){const r=Je.getVisitFn(s),o=ir(t);for(let c=(i||0)-1,d=s.length;++c<d;)if(o(r(s,c)))return c;return-1}et.prototype.visitNull=ZE;et.prototype.visitBool=ct;et.prototype.visitInt=ct;et.prototype.visitInt8=ct;et.prototype.visitInt16=ct;et.prototype.visitInt32=ct;et.prototype.visitInt64=ct;et.prototype.visitUint8=ct;et.prototype.visitUint16=ct;et.prototype.visitUint32=ct;et.prototype.visitUint64=ct;et.prototype.visitFloat=ct;et.prototype.visitFloat16=ct;et.prototype.visitFloat32=ct;et.prototype.visitFloat64=ct;et.prototype.visitUtf8=ct;et.prototype.visitLargeUtf8=ct;et.prototype.visitBinary=ct;et.prototype.visitLargeBinary=ct;et.prototype.visitFixedSizeBinary=ct;et.prototype.visitDate=ct;et.prototype.visitDateDay=ct;et.prototype.visitDateMillisecond=ct;et.prototype.visitTimestamp=ct;et.prototype.visitTimestampSecond=ct;et.prototype.visitTimestampMillisecond=ct;et.prototype.visitTimestampMicrosecond=ct;et.prototype.visitTimestampNanosecond=ct;et.prototype.visitTime=ct;et.prototype.visitTimeSecond=ct;et.prototype.visitTimeMillisecond=ct;et.prototype.visitTimeMicrosecond=ct;et.prototype.visitTimeNanosecond=ct;et.prototype.visitDecimal=ct;et.prototype.visitList=ct;et.prototype.visitStruct=ct;et.prototype.visitUnion=ct;et.prototype.visitDenseUnion=Db;et.prototype.visitSparseUnion=Db;et.prototype.visitDictionary=ct;et.prototype.visitInterval=ct;et.prototype.visitIntervalDayTime=ct;et.prototype.visitIntervalYearMonth=ct;et.prototype.visitDuration=ct;et.prototype.visitDurationSecond=ct;et.prototype.visitDurationMillisecond=ct;et.prototype.visitDurationMicrosecond=ct;et.prototype.visitDurationNanosecond=ct;et.prototype.visitFixedSizeList=ct;et.prototype.visitMap=ct;const kc=new et;class it extends mt{}function lt(s){const{type:t}=s;if(s.nullCount===0&&s.stride===1&&(K.isInt(t)&&t.bitWidth!==64||K.isTime(t)&&t.bitWidth!==64||K.isFloat(t)&&t.precision!==Be.HALF))return new mv(s.data.length,r=>{const o=s.data[r];return o.values.subarray(0,o.length)[Symbol.iterator]()});let i=0;return new mv(s.data.length,r=>{const c=s.data[r].length,d=s.slice(i,i+c);return i+=c,new KE(d)})}class KE{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}it.prototype.visitNull=lt;it.prototype.visitBool=lt;it.prototype.visitInt=lt;it.prototype.visitInt8=lt;it.prototype.visitInt16=lt;it.prototype.visitInt32=lt;it.prototype.visitInt64=lt;it.prototype.visitUint8=lt;it.prototype.visitUint16=lt;it.prototype.visitUint32=lt;it.prototype.visitUint64=lt;it.prototype.visitFloat=lt;it.prototype.visitFloat16=lt;it.prototype.visitFloat32=lt;it.prototype.visitFloat64=lt;it.prototype.visitUtf8=lt;it.prototype.visitLargeUtf8=lt;it.prototype.visitBinary=lt;it.prototype.visitLargeBinary=lt;it.prototype.visitFixedSizeBinary=lt;it.prototype.visitDate=lt;it.prototype.visitDateDay=lt;it.prototype.visitDateMillisecond=lt;it.prototype.visitTimestamp=lt;it.prototype.visitTimestampSecond=lt;it.prototype.visitTimestampMillisecond=lt;it.prototype.visitTimestampMicrosecond=lt;it.prototype.visitTimestampNanosecond=lt;it.prototype.visitTime=lt;it.prototype.visitTimeSecond=lt;it.prototype.visitTimeMillisecond=lt;it.prototype.visitTimeMicrosecond=lt;it.prototype.visitTimeNanosecond=lt;it.prototype.visitDecimal=lt;it.prototype.visitList=lt;it.prototype.visitStruct=lt;it.prototype.visitUnion=lt;it.prototype.visitDenseUnion=lt;it.prototype.visitSparseUnion=lt;it.prototype.visitDictionary=lt;it.prototype.visitInterval=lt;it.prototype.visitIntervalDayTime=lt;it.prototype.visitIntervalYearMonth=lt;it.prototype.visitDuration=lt;it.prototype.visitDurationSecond=lt;it.prototype.visitDurationMillisecond=lt;it.prototype.visitDurationMicrosecond=lt;it.prototype.visitDurationNanosecond=lt;it.prototype.visitFixedSizeList=lt;it.prototype.visitMap=lt;const jh=new it;var Bb;const Ib={},Rb={};class Ut{constructor(t){var i,r,o;const c=t[0]instanceof Ut?t.flatMap(h=>h.data):t;if(c.length===0||c.some(h=>!(h instanceof Gt)))throw new TypeError("Vector constructor expects an Array of Data instances.");const d=(i=c[0])===null||i===void 0?void 0:i.type;switch(c.length){case 0:this._offsets=[0];break;case 1:{const{get:h,set:y,indexOf:g}=Ib[d.typeId],v=c[0];this.isValid=b=>Vh(v,b),this.get=b=>h(v,b),this.set=(b,E)=>y(v,b,E),this.indexOf=b=>g(v,b),this._offsets=[0,v.length];break}default:Object.setPrototypeOf(this,Rb[d.typeId]),this._offsets=Ob(c);break}this.data=c,this.type=d,this.stride=On(d),this.numChildren=(o=(r=d.children)===null||r===void 0?void 0:r.length)!==null&&o!==void 0?o:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,i)=>t+i.byteLength,0)}get nullable(){return QE(this.data)}get nullCount(){return wb(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${A[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}at(t){return this.get(Uh(t,this.length))}set(t,i){}indexOf(t,i){return-1}includes(t,i){return this.indexOf(t,i)>-1}[Symbol.iterator](){return jh.visit(this)}concat(...t){return new Ut(this.data.concat(t.flatMap(i=>i.data).flat(Number.POSITIVE_INFINITY)))}slice(t,i){return new Ut(xb(this,t,i,({data:r,_offsets:o},c,d)=>Mb(r,o,c,d)))}toJSON(){return[...this]}toArray(){const{type:t,data:i,length:r,stride:o,ArrayType:c}=this;switch(t.typeId){case A.Int:case A.Float:case A.Decimal:case A.Time:case A.Timestamp:switch(i.length){case 0:return new c;case 1:return i[0].values.subarray(0,r*o);default:return i.reduce((d,{values:h,length:y})=>(d.array.set(h.subarray(0,y*o),d.offset),d.offset+=y*o,d),{array:new c(r*o),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var i;return this.getChildAt((i=this.type.children)===null||i===void 0?void 0:i.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new Ut(this.data.map(({children:i})=>i[t])):null}get isMemoized(){return K.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(K.isDictionary(this.type)){const t=new Qc(this.data[0].dictionary),i=this.data.map(r=>{const o=r.clone();return o.dictionary=t,o});return new Ut(i)}return new Qc(this)}unmemoize(){if(K.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),i=this.data.map(r=>{const o=r.clone();return o.dictionary=t,o});return new Ut(i)}return this}}Bb=Symbol.toStringTag;Ut[Bb]=(s=>{s.type=K.prototype,s.data=[],s.length=0,s.stride=1,s.numChildren=0,s._offsets=new Uint32Array([0]),s[Symbol.isConcatSpreadable]=!0;const t=Object.keys(A).map(i=>A[i]).filter(i=>typeof i=="number"&&i!==A.NONE);for(const i of t){const r=Je.getVisitFnByTypeId(i),o=Li.getVisitFnByTypeId(i),c=kc.getVisitFnByTypeId(i);Ib[i]={get:r,set:o,indexOf:c},Rb[i]=Object.create(s,{isValid:{value:Yc(Vh)},get:{value:Yc(Je.getVisitFnByTypeId(i))},set:{value:Lb(Li.getVisitFnByTypeId(i))},indexOf:{value:Cb(kc.getVisitFnByTypeId(i))}})}return"Vector"})(Ut.prototype);class Qc extends Ut{constructor(t){super(t.data);const i=this.get,r=this.set,o=this.slice,c=new Array(this.length);Object.defineProperty(this,"get",{value(d){const h=c[d];if(h!==void 0)return h;const y=i.call(this,d);return c[d]=y,y}}),Object.defineProperty(this,"set",{value(d,h){r.call(this,d,h),c[d]=h}}),Object.defineProperty(this,"slice",{value:(d,h)=>new Qc(o.call(this,d,h))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new Ut(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}class oh{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,i,r,o){return t.prep(8,24),t.writeInt64(BigInt(o??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(i??0)),t.offset()}}class ci{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsFooter(t,i){return(i||new ci).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,i){return t.setPosition(t.position()+Pt),(i||new ci).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ye.V1}schema(t){const i=this.bb.__offset(this.bb_pos,6);return i?(t||new ki).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}dictionaries(t,i){const r=this.bb.__offset(this.bb_pos,8);return r?(i||new oh).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,i){const r=this.bb.__offset(this.bb_pos,10);return r?(i||new oh).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,i){const r=this.bb.__offset(this.bb_pos,12);return r?(i||new Te).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,i){t.addFieldInt16(0,i,ye.V1)}static addSchema(t,i){t.addFieldOffset(1,i,0)}static addDictionaries(t,i){t.addFieldOffset(2,i,0)}static startDictionariesVector(t,i){t.startVector(24,i,8)}static addRecordBatches(t,i){t.addFieldOffset(3,i,0)}static startRecordBatchesVector(t,i){t.startVector(24,i,8)}static addCustomMetadata(t,i){t.addFieldOffset(4,i,0)}static createCustomMetadataVector(t,i){t.startVector(4,i.length,4);for(let r=i.length-1;r>=0;r--)t.addOffset(i[r]);return t.endVector()}static startCustomMetadataVector(t,i){t.startVector(4,i,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,i){t.finish(i)}static finishSizePrefixedFooterBuffer(t,i){t.finish(i,void 0,!0)}}class Ft{constructor(t=[],i,r,o=ye.V5){this.fields=t||[],this.metadata=i||new Map,r||(r=ch(this.fields)),this.dictionaries=r,this.metadataVersion=o}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,i)=>`${i}: ${t}`).join(", ")} }>`}select(t){const i=new Set(t),r=this.fields.filter(o=>i.has(o.name));return new Ft(r,this.metadata)}selectAt(t){const i=t.map(r=>this.fields[r]).filter(Boolean);return new Ft(i,this.metadata)}assign(...t){const i=t[0]instanceof Ft?t[0]:Array.isArray(t[0])?new Ft(t[0]):new Ft(t),r=[...this.fields],o=nc(nc(new Map,this.metadata),i.metadata),c=i.fields.filter(h=>{const y=r.findIndex(g=>g.name===h.name);return~y?(r[y]=h.clone({metadata:nc(nc(new Map,r[y].metadata),h.metadata)}))&&!1:!0}),d=ch(c,new Map);return new Ft([...r,...c],o,new Map([...this.dictionaries,...d]))}}Ft.prototype.fields=null;Ft.prototype.metadata=null;Ft.prototype.dictionaries=null;class ne{static new(...t){let[i,r,o,c]=t;return t[0]&&typeof t[0]=="object"&&({name:i}=t[0],r===void 0&&(r=t[0].type),o===void 0&&(o=t[0].nullable),c===void 0&&(c=t[0].metadata)),new ne(`${i}`,r,o,c)}constructor(t,i,r=!1,o){this.name=t,this.type=i,this.nullable=r,this.metadata=o||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[i,r,o,c]=t;return!t[0]||typeof t[0]!="object"?[i=this.name,r=this.type,o=this.nullable,c=this.metadata]=t:{name:i=this.name,type:r=this.type,nullable:o=this.nullable,metadata:c=this.metadata}=t[0],ne.new(i,r,o,c)}}ne.prototype.type=null;ne.prototype.name=null;ne.prototype.nullable=null;ne.prototype.metadata=null;function nc(s,t){return new Map([...s||new Map,...t||new Map])}function ch(s,t=new Map){for(let i=-1,r=s.length;++i<r;){const c=s[i].type;if(K.isDictionary(c)){if(!t.has(c.id))t.set(c.id,c.dictionary);else if(t.get(c.id)!==c.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}c.children&&c.children.length>0&&ch(c.children,t)}return t}var WE=s_,JE=Qa;class Sl{static decode(t){t=new JE(Et(t));const i=ci.getRootAsFooter(t),r=Ft.decode(i.schema(),new Map,i.version());return new $E(r,i)}static encode(t){const i=new WE,r=Ft.encode(i,t.schema);ci.startRecordBatchesVector(i,t.numRecordBatches);for(const d of[...t.recordBatches()].slice().reverse())ys.encode(i,d);const o=i.endVector();ci.startDictionariesVector(i,t.numDictionaries);for(const d of[...t.dictionaryBatches()].slice().reverse())ys.encode(i,d);const c=i.endVector();return ci.startFooter(i),ci.addSchema(i,r),ci.addVersion(i,ye.V5),ci.addRecordBatches(i,o),ci.addDictionaries(i,c),ci.finishFooterBuffer(i,ci.endFooter(i)),i.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,i=ye.V5,r,o){this.schema=t,this.version=i,r&&(this._recordBatches=r),o&&(this._dictionaryBatches=o)}*recordBatches(){for(let t,i=-1,r=this.numRecordBatches;++i<r;)(t=this.getRecordBatch(i))&&(yield t)}*dictionaryBatches(){for(let t,i=-1,r=this.numDictionaries;++i<r;)(t=this.getDictionaryBatch(i))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class $E extends Sl{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,i){super(t,i.version()),this._footer=i}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const i=this._footer.recordBatches(t);if(i)return ys.decode(i)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const i=this._footer.dictionaries(t);if(i)return ys.decode(i)}return null}}class ys{static decode(t){return new ys(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,i){const{metaDataLength:r}=i,o=BigInt(i.offset),c=BigInt(i.bodyLength);return oh.createBlock(t,o,r,c)}constructor(t,i,r){this.metaDataLength=t,this.offset=Wt(r),this.bodyLength=Wt(i)}}const le=Object.freeze({done:!0,value:void 0});class vv{constructor(t){this._json=t}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class Gh{tee(){return this._getDOMStream().tee()}pipe(t,i){return this._getNodeStream().pipe(t,i)}pipeTo(t,i){return this._getDOMStream().pipeTo(t,i)}pipeThrough(t,i){return this._getDOMStream().pipeThrough(t,i)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class tw extends Gh{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return ut(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(le);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return xi.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return xi.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return ut(this,void 0,void 0,function*(){return yield this.abort(t),le})}return(t){return ut(this,void 0,void 0,function*(){return yield this.close(),le})}read(t){return ut(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return ut(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((i,r)=>{this.resolvers.push({resolve:i,reject:r})}):Promise.resolve(le)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class gc extends tw{write(t){if((t=Et(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?th(this.toUint8Array(!0)):this.toUint8Array(!1).then(th)}toUint8Array(t=!1){return t?tn(this._values)[0]:ut(this,void 0,void 0,function*(){var i,r,o,c;const d=[];let h=0;try{for(var y=!0,g=Fs(this),v;v=yield g.next(),i=v.done,!i;y=!0){c=v.value,y=!1;const b=c;d.push(b),h+=b.byteLength}}catch(b){r={error:b}}finally{try{!y&&!i&&(o=g.return)&&(yield o.call(g))}finally{if(r)throw r.error}}return tn(d,h)[0]})}}class Zc{constructor(t){t&&(this.source=new ew(xi.fromIterable(t)))}[Symbol.iterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class Ka{constructor(t){t instanceof Ka?this.source=t.source:t instanceof gc?this.source=new zs(xi.fromAsyncIterable(t)):t_(t)?this.source=new zs(xi.fromNodeStream(t)):Dh(t)?this.source=new zs(xi.fromDOMStream(t)):$v(t)?this.source=new zs(xi.fromDOMStream(t.body)):Al(t)?this.source=new zs(xi.fromIterable(t)):Ps(t)?this.source=new zs(xi.fromAsyncIterable(t)):er(t)&&(this.source=new zs(xi.fromAsyncIterable(t)))}[Symbol.asyncIterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}get closed(){return this.source.closed}cancel(t){return this.source.cancel(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class ew{constructor(t){this.source=t}cancel(t){this.return(t)}peek(t){return this.next(t,"peek").value}read(t){return this.next(t,"read").value}next(t,i="read"){return this.source.next({cmd:i,size:t})}throw(t){return Object.create(this.source.throw&&this.source.throw(t)||le)}return(t){return Object.create(this.source.return&&this.source.return(t)||le)}}class zs{constructor(t){this.source=t,this._closedPromise=new Promise(i=>this._closedPromiseResolve=i)}cancel(t){return ut(this,void 0,void 0,function*(){yield this.return(t)})}get closed(){return this._closedPromise}read(t){return ut(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return ut(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(t){return ut(this,arguments,void 0,function*(i,r="read"){return yield this.source.next({cmd:r,size:i})})}throw(t){return ut(this,void 0,void 0,function*(){const i=this.source.throw&&(yield this.source.throw(t))||le;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(i)})}return(t){return ut(this,void 0,void 0,function*(){const i=this.source.return&&(yield this.source.return(t))||le;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(i)})}}class _v extends Zc{constructor(t,i){super(),this.position=0,this.buffer=Et(t),this.size=i===void 0?this.buffer.byteLength:i}readInt32(t){const{buffer:i,byteOffset:r}=this.readAt(t,4);return new DataView(i,r).getInt32(0,!0)}seek(t){return this.position=Math.min(t,this.size),t<this.size}read(t){const{buffer:i,size:r,position:o}=this;return i&&o<r?(typeof t!="number"&&(t=Number.POSITIVE_INFINITY),this.position=Math.min(r,o+Math.min(r-o,t)),i.subarray(o,this.position)):null}readAt(t,i){const r=this.buffer,o=Math.min(this.size,t+i);return r?r.subarray(t,o):new Uint8Array(i)}close(){this.buffer&&(this.buffer=null)}throw(t){return this.close(),{done:!0,value:t}}return(t){return this.close(),{done:!0,value:t}}}class Xc extends Ka{constructor(t,i){super(),this.position=0,this._handle=t,typeof i=="number"?this.size=i:this._pending=ut(this,void 0,void 0,function*(){this.size=(yield t.stat()).size,delete this._pending})}readInt32(t){return ut(this,void 0,void 0,function*(){const{buffer:i,byteOffset:r}=yield this.readAt(t,4);return new DataView(i,r).getInt32(0,!0)})}seek(t){return ut(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(t,this.size),t<this.size})}read(t){return ut(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:i,size:r,position:o}=this;if(i&&o<r){typeof t!="number"&&(t=Number.POSITIVE_INFINITY);let c=o,d=0,h=0;const y=Math.min(r,c+Math.min(r-c,t)),g=new Uint8Array(Math.max(0,(this.position=y)-c));for(;(c+=h)<y&&(d+=h)<g.byteLength;)({bytesRead:h}=yield i.read(g,d,g.byteLength-d,c));return g}return null})}readAt(t,i){return ut(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:r,size:o}=this;if(r&&t+i<o){const c=Math.min(o,t+i),d=new Uint8Array(c-t);return(yield r.read(d,0,i,t)).buffer}return new Uint8Array(i)})}close(){return ut(this,void 0,void 0,function*(){const t=this._handle;this._handle=null,t&&(yield t.close())})}throw(t){return ut(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}return(t){return ut(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}}const iw=65536;function Va(s){return s<0&&(s=4294967295+s+1),`0x${s.toString(16)}`}const Wa=8,Hh=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class Nb{constructor(t){this.buffer=t}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(t){const i=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),r=new Uint32Array([t.buffer[1]>>>16,t.buffer[1]&65535,t.buffer[0]>>>16,t.buffer[0]&65535]);let o=i[3]*r[3];this.buffer[0]=o&65535;let c=o>>>16;return o=i[2]*r[3],c+=o,o=i[3]*r[2]>>>0,c+=o,this.buffer[0]+=c<<16,this.buffer[1]=c>>>0<o?iw:0,this.buffer[1]+=c>>>16,this.buffer[1]+=i[1]*r[3]+i[2]*r[2]+i[3]*r[1],this.buffer[1]+=i[0]*r[3]+i[1]*r[2]+i[2]*r[1]+i[3]*r[0]<<16,this}_plus(t){const i=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],i<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=i}lessThan(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]}equals(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]}greaterThan(t){return t.lessThan(this)}hex(){return`${Va(this.buffer[1])} ${Va(this.buffer[0])}`}}class Ht extends Nb{times(t){return this._times(t),this}plus(t){return this._plus(t),this}static from(t,i=new Uint32Array(2)){return Ht.fromString(typeof t=="string"?t:t.toString(),i)}static fromNumber(t,i=new Uint32Array(2)){return Ht.fromString(t.toString(),i)}static fromString(t,i=new Uint32Array(2)){const r=t.length,o=new Ht(i);for(let c=0;c<r;){const d=Wa<r-c?Wa:r-c,h=new Ht(new Uint32Array([Number.parseInt(t.slice(c,c+d),10),0])),y=new Ht(new Uint32Array([Hh[d],0]));o.times(y),o.plus(h),c+=d}return o}static convertArray(t){const i=new Uint32Array(t.length*2);for(let r=-1,o=t.length;++r<o;)Ht.from(t[r],new Uint32Array(i.buffer,i.byteOffset+2*r*4,2));return i}static multiply(t,i){return new Ht(new Uint32Array(t.buffer)).times(i)}static add(t,i){return new Ht(new Uint32Array(t.buffer)).plus(i)}}class Ze extends Nb{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(t){return this._times(t),this}plus(t){return this._plus(t),this}lessThan(t){const i=this.buffer[1]<<0,r=t.buffer[1]<<0;return i<r||i===r&&this.buffer[0]<t.buffer[0]}static from(t,i=new Uint32Array(2)){return Ze.fromString(typeof t=="string"?t:t.toString(),i)}static fromNumber(t,i=new Uint32Array(2)){return Ze.fromString(t.toString(),i)}static fromString(t,i=new Uint32Array(2)){const r=t.startsWith("-"),o=t.length,c=new Ze(i);for(let d=r?1:0;d<o;){const h=Wa<o-d?Wa:o-d,y=new Ze(new Uint32Array([Number.parseInt(t.slice(d,d+h),10),0])),g=new Ze(new Uint32Array([Hh[h],0]));c.times(g),c.plus(y),d+=h}return r?c.negate():c}static convertArray(t){const i=new Uint32Array(t.length*2);for(let r=-1,o=t.length;++r<o;)Ze.from(t[r],new Uint32Array(i.buffer,i.byteOffset+2*r*4,2));return i}static multiply(t,i){return new Ze(new Uint32Array(t.buffer)).times(i)}static add(t,i){return new Ze(new Uint32Array(t.buffer)).plus(i)}}class Qi{constructor(t){this.buffer=t}high(){return new Ze(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new Ze(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(t){const i=new Ht(new Uint32Array([this.buffer[3],0])),r=new Ht(new Uint32Array([this.buffer[2],0])),o=new Ht(new Uint32Array([this.buffer[1],0])),c=new Ht(new Uint32Array([this.buffer[0],0])),d=new Ht(new Uint32Array([t.buffer[3],0])),h=new Ht(new Uint32Array([t.buffer[2],0])),y=new Ht(new Uint32Array([t.buffer[1],0])),g=new Ht(new Uint32Array([t.buffer[0],0]));let v=Ht.multiply(c,g);this.buffer[0]=v.low();const b=new Ht(new Uint32Array([v.high(),0]));return v=Ht.multiply(o,g),b.plus(v),v=Ht.multiply(c,y),b.plus(v),this.buffer[1]=b.low(),this.buffer[3]=b.lessThan(v)?1:0,this.buffer[2]=b.high(),new Ht(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(Ht.multiply(r,g)).plus(Ht.multiply(o,y)).plus(Ht.multiply(c,h)),this.buffer[3]+=Ht.multiply(i,g).plus(Ht.multiply(r,y)).plus(Ht.multiply(o,h)).plus(Ht.multiply(c,d)).low(),this}plus(t){const i=new Uint32Array(4);return i[3]=this.buffer[3]+t.buffer[3]>>>0,i[2]=this.buffer[2]+t.buffer[2]>>>0,i[1]=this.buffer[1]+t.buffer[1]>>>0,i[0]=this.buffer[0]+t.buffer[0]>>>0,i[0]<this.buffer[0]>>>0&&++i[1],i[1]<this.buffer[1]>>>0&&++i[2],i[2]<this.buffer[2]>>>0&&++i[3],this.buffer[3]=i[3],this.buffer[2]=i[2],this.buffer[1]=i[1],this.buffer[0]=i[0],this}hex(){return`${Va(this.buffer[3])} ${Va(this.buffer[2])} ${Va(this.buffer[1])} ${Va(this.buffer[0])}`}static multiply(t,i){return new Qi(new Uint32Array(t.buffer)).times(i)}static add(t,i){return new Qi(new Uint32Array(t.buffer)).plus(i)}static from(t,i=new Uint32Array(4)){return Qi.fromString(typeof t=="string"?t:t.toString(),i)}static fromNumber(t,i=new Uint32Array(4)){return Qi.fromString(t.toString(),i)}static fromString(t,i=new Uint32Array(4)){const r=t.startsWith("-"),o=t.length,c=new Qi(i);for(let d=r?1:0;d<o;){const h=Wa<o-d?Wa:o-d,y=new Qi(new Uint32Array([Number.parseInt(t.slice(d,d+h),10),0,0,0])),g=new Qi(new Uint32Array([Hh[h],0,0,0]));c.times(g),c.plus(y),d+=h}return r?c.negate():c}static convertArray(t){const i=new Uint32Array(t.length*4);for(let r=-1,o=t.length;++r<o;)Qi.from(t[r],new Uint32Array(i.buffer,i.byteOffset+16*r,4));return i}}class zb extends mt{constructor(t,i,r,o,c=ye.V5){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=t,this.nodes=i,this.buffers=r,this.dictionaries=o,this.metadataVersion=c}visit(t){return super.visit(t instanceof ne?t.type:t)}visitNull(t,{length:i}=this.nextFieldNode()){return vt({type:t,length:i})}visitBool(t,{length:i,nullCount:r}=this.nextFieldNode()){return vt({type:t,length:i,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitInt(t,{length:i,nullCount:r}=this.nextFieldNode()){return vt({type:t,length:i,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitFloat(t,{length:i,nullCount:r}=this.nextFieldNode()){return vt({type:t,length:i,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitUtf8(t,{length:i,nullCount:r}=this.nextFieldNode()){return vt({type:t,length:i,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitLargeUtf8(t,{length:i,nullCount:r}=this.nextFieldNode()){return vt({type:t,length:i,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitBinary(t,{length:i,nullCount:r}=this.nextFieldNode()){return vt({type:t,length:i,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitLargeBinary(t,{length:i,nullCount:r}=this.nextFieldNode()){return vt({type:t,length:i,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitFixedSizeBinary(t,{length:i,nullCount:r}=this.nextFieldNode()){return vt({type:t,length:i,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitDate(t,{length:i,nullCount:r}=this.nextFieldNode()){return vt({type:t,length:i,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitTimestamp(t,{length:i,nullCount:r}=this.nextFieldNode()){return vt({type:t,length:i,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitTime(t,{length:i,nullCount:r}=this.nextFieldNode()){return vt({type:t,length:i,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitDecimal(t,{length:i,nullCount:r}=this.nextFieldNode()){return vt({type:t,length:i,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitList(t,{length:i,nullCount:r}=this.nextFieldNode()){return vt({type:t,length:i,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}visitStruct(t,{length:i,nullCount:r}=this.nextFieldNode()){return vt({type:t,length:i,nullCount:r,nullBitmap:this.readNullBitmap(t,r),children:this.visitMany(t.children)})}visitUnion(t,{length:i,nullCount:r}=this.nextFieldNode()){return this.metadataVersion<ye.V5&&this.readNullBitmap(t,r),t.mode===Ie.Sparse?this.visitSparseUnion(t,{length:i,nullCount:r}):this.visitDenseUnion(t,{length:i,nullCount:r})}visitDenseUnion(t,{length:i,nullCount:r}=this.nextFieldNode()){return vt({type:t,length:i,nullCount:r,typeIds:this.readTypeIds(t),valueOffsets:this.readOffsets(t),children:this.visitMany(t.children)})}visitSparseUnion(t,{length:i,nullCount:r}=this.nextFieldNode()){return vt({type:t,length:i,nullCount:r,typeIds:this.readTypeIds(t),children:this.visitMany(t.children)})}visitDictionary(t,{length:i,nullCount:r}=this.nextFieldNode()){return vt({type:t,length:i,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t.indices),dictionary:this.readDictionary(t)})}visitInterval(t,{length:i,nullCount:r}=this.nextFieldNode()){return vt({type:t,length:i,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitDuration(t,{length:i,nullCount:r}=this.nextFieldNode()){return vt({type:t,length:i,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitFixedSizeList(t,{length:i,nullCount:r}=this.nextFieldNode()){return vt({type:t,length:i,nullCount:r,nullBitmap:this.readNullBitmap(t,r),child:this.visit(t.children[0])})}visitMap(t,{length:i,nullCount:r}=this.nextFieldNode()){return vt({type:t,length:i,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(t,i,r=this.nextBufferRange()){return i>0&&this.readData(t,r)||new Uint8Array(0)}readOffsets(t,i){return this.readData(t,i)}readTypeIds(t,i){return this.readData(t,i)}readData(t,{length:i,offset:r}=this.nextBufferRange()){return this.bytes.subarray(r,r+i)}readDictionary(t){return this.dictionaries.get(t.id)}}class nw extends zb{constructor(t,i,r,o,c){super(new Uint8Array(0),i,r,o,c),this.sources=t}readNullBitmap(t,i,{offset:r}=this.nextBufferRange()){return i<=0?new Uint8Array(0):qc(this.sources[r])}readOffsets(t,{offset:i}=this.nextBufferRange()){return qt(Uint8Array,qt(t.OffsetArrayType,this.sources[i]))}readTypeIds(t,{offset:i}=this.nextBufferRange()){return qt(Uint8Array,qt(t.ArrayType,this.sources[i]))}readData(t,{offset:i}=this.nextBufferRange()){const{sources:r}=this;return K.isTimestamp(t)||(K.isInt(t)||K.isTime(t))&&t.bitWidth===64||K.isDuration(t)||K.isDate(t)&&t.unit===Mi.MILLISECOND?qt(Uint8Array,Ze.convertArray(r[i])):K.isDecimal(t)?qt(Uint8Array,Qi.convertArray(r[i])):K.isBinary(t)||K.isLargeBinary(t)||K.isFixedSizeBinary(t)?sw(r[i]):K.isBool(t)?qc(r[i]):K.isUtf8(t)||K.isLargeUtf8(t)?Ch(r[i].join("")):qt(Uint8Array,qt(t.ArrayType,r[i].map(o=>+o)))}}function sw(s){const t=s.join(""),i=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2)i[r>>1]=Number.parseInt(t.slice(r,r+2),16);return i}class nt extends mt{compareSchemas(t,i){return t===i||i instanceof t.constructor&&this.compareManyFields(t.fields,i.fields)}compareManyFields(t,i){return t===i||Array.isArray(t)&&Array.isArray(i)&&t.length===i.length&&t.every((r,o)=>this.compareFields(r,i[o]))}compareFields(t,i){return t===i||i instanceof t.constructor&&t.name===i.name&&t.nullable===i.nullable&&this.visit(t.type,i.type)}}function Ve(s,t){return t instanceof s.constructor}function js(s,t){return s===t||Ve(s,t)}function In(s,t){return s===t||Ve(s,t)&&s.bitWidth===t.bitWidth&&s.isSigned===t.isSigned}function au(s,t){return s===t||Ve(s,t)&&s.precision===t.precision}function aw(s,t){return s===t||Ve(s,t)&&s.byteWidth===t.byteWidth}function qh(s,t){return s===t||Ve(s,t)&&s.unit===t.unit}function xl(s,t){return s===t||Ve(s,t)&&s.unit===t.unit&&s.timezone===t.timezone}function El(s,t){return s===t||Ve(s,t)&&s.unit===t.unit&&s.bitWidth===t.bitWidth}function rw(s,t){return s===t||Ve(s,t)&&s.children.length===t.children.length&&ps.compareManyFields(s.children,t.children)}function lw(s,t){return s===t||Ve(s,t)&&s.children.length===t.children.length&&ps.compareManyFields(s.children,t.children)}function Yh(s,t){return s===t||Ve(s,t)&&s.mode===t.mode&&s.typeIds.every((i,r)=>i===t.typeIds[r])&&ps.compareManyFields(s.children,t.children)}function ow(s,t){return s===t||Ve(s,t)&&s.id===t.id&&s.isOrdered===t.isOrdered&&ps.visit(s.indices,t.indices)&&ps.visit(s.dictionary,t.dictionary)}function kh(s,t){return s===t||Ve(s,t)&&s.unit===t.unit}function wl(s,t){return s===t||Ve(s,t)&&s.unit===t.unit}function cw(s,t){return s===t||Ve(s,t)&&s.listSize===t.listSize&&s.children.length===t.children.length&&ps.compareManyFields(s.children,t.children)}function uw(s,t){return s===t||Ve(s,t)&&s.keysSorted===t.keysSorted&&s.children.length===t.children.length&&ps.compareManyFields(s.children,t.children)}nt.prototype.visitNull=js;nt.prototype.visitBool=js;nt.prototype.visitInt=In;nt.prototype.visitInt8=In;nt.prototype.visitInt16=In;nt.prototype.visitInt32=In;nt.prototype.visitInt64=In;nt.prototype.visitUint8=In;nt.prototype.visitUint16=In;nt.prototype.visitUint32=In;nt.prototype.visitUint64=In;nt.prototype.visitFloat=au;nt.prototype.visitFloat16=au;nt.prototype.visitFloat32=au;nt.prototype.visitFloat64=au;nt.prototype.visitUtf8=js;nt.prototype.visitLargeUtf8=js;nt.prototype.visitBinary=js;nt.prototype.visitLargeBinary=js;nt.prototype.visitFixedSizeBinary=aw;nt.prototype.visitDate=qh;nt.prototype.visitDateDay=qh;nt.prototype.visitDateMillisecond=qh;nt.prototype.visitTimestamp=xl;nt.prototype.visitTimestampSecond=xl;nt.prototype.visitTimestampMillisecond=xl;nt.prototype.visitTimestampMicrosecond=xl;nt.prototype.visitTimestampNanosecond=xl;nt.prototype.visitTime=El;nt.prototype.visitTimeSecond=El;nt.prototype.visitTimeMillisecond=El;nt.prototype.visitTimeMicrosecond=El;nt.prototype.visitTimeNanosecond=El;nt.prototype.visitDecimal=js;nt.prototype.visitList=rw;nt.prototype.visitStruct=lw;nt.prototype.visitUnion=Yh;nt.prototype.visitDenseUnion=Yh;nt.prototype.visitSparseUnion=Yh;nt.prototype.visitDictionary=ow;nt.prototype.visitInterval=kh;nt.prototype.visitIntervalDayTime=kh;nt.prototype.visitIntervalYearMonth=kh;nt.prototype.visitDuration=wl;nt.prototype.visitDurationSecond=wl;nt.prototype.visitDurationMillisecond=wl;nt.prototype.visitDurationMicrosecond=wl;nt.prototype.visitDurationNanosecond=wl;nt.prototype.visitFixedSizeList=cw;nt.prototype.visitMap=uw;const ps=new nt;function uh(s,t){return ps.compareSchemas(s,t)}function Pd(s,t){return fw(s,t.map(i=>i.data.concat()))}function fw(s,t){const i=[...s.fields],r=[],o={numBatches:t.reduce((b,E)=>Math.max(b,E.length),0)};let c=0,d=0,h=-1;const y=t.length;let g,v=[];for(;o.numBatches-- >0;){for(d=Number.POSITIVE_INFINITY,h=-1;++h<y;)v[h]=g=t[h].shift(),d=Math.min(d,g?g.length:d);Number.isFinite(d)&&(v=dw(i,d,v,t,o),d>0&&(r[c++]=vt({type:new Ue(i),length:d,nullCount:0,children:v.slice()})))}return[s=s.assign(i),r.map(b=>new Ke(s,b))]}function dw(s,t,i,r,o){var c;const d=(t+63&-64)>>3;for(let h=-1,y=r.length;++h<y;){const g=i[h],v=g?.length;if(v>=t)v===t?i[h]=g:(i[h]=g.slice(0,t),o.numBatches=Math.max(o.numBatches,r[h].unshift(g.slice(t,v-t))));else{const b=s[h];s[h]=b.clone({nullable:!0}),i[h]=(c=g?._changeLengthAndBackfillNullBitmap(t))!==null&&c!==void 0?c:vt({type:b.type,length:t,nullCount:t,nullBitmap:new Uint8Array(d)})}}return i}var Ub;class ze{constructor(...t){var i,r;if(t.length===0)return this.batches=[],this.schema=new Ft([]),this._offsets=[0],this;let o,c;t[0]instanceof Ft&&(o=t.shift()),t.at(-1)instanceof Uint32Array&&(c=t.pop());const d=y=>{if(y){if(y instanceof Ke)return[y];if(y instanceof ze)return y.batches;if(y instanceof Gt){if(y.type instanceof Ue)return[new Ke(new Ft(y.type.children),y)]}else{if(Array.isArray(y))return y.flatMap(g=>d(g));if(typeof y[Symbol.iterator]=="function")return[...y].flatMap(g=>d(g));if(typeof y=="object"){const g=Object.keys(y),v=g.map(M=>new Ut([y[M]])),b=o??new Ft(g.map((M,V)=>new ne(String(M),v[V].type,v[V].nullable))),[,E]=Pd(b,v);return E.length===0?[new Ke(y)]:E}}}return[]},h=t.flatMap(y=>d(y));if(o=(r=o??((i=h[0])===null||i===void 0?void 0:i.schema))!==null&&r!==void 0?r:new Ft([]),!(o instanceof Ft))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const y of h){if(!(y instanceof Ke))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!uh(o,y.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=o,this.batches=h,this._offsets=c??Ob(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,i)=>t+i.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=wb(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}at(t){return this.get(Uh(t,this.numRows))}set(t,i){}indexOf(t,i){return-1}[Symbol.iterator](){return this.batches.length>0?jh.visit(new Ut(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const i=this.schema,r=this.data.concat(t.flatMap(({data:o})=>o));return new ze(i,r.map(o=>new Ke(i,o)))}slice(t,i){const r=this.schema;[t,i]=xb({length:this.numRows},t,i);const o=Mb(this.data,this._offsets,t,i);return new ze(r,o.map(c=>new Ke(r,c)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(i=>i.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const i=this.data.map(r=>r.children[t]);if(i.length===0){const{type:r}=this.schema.fields[t],o=vt({type:r,length:0,nullCount:0});i.push(o._changeLengthAndBackfillNullBitmap(this.numRows))}return new Ut(i)}return null}setChild(t,i){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(o=>o.name===t),i)}setChildAt(t,i){let r=this.schema,o=[...this.batches];if(t>-1&&t<this.numCols){i||(i=new Ut([vt({type:new hs,length:this.numRows})]));const c=r.fields.slice(),d=c[t].clone({type:i.type}),h=this.schema.fields.map((y,g)=>this.getChildAt(g));[c[t],h[t]]=[d,i],[r,o]=Pd(r,h)}return new ze(r,o)}select(t){const i=this.schema.fields.reduce((r,o,c)=>r.set(o.name,c),new Map);return this.selectAt(t.map(r=>i.get(r)).filter(r=>r>-1))}selectAt(t){const i=this.schema.selectAt(t),r=this.batches.map(o=>o.selectAt(t));return new ze(i,r)}assign(t){const i=this.schema.fields,[r,o]=t.schema.fields.reduce((h,y,g)=>{const[v,b]=h,E=i.findIndex(M=>M.name===y.name);return~E?b[E]=g:v.push(g),h},[[],[]]),c=this.schema.assign(t.schema),d=[...i.map((h,y)=>[y,o[y]]).map(([h,y])=>y===void 0?this.getChildAt(h):t.getChildAt(y)),...r.map(h=>t.getChildAt(h))].filter(Boolean);return new ze(...Pd(c,d))}}Ub=Symbol.toStringTag;ze[Ub]=(s=>(s.schema=null,s.batches=[],s._offsets=new Uint32Array([0]),s._nullCount=-1,s[Symbol.isConcatSpreadable]=!0,s.isValid=Yc(Vh),s.get=Yc(Je.getVisitFn(A.Struct)),s.set=Lb(Li.getVisitFn(A.Struct)),s.indexOf=Cb(kc.getVisitFn(A.Struct)),"Table"))(ze.prototype);var Fb;let Ke=class cl{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof Ft))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=vt({nullCount:0,type:new Ue(this.schema.fields),children:this.schema.fields.map(i=>vt({type:i.type,nullCount:0}))})]=t,!(this.data instanceof Gt))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=bv(this.schema,this.data.children);break}case 1:{const[i]=t,{fields:r,children:o,length:c}=Object.keys(i).reduce((y,g,v)=>(y.children[v]=i[g],y.length=Math.max(y.length,i[g].length),y.fields[v]=ne.new({name:g,type:i[g].type,nullable:!0}),y),{length:0,fields:new Array,children:new Array}),d=new Ft(r),h=vt({type:new Ue(r),length:c,children:o,nullCount:0});[this.schema,this.data]=bv(d,h.children,c);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=Pb(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return Je.visit(this.data,t)}at(t){return this.get(Uh(t,this.numRows))}set(t,i){return Li.visit(this.data,t,i)}indexOf(t,i){return kc.visit(this.data,t,i)}[Symbol.iterator](){return jh.visit(new Ut([this.data]))}toArray(){return[...this]}concat(...t){return new ze(this.schema,[this,...t])}slice(t,i){const[r]=new Ut([this.data]).slice(t,i).data;return new cl(this.schema,r)}getChild(t){var i;return this.getChildAt((i=this.schema.fields)===null||i===void 0?void 0:i.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new Ut([this.data.children[t]]):null}setChild(t,i){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(o=>o.name===t),i)}setChildAt(t,i){let r=this.schema,o=this.data;if(t>-1&&t<this.numCols){i||(i=new Ut([vt({type:new hs,length:this.numRows})]));const c=r.fields.slice(),d=o.children.slice(),h=c[t].clone({type:i.type});[c[t],d[t]]=[h,i.data[0]],r=new Ft(c,new Map(this.schema.metadata)),o=vt({type:new Ue(c),children:d})}return new cl(r,o)}select(t){const i=this.schema.select(t),r=new Ue(i.fields),o=[];for(const c of t){const d=this.schema.fields.findIndex(h=>h.name===c);~d&&(o[d]=this.data.children[d])}return new cl(i,vt({type:r,length:this.numRows,children:o}))}selectAt(t){const i=this.schema.selectAt(t),r=t.map(c=>this.data.children[c]).filter(Boolean),o=vt({type:new Ue(i.fields),length:this.numRows,children:r});return new cl(i,o)}};Fb=Symbol.toStringTag;Ke[Fb]=(s=>(s._nullCount=-1,s[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Ke.prototype);function bv(s,t,i=t.reduce((r,o)=>Math.max(r,o.length),0)){var r;const o=[...s.fields],c=[...t],d=(i+63&-64)>>3;for(const[h,y]of s.fields.entries()){const g=t[h];(!g||g.length!==i)&&(o[h]=y.clone({nullable:!0}),c[h]=(r=g?._changeLengthAndBackfillNullBitmap(i))!==null&&r!==void 0?r:vt({type:y.type,length:i,nullCount:i,nullBitmap:new Uint8Array(d)}))}return[s.assign(o),vt({type:new Ue(o),length:i,children:c})]}function Pb(s,t,i=new Map){var r,o;if(((r=s?.length)!==null&&r!==void 0?r:0)>0&&s?.length===t?.length)for(let c=-1,d=s.length;++c<d;){const{type:h}=s[c],y=t[c];for(const g of[y,...((o=y?.dictionary)===null||o===void 0?void 0:o.data)||[]])Pb(h.children,g?.children,i);if(K.isDictionary(h)){const{id:g}=h;if(!i.has(g))y?.dictionary&&i.set(g,y.dictionary);else if(i.get(g)!==y.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return i}class Qh extends Ke{constructor(t){const i=t.fields.map(o=>vt({type:o.type})),r=vt({type:new Ue(t.fields),nullCount:0,children:i});super(t,r)}}let ls=class Yi{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsMessage(t,i){return(i||new Yi).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,i){return t.setPosition(t.position()+Pt),(i||new Yi).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ye.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):Bt.NONE}header(t){const i=this.bb.__offset(this.bb_pos,8);return i?this.bb.__union(t,this.bb_pos+i):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,i){const r=this.bb.__offset(this.bb_pos,12);return r?(i||new Te).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,i){t.addFieldInt16(0,i,ye.V1)}static addHeaderType(t,i){t.addFieldInt8(1,i,Bt.NONE)}static addHeader(t,i){t.addFieldOffset(2,i,0)}static addBodyLength(t,i){t.addFieldInt64(3,i,BigInt("0"))}static addCustomMetadata(t,i){t.addFieldOffset(4,i,0)}static createCustomMetadataVector(t,i){t.startVector(4,i.length,4);for(let r=i.length-1;r>=0;r--)t.addOffset(i[r]);return t.endVector()}static startCustomMetadataVector(t,i){t.startVector(4,i,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,i){t.finish(i)}static finishSizePrefixedMessageBuffer(t,i){t.finish(i,void 0,!0)}static createMessage(t,i,r,o,c,d){return Yi.startMessage(t),Yi.addVersion(t,i),Yi.addHeaderType(t,r),Yi.addHeader(t,o),Yi.addBodyLength(t,c),Yi.addCustomMetadata(t,d),Yi.endMessage(t)}};class hw extends mt{visit(t,i){return t==null||i==null?void 0:super.visit(t,i)}visitNull(t,i){return fv.startNull(i),fv.endNull(i)}visitInt(t,i){return ui.startInt(i),ui.addBitWidth(i,t.bitWidth),ui.addIsSigned(i,t.isSigned),ui.endInt(i)}visitFloat(t,i){return Xi.startFloatingPoint(i),Xi.addPrecision(i,t.precision),Xi.endFloatingPoint(i)}visitBinary(t,i){return rv.startBinary(i),rv.endBinary(i)}visitLargeBinary(t,i){return ov.startLargeBinary(i),ov.endLargeBinary(i)}visitBool(t,i){return lv.startBool(i),lv.endBool(i)}visitUtf8(t,i){return dv.startUtf8(i),dv.endUtf8(i)}visitLargeUtf8(t,i){return cv.startLargeUtf8(i),cv.endLargeUtf8(i)}visitDecimal(t,i){return Ca.startDecimal(i),Ca.addScale(i,t.scale),Ca.addPrecision(i,t.precision),Ca.addBitWidth(i,t.bitWidth),Ca.endDecimal(i)}visitDate(t,i){return uc.startDate(i),uc.addUnit(i,t.unit),uc.endDate(i)}visitTime(t,i){return Ei.startTime(i),Ei.addUnit(i,t.unit),Ei.addBitWidth(i,t.bitWidth),Ei.endTime(i)}visitTimestamp(t,i){const r=t.timezone&&i.createString(t.timezone)||void 0;return wi.startTimestamp(i),wi.addUnit(i,t.unit),r!==void 0&&wi.addTimezone(i,r),wi.endTimestamp(i)}visitInterval(t,i){return Ki.startInterval(i),Ki.addUnit(i,t.unit),Ki.endInterval(i)}visitDuration(t,i){return fc.startDuration(i),fc.addUnit(i,t.unit),fc.endDuration(i)}visitList(t,i){return uv.startList(i),uv.endList(i)}visitStruct(t,i){return Us.startStruct_(i),Us.endStruct_(i)}visitUnion(t,i){Xe.startTypeIdsVector(i,t.typeIds.length);const r=Xe.createTypeIdsVector(i,t.typeIds);return Xe.startUnion(i),Xe.addMode(i,t.mode),Xe.addTypeIds(i,r),Xe.endUnion(i)}visitDictionary(t,i){const r=this.visit(t.indices,i);return Ln.startDictionaryEncoding(i),Ln.addId(i,BigInt(t.id)),Ln.addIsOrdered(i,t.isOrdered),r!==void 0&&Ln.addIndexType(i,r),Ln.endDictionaryEncoding(i)}visitFixedSizeBinary(t,i){return dc.startFixedSizeBinary(i),dc.addByteWidth(i,t.byteWidth),dc.endFixedSizeBinary(i)}visitFixedSizeList(t,i){return hc.startFixedSizeList(i),hc.addListSize(i,t.listSize),hc.endFixedSizeList(i)}visitMap(t,i){return yc.startMap(i),yc.addKeysSorted(i,t.keysSorted),yc.endMap(i)}}const Vd=new hw;function yw(s,t=new Map){return new Ft(gw(s,t),mc(s.metadata),t)}function Vb(s){return new fi(s.count,jb(s.columns),Gb(s.columns))}function pw(s){return new nn(Vb(s.data),s.id,s.isDelta)}function gw(s,t){return(s.fields||[]).filter(Boolean).map(i=>ne.fromJSON(i,t))}function Sv(s,t){return(s.children||[]).filter(Boolean).map(i=>ne.fromJSON(i,t))}function jb(s){return(s||[]).reduce((t,i)=>[...t,new gs(i.count,mw(i.VALIDITY)),...jb(i.children)],[])}function Gb(s,t=[]){for(let i=-1,r=(s||[]).length;++i<r;){const o=s[i];o.VALIDITY&&t.push(new Ji(t.length,o.VALIDITY.length)),o.TYPE_ID&&t.push(new Ji(t.length,o.TYPE_ID.length)),o.OFFSET&&t.push(new Ji(t.length,o.OFFSET.length)),o.DATA&&t.push(new Ji(t.length,o.DATA.length)),t=Gb(o.children,t)}return t}function mw(s){return(s||[]).reduce((t,i)=>t+ +(i===0),0)}function vw(s,t){let i,r,o,c,d,h;return!t||!(c=s.dictionary)?(d=Av(s,Sv(s,t)),o=new ne(s.name,d,s.nullable,mc(s.metadata))):t.has(i=c.id)?(r=(r=c.indexType)?Tv(r):new bl,h=new Xa(t.get(i),r,i,c.isOrdered),o=new ne(s.name,h,s.nullable,mc(s.metadata))):(r=(r=c.indexType)?Tv(r):new bl,t.set(i,d=Av(s,Sv(s,t))),h=new Xa(d,r,i,c.isOrdered),o=new ne(s.name,h,s.nullable,mc(s.metadata))),o||null}function mc(s=[]){return new Map(s.map(({key:t,value:i})=>[t,i]))}function Tv(s){return new Vs(s.isSigned,s.bitWidth)}function Av(s,t){const i=s.type.name;switch(i){case"NONE":return new hs;case"null":return new hs;case"binary":return new Oc;case"largebinary":return new Mc;case"utf8":return new Lc;case"largeutf8":return new Cc;case"bool":return new Dc;case"list":return new Fc((t||[])[0]);case"struct":return new Ue(t||[]);case"struct_":return new Ue(t||[])}switch(i){case"int":{const r=s.type;return new Vs(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=s.type;return new wc(Be[r.precision])}case"decimal":{const r=s.type;return new Bc(r.scale,r.precision,r.bitWidth)}case"date":{const r=s.type;return new Ic(Mi[r.unit])}case"time":{const r=s.type;return new Rc(st[r.unit],r.bitWidth)}case"timestamp":{const r=s.type;return new Nc(st[r.unit],r.timezone)}case"interval":{const r=s.type;return new zc(en[r.unit])}case"duration":{const r=s.type;return new Uc(st[r.unit])}case"union":{const r=s.type,[o,...c]=(r.mode+"").toLowerCase(),d=o.toUpperCase()+c.join("");return new Pc(Ie[d],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=s.type;return new Vc(r.byteWidth)}case"fixedsizelist":{const r=s.type;return new jc(r.listSize,(t||[])[0])}case"map":{const r=s.type;return new Gc((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${i}"`)}var _w=s_,bw=Qa;class Fe{static fromJSON(t,i){const r=new Fe(0,ye.V5,i);return r._createHeader=Sw(t,i),r}static decode(t){t=new bw(Et(t));const i=ls.getRootAsMessage(t),r=i.bodyLength(),o=i.version(),c=i.headerType(),d=new Fe(r,o,c);return d._createHeader=Tw(i,c),d}static encode(t){const i=new _w;let r=-1;return t.isSchema()?r=Ft.encode(i,t.header()):t.isRecordBatch()?r=fi.encode(i,t.header()):t.isDictionaryBatch()&&(r=nn.encode(i,t.header())),ls.startMessage(i),ls.addVersion(i,ye.V5),ls.addHeader(i,r),ls.addHeaderType(i,t.headerType),ls.addBodyLength(i,BigInt(t.bodyLength)),ls.finishMessageBuffer(i,ls.endMessage(i)),i.asUint8Array()}static from(t,i=0){if(t instanceof Ft)return new Fe(0,ye.V5,Bt.Schema,t);if(t instanceof fi)return new Fe(i,ye.V5,Bt.RecordBatch,t);if(t instanceof nn)return new Fe(i,ye.V5,Bt.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Bt.Schema}isRecordBatch(){return this.headerType===Bt.RecordBatch}isDictionaryBatch(){return this.headerType===Bt.DictionaryBatch}constructor(t,i,r,o){this._version=i,this._headerType=r,this.body=new Uint8Array(0),o&&(this._createHeader=()=>o),this._bodyLength=Wt(t)}}class fi{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,i,r){this._nodes=i,this._buffers=r,this._length=Wt(t)}}class nn{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,i,r=!1){this._data=t,this._isDelta=r,this._id=Wt(i)}}class Ji{constructor(t,i){this.offset=Wt(t),this.length=Wt(i)}}class gs{constructor(t,i){this.length=Wt(t),this.nullCount=Wt(i)}}function Sw(s,t){return(()=>{switch(t){case Bt.Schema:return Ft.fromJSON(s);case Bt.RecordBatch:return fi.fromJSON(s);case Bt.DictionaryBatch:return nn.fromJSON(s)}throw new Error(`Unrecognized Message type: { name: ${Bt[t]}, type: ${t} }`)})}function Tw(s,t){return(()=>{switch(t){case Bt.Schema:return Ft.decode(s.header(new ki),new Map,s.version());case Bt.RecordBatch:return fi.decode(s.header(new En),s.version());case Bt.DictionaryBatch:return nn.decode(s.header(new Ma),s.version())}throw new Error(`Unrecognized Message type: { name: ${Bt[t]}, type: ${t} }`)})}ne.encode=Iw;ne.decode=Dw;ne.fromJSON=vw;Ft.encode=Bw;Ft.decode=Aw;Ft.fromJSON=yw;fi.encode=Rw;fi.decode=xw;fi.fromJSON=Vb;nn.encode=Nw;nn.decode=Ew;nn.fromJSON=pw;gs.encode=zw;gs.decode=Ow;Ji.encode=Uw;Ji.decode=ww;function Aw(s,t=new Map,i=ye.V5){const r=Cw(s,t);return new Ft(r,vc(s),t,i)}function xw(s,t=ye.V5){if(s.compression()!==null)throw new Error("Record batch compression not implemented");return new fi(s.length(),Mw(s),Lw(s,t))}function Ew(s,t=ye.V5){return new nn(fi.decode(s.data(),t),s.id(),s.isDelta())}function ww(s){return new Ji(s.offset(),s.length())}function Ow(s){return new gs(s.length(),s.nullCount())}function Mw(s){const t=[];for(let i,r=-1,o=-1,c=s.nodesLength();++r<c;)(i=s.nodes(r))&&(t[++o]=gs.decode(i));return t}function Lw(s,t){const i=[];for(let r,o=-1,c=-1,d=s.buffersLength();++o<d;)(r=s.buffers(o))&&(t<ye.V4&&(r.bb_pos+=8*(o+1)),i[++c]=Ji.decode(r));return i}function Cw(s,t){const i=[];for(let r,o=-1,c=-1,d=s.fieldsLength();++o<d;)(r=s.fields(o))&&(i[++c]=ne.decode(r,t));return i}function xv(s,t){const i=[];for(let r,o=-1,c=-1,d=s.childrenLength();++o<d;)(r=s.children(o))&&(i[++c]=ne.decode(r,t));return i}function Dw(s,t){let i,r,o,c,d,h;return!t||!(h=s.dictionary())?(o=wv(s,xv(s,t)),r=new ne(s.name(),o,s.nullable(),vc(s))):t.has(i=Wt(h.id()))?(c=(c=h.indexType())?Ev(c):new bl,d=new Xa(t.get(i),c,i,h.isOrdered()),r=new ne(s.name(),d,s.nullable(),vc(s))):(c=(c=h.indexType())?Ev(c):new bl,t.set(i,o=wv(s,xv(s,t))),d=new Xa(o,c,i,h.isOrdered()),r=new ne(s.name(),d,s.nullable(),vc(s))),r||null}function vc(s){const t=new Map;if(s)for(let i,r,o=-1,c=Math.trunc(s.customMetadataLength());++o<c;)(i=s.customMetadata(o))&&(r=i.key())!=null&&t.set(r,i.value());return t}function Ev(s){return new Vs(s.isSigned(),s.bitWidth())}function wv(s,t){const i=s.typeType();switch(i){case $t.NONE:return new hs;case $t.Null:return new hs;case $t.Binary:return new Oc;case $t.LargeBinary:return new Mc;case $t.Utf8:return new Lc;case $t.LargeUtf8:return new Cc;case $t.Bool:return new Dc;case $t.List:return new Fc((t||[])[0]);case $t.Struct_:return new Ue(t||[])}switch(i){case $t.Int:{const r=s.type(new ui);return new Vs(r.isSigned(),r.bitWidth())}case $t.FloatingPoint:{const r=s.type(new Xi);return new wc(r.precision())}case $t.Decimal:{const r=s.type(new Ca);return new Bc(r.scale(),r.precision(),r.bitWidth())}case $t.Date:{const r=s.type(new uc);return new Ic(r.unit())}case $t.Time:{const r=s.type(new Ei);return new Rc(r.unit(),r.bitWidth())}case $t.Timestamp:{const r=s.type(new wi);return new Nc(r.unit(),r.timezone())}case $t.Interval:{const r=s.type(new Ki);return new zc(r.unit())}case $t.Duration:{const r=s.type(new fc);return new Uc(r.unit())}case $t.Union:{const r=s.type(new Xe);return new Pc(r.mode(),r.typeIdsArray()||[],t||[])}case $t.FixedSizeBinary:{const r=s.type(new dc);return new Vc(r.byteWidth())}case $t.FixedSizeList:{const r=s.type(new hc);return new jc(r.listSize(),(t||[])[0])}case $t.Map:{const r=s.type(new yc);return new Gc((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${$t[i]}" (${i})`)}function Bw(s,t){const i=t.fields.map(c=>ne.encode(s,c));ki.startFieldsVector(s,i.length);const r=ki.createFieldsVector(s,i),o=t.metadata&&t.metadata.size>0?ki.createCustomMetadataVector(s,[...t.metadata].map(([c,d])=>{const h=s.createString(`${c}`),y=s.createString(`${d}`);return Te.startKeyValue(s),Te.addKey(s,h),Te.addValue(s,y),Te.endKeyValue(s)})):-1;return ki.startSchema(s),ki.addFields(s,r),ki.addEndianness(s,Fw?Za.Little:Za.Big),o!==-1&&ki.addCustomMetadata(s,o),ki.endSchema(s)}function Iw(s,t){let i=-1,r=-1,o=-1;const c=t.type;let d=t.typeId;K.isDictionary(c)?(d=c.dictionary.typeId,o=Vd.visit(c,s),r=Vd.visit(c.dictionary,s)):r=Vd.visit(c,s);const h=(c.children||[]).map(v=>ne.encode(s,v)),y=Ai.createChildrenVector(s,h),g=t.metadata&&t.metadata.size>0?Ai.createCustomMetadataVector(s,[...t.metadata].map(([v,b])=>{const E=s.createString(`${v}`),M=s.createString(`${b}`);return Te.startKeyValue(s),Te.addKey(s,E),Te.addValue(s,M),Te.endKeyValue(s)})):-1;return t.name&&(i=s.createString(t.name)),Ai.startField(s),Ai.addType(s,r),Ai.addTypeType(s,d),Ai.addChildren(s,y),Ai.addNullable(s,!!t.nullable),i!==-1&&Ai.addName(s,i),o!==-1&&Ai.addDictionary(s,o),g!==-1&&Ai.addCustomMetadata(s,g),Ai.endField(s)}function Rw(s,t){const i=t.nodes||[],r=t.buffers||[];En.startNodesVector(s,i.length);for(const d of i.slice().reverse())gs.encode(s,d);const o=s.endVector();En.startBuffersVector(s,r.length);for(const d of r.slice().reverse())Ji.encode(s,d);const c=s.endVector();return En.startRecordBatch(s),En.addLength(s,BigInt(t.length)),En.addNodes(s,o),En.addBuffers(s,c),En.endRecordBatch(s)}function Nw(s,t){const i=fi.encode(s,t.data);return Ma.startDictionaryBatch(s),Ma.addId(s,BigInt(t.id)),Ma.addIsDelta(s,t.isDelta),Ma.addData(s,i),Ma.endDictionaryBatch(s)}function zw(s,t){return l_.createFieldNode(s,BigInt(t.length),BigInt(t.nullCount))}function Uw(s,t){return r_.createBuffer(s,BigInt(t.offset),BigInt(t.length))}const Fw=(()=>{const s=new ArrayBuffer(2);return new DataView(s).setInt16(0,256,!0),new Int16Array(s)[0]===256})(),Zh=s=>`Expected ${Bt[s]} Message in stream, but was null or length 0.`,Xh=s=>`Header pointer of flatbuffer-encoded ${Bt[s]} Message is null or length 0.`,Hb=(s,t)=>`Expected to read ${s} metadata bytes, but only read ${t}.`,qb=(s,t)=>`Expected to read ${s} bytes for message body, but only read ${t}.`;class Yb{constructor(t){this.source=t instanceof Zc?t:new Zc(t)}[Symbol.iterator](){return this}next(){let t;return(t=this.readMetadataLength()).done||t.value===-1&&(t=this.readMetadataLength()).done||(t=this.readMetadata(t.value)).done?le:t}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}readMessage(t){let i;if((i=this.next()).done)return null;if(t!=null&&i.value.headerType!==t)throw new Error(Zh(t));return i.value}readMessageBody(t){if(t<=0)return new Uint8Array(0);const i=Et(this.source.read(t));if(i.byteLength<t)throw new Error(qb(t,i.byteLength));return i.byteOffset%8===0&&i.byteOffset+i.byteLength<=i.buffer.byteLength?i:i.slice()}readSchema(t=!1){const i=Bt.Schema,r=this.readMessage(i),o=r?.header();if(t&&!o)throw new Error(Xh(i));return o}readMetadataLength(){const t=this.source.read(ru),i=t&&new Qa(t),r=i?.readInt32(0)||0;return{done:r===0,value:r}}readMetadata(t){const i=this.source.read(t);if(!i)return le;if(i.byteLength<t)throw new Error(Hb(t,i.byteLength));return{done:!1,value:Fe.decode(i)}}}class Pw{constructor(t,i){this.source=t instanceof Ka?t:Jv(t)?new Xc(t,i):new Ka(t)}[Symbol.asyncIterator](){return this}next(){return ut(this,void 0,void 0,function*(){let t;return(t=yield this.readMetadataLength()).done||t.value===-1&&(t=yield this.readMetadataLength()).done||(t=yield this.readMetadata(t.value)).done?le:t})}throw(t){return ut(this,void 0,void 0,function*(){return yield this.source.throw(t)})}return(t){return ut(this,void 0,void 0,function*(){return yield this.source.return(t)})}readMessage(t){return ut(this,void 0,void 0,function*(){let i;if((i=yield this.next()).done)return null;if(t!=null&&i.value.headerType!==t)throw new Error(Zh(t));return i.value})}readMessageBody(t){return ut(this,void 0,void 0,function*(){if(t<=0)return new Uint8Array(0);const i=Et(yield this.source.read(t));if(i.byteLength<t)throw new Error(qb(t,i.byteLength));return i.byteOffset%8===0&&i.byteOffset+i.byteLength<=i.buffer.byteLength?i:i.slice()})}readSchema(){return ut(this,arguments,void 0,function*(t=!1){const i=Bt.Schema,r=yield this.readMessage(i),o=r?.header();if(t&&!o)throw new Error(Xh(i));return o})}readMetadataLength(){return ut(this,void 0,void 0,function*(){const t=yield this.source.read(ru),i=t&&new Qa(t),r=i?.readInt32(0)||0;return{done:r===0,value:r}})}readMetadata(t){return ut(this,void 0,void 0,function*(){const i=yield this.source.read(t);if(!i)return le;if(i.byteLength<t)throw new Error(Hb(t,i.byteLength));return{done:!1,value:Fe.decode(i)}})}}class Vw extends Yb{constructor(t){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=t instanceof vv?t:new vv(t)}next(){const{_json:t}=this;if(!this._schema)return this._schema=!0,{done:!1,value:Fe.fromJSON(t.schema,Bt.Schema)};if(this._dictionaryIndex<t.dictionaries.length){const i=t.dictionaries[this._dictionaryIndex++];return this._body=i.data.columns,{done:!1,value:Fe.fromJSON(i,Bt.DictionaryBatch)}}if(this._batchIndex<t.batches.length){const i=t.batches[this._batchIndex++];return this._body=i.columns,{done:!1,value:Fe.fromJSON(i,Bt.RecordBatch)}}return this._body=[],le}readMessageBody(t){return i(this._body);function i(r){return(r||[]).reduce((o,c)=>[...o,...c.VALIDITY&&[c.VALIDITY]||[],...c.TYPE_ID&&[c.TYPE_ID]||[],...c.OFFSET&&[c.OFFSET]||[],...c.DATA&&[c.DATA]||[],...i(c.children)],[])}}readMessage(t){let i;if((i=this.next()).done)return null;if(t!=null&&i.value.headerType!==t)throw new Error(Zh(t));return i.value}readSchema(){const t=Bt.Schema,i=this.readMessage(t),r=i?.header();if(!i||!r)throw new Error(Xh(t));return r}}const ru=4,fh="ARROW1",Tl=new Uint8Array(fh.length);for(let s=0;s<fh.length;s+=1)Tl[s]=fh.codePointAt(s);function Kh(s,t=0){for(let i=-1,r=Tl.length;++i<r;)if(Tl[i]!==s[t+i])return!1;return!0}const Ol=Tl.length,kb=Ol+ru,jw=Ol*2+ru;class Oi extends Gh{constructor(t){super(),this._impl=t}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(t){return this._impl.throw(t)}return(t){return this._impl.return(t)}cancel(){return this._impl.cancel()}reset(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this}open(t){const i=this._impl.open(t);return Ps(i)?i.then(()=>this):this}readRecordBatch(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return xi.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return xi.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,i){throw new Error('"throughDOM" not available in this environment')}static from(t){return t instanceof Oi?t:eh(t)?Yw(t):Jv(t)?Zw(t):Ps(t)?ut(this,void 0,void 0,function*(){return yield Oi.from(yield t)}):$v(t)||Dh(t)||t_(t)||er(t)?Qw(new Ka(t)):kw(new Zc(t))}static readAll(t){return t instanceof Oi?t.isSync()?Ov(t):Mv(t):eh(t)||ArrayBuffer.isView(t)||Al(t)||Wv(t)?Ov(t):Mv(t)}}class Kc extends Oi{constructor(t){super(t),this._impl=t}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return Wi(this,arguments,function*(){yield pt(yield*cc(Fs(this[Symbol.iterator]())))})}}class Wc extends Oi{constructor(t){super(t),this._impl=t}readAll(){return ut(this,void 0,void 0,function*(){var t,i,r,o;const c=new Array;try{for(var d=!0,h=Fs(this),y;y=yield h.next(),t=y.done,!t;d=!0){o=y.value,d=!1;const g=o;c.push(g)}}catch(g){i={error:g}}finally{try{!d&&!t&&(r=h.return)&&(yield r.call(h))}finally{if(i)throw i.error}}return c})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class Qb extends Kc{constructor(t){super(t),this._impl=t}}class Gw extends Wc{constructor(t){super(t),this._impl=t}}class Zb{get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}constructor(t=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this}_loadRecordBatch(t,i){const r=this._loadVectors(t,i,this.schema.fields),o=vt({type:new Ue(this.schema.fields),length:t.length,children:r});return new Ke(this.schema,o)}_loadDictionaryBatch(t,i){const{id:r,isDelta:o}=t,{dictionaries:c,schema:d}=this,h=c.get(r),y=d.dictionaries.get(r),g=this._loadVectors(t.data,i,[y]);return(h&&o?h.concat(new Ut(g)):new Ut(g)).memoize()}_loadVectors(t,i,r){return new zb(i,t.nodes,t.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(r)}}class Jc extends Zb{constructor(t,i){super(i),this._reader=eh(t)?new Vw(this._handle=t):new Yb(this._handle=t)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(t){return this.closed||(this.autoDestroy=Kb(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):le}return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):le}next(){if(this.closed)return le;let t;const{_reader:i}=this;for(;t=this._readNextMessageAndValidate();)if(t.isSchema())this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const r=t.header(),o=i.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(r,o)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const r=t.header(),o=i.readMessageBody(t.bodyLength),c=this._loadDictionaryBatch(r,o);this.dictionaries.set(r.id,c)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new Qh(this.schema)}):this.return()}_readNextMessageAndValidate(t){return this._reader.readMessage(t)}}class $c extends Zb{constructor(t,i){super(i),this._reader=new Pw(this._handle=t)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return ut(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(t){return ut(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=Kb(this,t),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(t){return ut(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(t):le})}return(t){return ut(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(t):le})}next(){return ut(this,void 0,void 0,function*(){if(this.closed)return le;let t;const{_reader:i}=this;for(;t=yield this._readNextMessageAndValidate();)if(t.isSchema())yield this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const r=t.header(),o=yield i.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(r,o)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const r=t.header(),o=yield i.readMessageBody(t.bodyLength),c=this._loadDictionaryBatch(r,o);this.dictionaries.set(r.id,c)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new Qh(this.schema)}):yield this.return()})}_readNextMessageAndValidate(t){return ut(this,void 0,void 0,function*(){return yield this._reader.readMessage(t)})}}class Xb extends Jc{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(t,i){super(t instanceof _v?t:new _v(t),i)}isSync(){return!0}isFile(){return!0}open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const i of this._footer.dictionaryBatches())i&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(t)}readRecordBatch(t){var i;if(this.closed)return null;this._footer||this.open();const r=(i=this._footer)===null||i===void 0?void 0:i.getRecordBatch(t);if(r&&this._handle.seek(r.offset)){const o=this._reader.readMessage(Bt.RecordBatch);if(o?.isRecordBatch()){const c=o.header(),d=this._reader.readMessageBody(o.bodyLength);return this._loadRecordBatch(c,d)}}return null}_readDictionaryBatch(t){var i;const r=(i=this._footer)===null||i===void 0?void 0:i.getDictionaryBatch(t);if(r&&this._handle.seek(r.offset)){const o=this._reader.readMessage(Bt.DictionaryBatch);if(o?.isDictionaryBatch()){const c=o.header(),d=this._reader.readMessageBody(o.bodyLength),h=this._loadDictionaryBatch(c,d);this.dictionaries.set(c.id,h)}}}_readFooter(){const{_handle:t}=this,i=t.size-kb,r=t.readInt32(i),o=t.readAt(i-r,r);return Sl.decode(o)}_readNextMessageAndValidate(t){var i;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const r=(i=this._footer)===null||i===void 0?void 0:i.getRecordBatch(this._recordBatchIndex);if(r&&this._handle.seek(r.offset))return this._reader.readMessage(t)}return null}}class Hw extends $c{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(t,...i){const r=typeof i[0]!="number"?i.shift():void 0,o=i[0]instanceof Map?i.shift():void 0;super(t instanceof Xc?t:new Xc(t,r),o)}isFile(){return!0}isAsync(){return!0}open(t){const i=Object.create(null,{open:{get:()=>super.open}});return ut(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const r of this._footer.dictionaryBatches())r&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield i.open.call(this,t)})}readRecordBatch(t){return ut(this,void 0,void 0,function*(){var i;if(this.closed)return null;this._footer||(yield this.open());const r=(i=this._footer)===null||i===void 0?void 0:i.getRecordBatch(t);if(r&&(yield this._handle.seek(r.offset))){const o=yield this._reader.readMessage(Bt.RecordBatch);if(o?.isRecordBatch()){const c=o.header(),d=yield this._reader.readMessageBody(o.bodyLength);return this._loadRecordBatch(c,d)}}return null})}_readDictionaryBatch(t){return ut(this,void 0,void 0,function*(){var i;const r=(i=this._footer)===null||i===void 0?void 0:i.getDictionaryBatch(t);if(r&&(yield this._handle.seek(r.offset))){const o=yield this._reader.readMessage(Bt.DictionaryBatch);if(o?.isDictionaryBatch()){const c=o.header(),d=yield this._reader.readMessageBody(o.bodyLength),h=this._loadDictionaryBatch(c,d);this.dictionaries.set(c.id,h)}}})}_readFooter(){return ut(this,void 0,void 0,function*(){const{_handle:t}=this;t._pending&&(yield t._pending);const i=t.size-kb,r=yield t.readInt32(i),o=yield t.readAt(i-r,r);return Sl.decode(o)})}_readNextMessageAndValidate(t){return ut(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const i=this._footer.getRecordBatch(this._recordBatchIndex);if(i&&(yield this._handle.seek(i.offset)))return yield this._reader.readMessage(t)}return null})}}class qw extends Jc{constructor(t,i){super(t,i)}_loadVectors(t,i,r){return new nw(i,t.nodes,t.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(r)}}function Kb(s,t){return t&&typeof t.autoDestroy=="boolean"?t.autoDestroy:s.autoDestroy}function*Ov(s){const t=Oi.from(s);try{if(!t.open({autoDestroy:!1}).closed)do yield t;while(!t.reset().open().closed)}finally{t.cancel()}}function Mv(s){return Wi(this,arguments,function*(){const i=yield pt(Oi.from(s));try{if(!(yield pt(i.open({autoDestroy:!1}))).closed)do yield yield pt(i);while(!(yield pt(i.reset().open())).closed)}finally{yield pt(i.cancel())}})}function Yw(s){return new Kc(new qw(s))}function kw(s){const t=s.peek(Ol+7&-8);return t&&t.byteLength>=4?Kh(t)?new Qb(new Xb(s.read())):new Kc(new Jc(s)):new Kc(new Jc((function*(){})()))}function Qw(s){return ut(this,void 0,void 0,function*(){const t=yield s.peek(Ol+7&-8);return t&&t.byteLength>=4?Kh(t)?new Qb(new Xb(yield s.read())):new Wc(new $c(s)):new Wc(new $c((function(){return Wi(this,arguments,function*(){})})()))})}function Zw(s){return ut(this,void 0,void 0,function*(){const{size:t}=yield s.stat(),i=new Xc(s,t);return t>=jw&&Kh(yield i.readAt(0,Ol+7&-8))?new Gw(new Hw(i)):new Wc(new $c(i))})}class oe extends mt{static assemble(...t){const i=o=>o.flatMap(c=>Array.isArray(c)?i(c):c instanceof Ke?c.data.children:c.data),r=new oe;return r.visitMany(i(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof Ut)return this.visitMany(t.data),this;const{type:i}=t;if(!K.isDictionary(i)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(K.isUnion(i))this.nodes.push(new gs(r,0));else{const{nullCount:o}=t;K.isNull(i)||zi.call(this,o<=0?new Uint8Array(0):Hc(t.offset,r,t.nullBitmap)),this.nodes.push(new gs(r,o))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function zi(s){const t=s.byteLength+7&-8;return this.buffers.push(s),this.bufferRegions.push(new Ji(this._byteLength,t)),this._byteLength+=t,this}function Xw(s){var t;const{type:i,length:r,typeIds:o,valueOffsets:c}=s;if(zi.call(this,o),i.mode===Ie.Sparse)return dh.call(this,s);if(i.mode===Ie.Dense){if(s.offset<=0)return zi.call(this,c),dh.call(this,s);{const d=new Int32Array(r),h=Object.create(null),y=Object.create(null);for(let g,v,b=-1;++b<r;)(g=o[b])!==void 0&&((v=h[g])===void 0&&(v=h[g]=c[b]),d[b]=c[b]-v,y[g]=((t=y[g])!==null&&t!==void 0?t:0)+1);zi.call(this,d),this.visitMany(s.children.map((g,v)=>{const b=i.typeIds[v],E=h[b],M=y[b];return g.slice(E,Math.min(r,M))}))}}return this}function Kw(s){let t;return s.nullCount>=s.length?zi.call(this,new Uint8Array(0)):(t=s.values)instanceof Uint8Array?zi.call(this,Hc(s.offset,s.length,t)):zi.call(this,qc(s.values))}function Rn(s){return zi.call(this,s.values.subarray(0,s.length*s.stride))}function lu(s){const{length:t,values:i,valueOffsets:r}=s,o=Wt(r[0]),c=Wt(r[t]),d=Math.min(c-o,i.byteLength-o);return zi.call(this,i_(-o,t+1,r)),zi.call(this,i.subarray(o,o+d)),this}function Wh(s){const{length:t,valueOffsets:i}=s;if(i){const{[0]:r,[t]:o}=i;return zi.call(this,i_(-r,t+1,i)),this.visit(s.children[0].slice(r,o-r))}return this.visit(s.children[0])}function dh(s){return this.visitMany(s.type.children.map((t,i)=>s.children[i]).filter(Boolean))[0]}oe.prototype.visitBool=Kw;oe.prototype.visitInt=Rn;oe.prototype.visitFloat=Rn;oe.prototype.visitUtf8=lu;oe.prototype.visitLargeUtf8=lu;oe.prototype.visitBinary=lu;oe.prototype.visitLargeBinary=lu;oe.prototype.visitFixedSizeBinary=Rn;oe.prototype.visitDate=Rn;oe.prototype.visitTimestamp=Rn;oe.prototype.visitTime=Rn;oe.prototype.visitDecimal=Rn;oe.prototype.visitList=Wh;oe.prototype.visitStruct=dh;oe.prototype.visitUnion=Xw;oe.prototype.visitInterval=Rn;oe.prototype.visitDuration=Rn;oe.prototype.visitFixedSizeList=Wh;oe.prototype.visitMap=Wh;class Wb extends Gh{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,i){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new gc,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._seenDictionaries=new Map,this._dictionaryDeltaOffsets=new Map,We(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return Ps(t)?t.then(i=>this.writeAll(i)):er(t)?ey(this,t):ty(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,i=null){return t===this._sink||t instanceof gc?this._sink=t:(this._sink=new gc,t&&Ox(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&Mx(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._seenDictionaries=new Map,this._dictionaryDeltaOffsets=new Map,(!i||!uh(i,this._schema))&&(i==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=i,this._writeSchema(i))),this}write(t){let i=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof ze&&!(i=t.schema))return this.finish()&&void 0;if(t instanceof Ke&&!(i=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(i&&!uh(i,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,i)}t instanceof Ke?t instanceof Qh||this._writeRecordBatch(t):t instanceof ze?this.writeAll(t.batches):Al(t)&&this.writeAll(t)}_writeMessage(t,i=8){const r=i-1,o=Fe.encode(t),c=o.byteLength,d=this._writeLegacyIpcFormat?4:8,h=c+d+r&~r,y=h-c-d;return t.headerType===Bt.RecordBatch?this._recordBatchBlocks.push(new ys(h,t.bodyLength,this._position)):t.headerType===Bt.DictionaryBatch&&this._dictionaryBlocks.push(new ys(h,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(h-d)),c>0&&this._write(o),this._writePadding(y)}_write(t){if(this._started){const i=Et(t);i&&i.byteLength>0&&(this._sink.write(i),this._position+=i.byteLength)}return this}_writeSchema(t){return this._writeMessage(Fe.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(Tl)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:i,nodes:r,bufferRegions:o,buffers:c}=oe.assemble(t),d=new fi(t.numRows,r,o),h=Fe.from(d,i);return this._writeDictionaries(t)._writeMessage(h)._writeBodyBuffers(c)}_writeDictionaryBatch(t,i,r=!1){const{byteLength:o,nodes:c,bufferRegions:d,buffers:h}=oe.assemble(new Ut([t])),y=new fi(t.length,c,d),g=new nn(y,i,r),v=Fe.from(g,o);return this._writeMessage(v)._writeBodyBuffers(h)}_writeBodyBuffers(t){let i,r,o;for(let c=-1,d=t.length;++c<d;)(i=t[c])&&(r=i.byteLength)>0&&(this._write(i),(o=(r+7&-8)-r)>0&&this._writePadding(o));return this}_writeDictionaries(t){var i,r;for(const[o,c]of t.dictionaries){const d=(i=c?.data)!==null&&i!==void 0?i:[],h=this._seenDictionaries.get(o),y=(r=this._dictionaryDeltaOffsets.get(o))!==null&&r!==void 0?r:0;if(!h||h.data[0]!==d[0])for(const[g,v]of d.entries())this._writeDictionaryBatch(v,o,g>0);else if(y<d.length)for(const g of d.slice(y))this._writeDictionaryBatch(g,o,!0);this._seenDictionaries.set(o,c),this._dictionaryDeltaOffsets.set(o,d.length)}return this}}class Jh extends Wb{static writeAll(t,i){const r=new Jh(i);return Ps(t)?t.then(o=>r.writeAll(o)):er(t)?ey(r,t):ty(r,t)}}class $h extends Wb{static writeAll(t){const i=new $h;return Ps(t)?t.then(r=>i.writeAll(r)):er(t)?ey(i,t):ty(i,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeDictionaryBatch(t,i,r=!1){if(!r&&this._seenDictionaries.has(i))throw new Error("The Arrow File format does not support replacement dictionaries. ");return super._writeDictionaryBatch(t,i,r)}_writeFooter(t){const i=Sl.encode(new Sl(t,ye.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(i)._write(Int32Array.of(i.byteLength))._writeMagic()}}function ty(s,t){let i=t;t instanceof ze&&(i=t.batches,s.reset(void 0,t.schema));for(const r of i)s.write(r);return s.finish()}function ey(s,t){return ut(this,void 0,void 0,function*(){var i,r,o,c,d,h,y;try{for(i=!0,r=Fs(t);o=yield r.next(),c=o.done,!c;i=!0){y=o.value,i=!1;const g=y;s.write(g)}}catch(g){d={error:g}}finally{try{!i&&!c&&(h=r.return)&&(yield h.call(r))}finally{if(d)throw d.error}}return s.finish()})}function Ww(s,t="stream"){return(t==="stream"?Jh:$h).writeAll(s).toUint8Array(!0)}var Jw=Object.create,Jb=Object.defineProperty,$w=Object.getOwnPropertyDescriptor,t3=Object.getOwnPropertyNames,e3=Object.getPrototypeOf,i3=Object.prototype.hasOwnProperty,n3=(s,t)=>()=>(t||s((t={exports:{}}).exports,t),t.exports),s3=(s,t,i,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of t3(t))!i3.call(s,o)&&o!==i&&Jb(s,o,{get:()=>t[o],enumerable:!(r=$w(t,o))||r.enumerable});return s},a3=(s,t,i)=>(i=s!=null?Jw(e3(s)):{},s3(!s||!s.__esModule?Jb(i,"default",{value:s,enumerable:!0}):i,s)),r3=n3((s,t)=>{t.exports=Worker}),l3=(s=>(s[s.UNDEFINED=0]="UNDEFINED",s[s.AUTOMATIC=1]="AUTOMATIC",s[s.READ_ONLY=2]="READ_ONLY",s[s.READ_WRITE=3]="READ_WRITE",s))(l3||{}),o3=(s=>(s[s.IDENTIFIER=0]="IDENTIFIER",s[s.NUMERIC_CONSTANT=1]="NUMERIC_CONSTANT",s[s.STRING_CONSTANT=2]="STRING_CONSTANT",s[s.OPERATOR=3]="OPERATOR",s[s.KEYWORD=4]="KEYWORD",s[s.COMMENT=5]="COMMENT",s))(o3||{}),c3=(s=>(s[s.NONE=0]="NONE",s[s.DEBUG=1]="DEBUG",s[s.INFO=2]="INFO",s[s.WARNING=3]="WARNING",s[s.ERROR=4]="ERROR",s))(c3||{}),u3=(s=>(s[s.NONE=0]="NONE",s[s.CONNECT=1]="CONNECT",s[s.DISCONNECT=2]="DISCONNECT",s[s.OPEN=3]="OPEN",s[s.QUERY=4]="QUERY",s[s.INSTANTIATE=5]="INSTANTIATE",s))(u3||{}),f3=(s=>(s[s.NONE=0]="NONE",s[s.OK=1]="OK",s[s.ERROR=2]="ERROR",s[s.START=3]="START",s[s.RUN=4]="RUN",s[s.CAPTURE=5]="CAPTURE",s))(f3||{}),d3=(s=>(s[s.NONE=0]="NONE",s[s.WEB_WORKER=1]="WEB_WORKER",s[s.NODE_WORKER=2]="NODE_WORKER",s[s.BINDINGS=3]="BINDINGS",s[s.ASYNC_DUCKDB=4]="ASYNC_DUCKDB",s))(d3||{}),h3=class{constructor(s=2){this.level=s}log(s){s.level>=this.level&&console.log(s)}},y3=(s=>(s[s.SUCCESS=0]="SUCCESS",s[s.MAX_ARROW_ERROR=255]="MAX_ARROW_ERROR",s[s.DUCKDB_WASM_RETRY=256]="DUCKDB_WASM_RETRY",s))(y3||{}),p3=class{constructor(s,t){this._bindings=s,this._conn=t}get bindings(){return this._bindings}async close(){return this._bindings.disconnect(this._conn)}useUnsafe(s){return s(this._bindings,this._conn)}async query(s){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:s});let t=await this._bindings.runQuery(this._conn,s),i=Oi.from(t);return console.assert(i.isSync(),"Reader is not sync"),console.assert(i.isFile(),"Reader is not file"),new ze(i)}async send(s,t=!1){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:s});let i=await this._bindings.startPendingQuery(this._conn,s,t);for(;i==null;)i=await this._bindings.pollPendingQuery(this._conn);let r=new $b(this._bindings,this._conn,i),o=await Oi.from(r);return console.assert(o.isAsync()),console.assert(o.isStream()),o}async cancelSent(){return await this._bindings.cancelPendingQuery(this._conn)}async getTableNames(s){return await this._bindings.getTableNames(this._conn,s)}async prepare(s){let t=await this._bindings.createPrepared(this._conn,s);return new g3(this._bindings,this._conn,t)}async insertArrowTable(s,t){let i=Ww(s,"stream");await this.insertArrowFromIPCStream(i,t)}async insertArrowFromIPCStream(s,t){await this._bindings.insertArrowFromIPCStream(this._conn,s,t)}async insertCSVFromPath(s,t){await this._bindings.insertCSVFromPath(this._conn,s,t)}async insertJSONFromPath(s,t){await this._bindings.insertJSONFromPath(this._conn,s,t)}},$b=class{constructor(s,t,i){this.db=s,this.conn=t,this.header=i,this._first=!0,this._depleted=!1,this._inFlight=null}async next(){if(this._first)return this._first=!1,{done:!1,value:this.header};if(this._depleted)return{done:!0,value:null};let s=null;for(this._inFlight!=null&&(s=await this._inFlight,this._inFlight=null);s==null;)s=await this.db.fetchQueryResults(this.conn);return this._depleted=s.length==0,this._depleted||(this._inFlight=this.db.fetchQueryResults(this.conn)),{done:this._depleted,value:s}}[Symbol.asyncIterator](){return this}},g3=class{constructor(s,t,i){this.bindings=s,this.connectionId=t,this.statementId=i}async close(){await this.bindings.closePrepared(this.connectionId,this.statementId)}async query(...s){let t=await this.bindings.runPrepared(this.connectionId,this.statementId,s),i=Oi.from(t);return console.assert(i.isSync()),console.assert(i.isFile()),new ze(i)}async send(...s){let t=await this.bindings.sendPrepared(this.connectionId,this.statementId,s),i=new $b(this.bindings,this.connectionId,t),r=await Oi.from(i);return console.assert(r.isAsync()),console.assert(r.isStream()),r}},m3=(s=>(s.CANCEL_PENDING_QUERY="CANCEL_PENDING_QUERY",s.CLOSE_PREPARED="CLOSE_PREPARED",s.COLLECT_FILE_STATISTICS="COLLECT_FILE_STATISTICS",s.REGISTER_OPFS_FILE_NAME="REGISTER_OPFS_FILE_NAME",s.CONNECT="CONNECT",s.COPY_FILE_TO_BUFFER="COPY_FILE_TO_BUFFER",s.COPY_FILE_TO_PATH="COPY_FILE_TO_PATH",s.CREATE_PREPARED="CREATE_PREPARED",s.DISCONNECT="DISCONNECT",s.DROP_FILE="DROP_FILE",s.DROP_FILES="DROP_FILES",s.EXPORT_FILE_STATISTICS="EXPORT_FILE_STATISTICS",s.FETCH_QUERY_RESULTS="FETCH_QUERY_RESULTS",s.FLUSH_FILES="FLUSH_FILES",s.GET_FEATURE_FLAGS="GET_FEATURE_FLAGS",s.GET_TABLE_NAMES="GET_TABLE_NAMES",s.GET_VERSION="GET_VERSION",s.GLOB_FILE_INFOS="GLOB_FILE_INFOS",s.INSERT_ARROW_FROM_IPC_STREAM="INSERT_ARROW_FROM_IPC_STREAM",s.INSERT_CSV_FROM_PATH="IMPORT_CSV_FROM_PATH",s.INSERT_JSON_FROM_PATH="IMPORT_JSON_FROM_PATH",s.INSTANTIATE="INSTANTIATE",s.OPEN="OPEN",s.PING="PING",s.POLL_PENDING_QUERY="POLL_PENDING_QUERY",s.REGISTER_FILE_BUFFER="REGISTER_FILE_BUFFER",s.REGISTER_FILE_HANDLE="REGISTER_FILE_HANDLE",s.REGISTER_FILE_URL="REGISTER_FILE_URL",s.RESET="RESET",s.RUN_PREPARED="RUN_PREPARED",s.RUN_QUERY="RUN_QUERY",s.SEND_PREPARED="SEND_PREPARED",s.START_PENDING_QUERY="START_PENDING_QUERY",s.TOKENIZE="TOKENIZE",s))(m3||{}),v3=(s=>(s.CONNECTION_INFO="CONNECTION_INFO",s.ERROR="ERROR",s.FEATURE_FLAGS="FEATURE_FLAGS",s.FILE_BUFFER="FILE_BUFFER",s.FILE_INFOS="FILE_INFOS",s.FILE_SIZE="FILE_SIZE",s.FILE_STATISTICS="FILE_STATISTICS",s.INSTANTIATE_PROGRESS="INSTANTIATE_PROGRESS",s.LOG="LOG",s.PROGRESS_UPDATE="PROGRESS_UPDATE",s.OK="OK",s.PREPARED_STATEMENT_ID="PREPARED_STATEMENT_ID",s.QUERY_PLAN="QUERY_PLAN",s.QUERY_RESULT="QUERY_RESULT",s.QUERY_RESULT_CHUNK="QUERY_RESULT_CHUNK",s.QUERY_RESULT_HEADER="QUERY_RESULT_HEADER",s.QUERY_RESULT_HEADER_OR_NULL="QUERY_RESULT_HEADER_OR_NULL",s.REGISTERED_FILE="REGISTERED_FILE",s.SCRIPT_TOKENS="SCRIPT_TOKENS",s.SUCCESS="SUCCESS",s.TABLE_NAMES="TABLE_NAMES",s.VERSION_STRING="VERSION_STRING",s))(v3||{}),Mt=class{constructor(s,t){this.promiseResolver=()=>{},this.promiseRejecter=()=>{},this.type=s,this.data=t,this.promise=new Promise((i,r)=>{this.promiseResolver=i,this.promiseRejecter=r})}};function _c(s){switch(s.typeId){case A.Binary:return{sqlType:"binary"};case A.Bool:return{sqlType:"bool"};case A.Date:return{sqlType:"date"};case A.DateDay:return{sqlType:"date32[d]"};case A.DateMillisecond:return{sqlType:"date64[ms]"};case A.Decimal:{let t=s;return{sqlType:"decimal",precision:t.precision,scale:t.scale}}case A.Float:return{sqlType:"float"};case A.Float16:return{sqlType:"float16"};case A.Float32:return{sqlType:"float32"};case A.Float64:return{sqlType:"float64"};case A.Int:return{sqlType:"int32"};case A.Int16:return{sqlType:"int16"};case A.Int32:return{sqlType:"int32"};case A.Int64:return{sqlType:"int64"};case A.Uint16:return{sqlType:"uint16"};case A.Uint32:return{sqlType:"uint32"};case A.Uint64:return{sqlType:"uint64"};case A.Uint8:return{sqlType:"uint8"};case A.IntervalDayTime:return{sqlType:"interval[dt]"};case A.IntervalYearMonth:return{sqlType:"interval[m]"};case A.List:return{sqlType:"list",valueType:_c(s.valueType)};case A.FixedSizeBinary:return{sqlType:"fixedsizebinary",byteWidth:s.byteWidth};case A.Null:return{sqlType:"null"};case A.Utf8:return{sqlType:"utf8"};case A.Struct:return{sqlType:"struct",fields:s.children.map(t=>hh(t.name,t.type))};case A.Map:{let t=s;return{sqlType:"map",keyType:_c(t.keyType),valueType:_c(t.valueType)}}case A.Time:return{sqlType:"time[s]"};case A.TimeMicrosecond:return{sqlType:"time[us]"};case A.TimeMillisecond:return{sqlType:"time[ms]"};case A.TimeNanosecond:return{sqlType:"time[ns]"};case A.TimeSecond:return{sqlType:"time[s]"};case A.Timestamp:return{sqlType:"timestamp",timezone:s.timezone||void 0};case A.TimestampSecond:return{sqlType:"timestamp[s]",timezone:s.timezone||void 0};case A.TimestampMicrosecond:return{sqlType:"timestamp[us]",timezone:s.timezone||void 0};case A.TimestampNanosecond:return{sqlType:"timestamp[ns]",timezone:s.timezone||void 0};case A.TimestampMillisecond:return{sqlType:"timestamp[ms]",timezone:s.timezone||void 0}}throw new Error("unsupported arrow type: ".concat(s.toString()))}function hh(s,t){let i=_c(t);return i.name=s,i}var _3=new TextEncoder,b3=class{constructor(s,t=null){this._onInstantiationProgress=[],this._onExecutionProgress=[],this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{},this._nextMessageId=0,this._pendingRequests=new Map,this._logger=s,this._onMessageHandler=this.onMessage.bind(this),this._onErrorHandler=this.onError.bind(this),this._onCloseHandler=this.onClose.bind(this),t!=null&&this.attach(t)}get logger(){return this._logger}attach(s){this._worker=s,this._worker.addEventListener("message",this._onMessageHandler),this._worker.addEventListener("error",this._onErrorHandler),this._worker.addEventListener("close",this._onCloseHandler),this._workerShutdownPromise=new Promise((t,i)=>{this._workerShutdownResolver=t})}detach(){this._worker&&(this._worker.removeEventListener("message",this._onMessageHandler),this._worker.removeEventListener("error",this._onErrorHandler),this._worker.removeEventListener("close",this._onCloseHandler),this._worker=null,this._workerShutdownResolver(null),this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async terminate(){this._worker&&(this._worker.terminate(),this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async postTask(s,t=[]){if(!this._worker){console.error("cannot send a message since the worker is not set!");return}let i=this._nextMessageId++;return this._pendingRequests.set(i,s),this._worker.postMessage({messageId:i,type:s.type,data:s.data},t),await s.promise}onMessage(s){var t;let i=s.data;switch(i.type){case"PROGRESS_UPDATE":{for(let o of this._onExecutionProgress)o(i.data);return}case"LOG":{this._logger.log(i.data);return}case"INSTANTIATE_PROGRESS":{for(let o of this._onInstantiationProgress)o(i.data);return}}let r=this._pendingRequests.get(i.requestId);if(!r){console.warn("unassociated response: [".concat(i.requestId,", ").concat(i.type.toString(),"]"));return}if(this._pendingRequests.delete(i.requestId),i.type=="ERROR"){let o=new Error(i.data.message);o.name=i.data.name,(t=Object.getOwnPropertyDescriptor(o,"stack"))!=null&&t.writable&&(o.stack=i.data.stack),r.promiseRejecter(o);return}switch(r.type){case"CLOSE_PREPARED":case"COLLECT_FILE_STATISTICS":case"REGISTER_OPFS_FILE_NAME":case"COPY_FILE_TO_PATH":case"DISCONNECT":case"DROP_FILE":case"DROP_FILES":case"FLUSH_FILES":case"INSERT_ARROW_FROM_IPC_STREAM":case"IMPORT_CSV_FROM_PATH":case"IMPORT_JSON_FROM_PATH":case"OPEN":case"PING":case"REGISTER_FILE_BUFFER":case"REGISTER_FILE_HANDLE":case"REGISTER_FILE_URL":case"RESET":if(i.type=="OK"){r.promiseResolver(i.data);return}break;case"INSTANTIATE":if(this._onInstantiationProgress=[],i.type=="OK"){r.promiseResolver(i.data);return}break;case"GLOB_FILE_INFOS":if(i.type=="FILE_INFOS"){r.promiseResolver(i.data);return}break;case"GET_VERSION":if(i.type=="VERSION_STRING"){r.promiseResolver(i.data);return}break;case"GET_FEATURE_FLAGS":if(i.type=="FEATURE_FLAGS"){r.promiseResolver(i.data);return}break;case"GET_TABLE_NAMES":if(i.type=="TABLE_NAMES"){r.promiseResolver(i.data);return}break;case"TOKENIZE":if(i.type=="SCRIPT_TOKENS"){r.promiseResolver(i.data);return}break;case"COPY_FILE_TO_BUFFER":if(i.type=="FILE_BUFFER"){r.promiseResolver(i.data);return}break;case"EXPORT_FILE_STATISTICS":if(i.type=="FILE_STATISTICS"){r.promiseResolver(i.data);return}break;case"CONNECT":if(i.type=="CONNECTION_INFO"){r.promiseResolver(i.data);return}break;case"RUN_PREPARED":case"RUN_QUERY":if(i.type=="QUERY_RESULT"){r.promiseResolver(i.data);return}break;case"SEND_PREPARED":if(i.type=="QUERY_RESULT_HEADER"){r.promiseResolver(i.data);return}break;case"START_PENDING_QUERY":if(i.type=="QUERY_RESULT_HEADER_OR_NULL"){r.promiseResolver(i.data);return}break;case"POLL_PENDING_QUERY":if(i.type=="QUERY_RESULT_HEADER_OR_NULL"){r.promiseResolver(i.data);return}break;case"CANCEL_PENDING_QUERY":if(this._onInstantiationProgress=[],i.type=="SUCCESS"){r.promiseResolver(i.data);return}break;case"FETCH_QUERY_RESULTS":if(i.type=="QUERY_RESULT_CHUNK"){r.promiseResolver(i.data);return}break;case"CREATE_PREPARED":if(i.type=="PREPARED_STATEMENT_ID"){r.promiseResolver(i.data);return}break}r.promiseRejecter(new Error("unexpected response type: ".concat(i.type.toString())))}onError(s){console.error(s),console.error("error in duckdb worker: ".concat(s.message)),this._pendingRequests.clear()}onClose(){if(this._workerShutdownResolver(null),this._pendingRequests.size!=0){console.warn("worker terminated with ".concat(this._pendingRequests.size," pending requests"));return}this._pendingRequests.clear()}async reset(){let s=new Mt("RESET",null);return await this.postTask(s)}async ping(){let s=new Mt("PING",null);await this.postTask(s)}async dropFile(s){let t=new Mt("DROP_FILE",s);return await this.postTask(t)}async dropFiles(){let s=new Mt("DROP_FILES",null);return await this.postTask(s)}async flushFiles(){let s=new Mt("FLUSH_FILES",null);return await this.postTask(s)}async instantiate(s,t=null,i=r=>{}){this._onInstantiationProgress.push(i);let r=new Mt("INSTANTIATE",[s,t]);return await this.postTask(r)}async getVersion(){let s=new Mt("GET_VERSION",null);return await this.postTask(s)}async getFeatureFlags(){let s=new Mt("GET_FEATURE_FLAGS",null);return await this.postTask(s)}async open(s){let t=new Mt("OPEN",s);await this.postTask(t)}async tokenize(s){let t=new Mt("TOKENIZE",s);return await this.postTask(t)}async connectInternal(){let s=new Mt("CONNECT",null);return await this.postTask(s)}async connect(){let s=await this.connectInternal();return new p3(this,s)}async disconnect(s){let t=new Mt("DISCONNECT",s);await this.postTask(t)}async runQuery(s,t){let i=new Mt("RUN_QUERY",[s,t]);return await this.postTask(i)}async startPendingQuery(s,t,i=!1){let r=new Mt("START_PENDING_QUERY",[s,t,i]);return await this.postTask(r)}async pollPendingQuery(s){let t=new Mt("POLL_PENDING_QUERY",s);return await this.postTask(t)}async cancelPendingQuery(s){let t=new Mt("CANCEL_PENDING_QUERY",s);return await this.postTask(t)}async fetchQueryResults(s){let t=new Mt("FETCH_QUERY_RESULTS",s);return await this.postTask(t)}async getTableNames(s,t){let i=new Mt("GET_TABLE_NAMES",[s,t]);return await this.postTask(i)}async createPrepared(s,t){let i=new Mt("CREATE_PREPARED",[s,t]);return await this.postTask(i)}async closePrepared(s,t){let i=new Mt("CLOSE_PREPARED",[s,t]);await this.postTask(i)}async runPrepared(s,t,i){let r=new Mt("RUN_PREPARED",[s,t,i]);return await this.postTask(r)}async sendPrepared(s,t,i){let r=new Mt("SEND_PREPARED",[s,t,i]);return await this.postTask(r)}async globFiles(s){let t=new Mt("GLOB_FILE_INFOS",s);return await this.postTask(t)}async registerFileText(s,t){let i=_3.encode(t);await this.registerFileBuffer(s,i)}async registerFileURL(s,t,i,r){t===void 0&&(t=s);let o=new Mt("REGISTER_FILE_URL",[s,t,i,r]);await this.postTask(o)}async registerEmptyFileBuffer(s){}async registerFileBuffer(s,t){let i=new Mt("REGISTER_FILE_BUFFER",[s,t]);await this.postTask(i,[t.buffer])}async registerFileHandle(s,t,i,r){let o=new Mt("REGISTER_FILE_HANDLE",[s,t,i,r]);await this.postTask(o,[])}async registerOPFSFileName(s){let t=new Mt("REGISTER_OPFS_FILE_NAME",[s]);await this.postTask(t,[])}async collectFileStatistics(s,t){let i=new Mt("COLLECT_FILE_STATISTICS",[s,t]);await this.postTask(i,[])}async exportFileStatistics(s){let t=new Mt("EXPORT_FILE_STATISTICS",s);return await this.postTask(t,[])}async copyFileToBuffer(s){let t=new Mt("COPY_FILE_TO_BUFFER",s);return await this.postTask(t)}async copyFileToPath(s,t){let i=new Mt("COPY_FILE_TO_PATH",[s,t]);await this.postTask(i)}async insertArrowFromIPCStream(s,t,i){if(t.length==0)return;let r=new Mt("INSERT_ARROW_FROM_IPC_STREAM",[s,t,i]);await this.postTask(r,[t.buffer])}async insertCSVFromPath(s,t,i){if(i.columns!==void 0){let o=[];for(let c in i.columns){let d=i.columns[c];o.push(hh(c,d))}i.columnsFlat=o,delete i.columns}let r=new Mt("IMPORT_CSV_FROM_PATH",[s,t,i]);await this.postTask(r)}async insertJSONFromPath(s,t,i){if(i.columns!==void 0){let o=[];for(let c in i.columns){let d=i.columns[c];o.push(hh(c,d))}i.columnsFlat=o,delete i.columns}let r=new Mt("IMPORT_JSON_FROM_PATH",[s,t,i]);await this.postTask(r)}};function S3(){let s=new TextDecoder;return t=>(typeof SharedArrayBuffer<"u"&&t.buffer instanceof SharedArrayBuffer&&(t=new Uint8Array(t)),s.decode(t))}S3();var T3=(s=>(s[s.BUFFER=0]="BUFFER",s[s.NODE_FS=1]="NODE_FS",s[s.BROWSER_FILEREADER=2]="BROWSER_FILEREADER",s[s.BROWSER_FSACCESS=3]="BROWSER_FSACCESS",s[s.HTTP=4]="HTTP",s[s.S3=5]="S3",s))(T3||{}),A3=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,10,14,1,12,0,65,0,65,0,65,0,252,10,0,0,11])),x3=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11])),E3=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),w3=()=>(async s=>{try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(s)}catch{return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])),iy={name:"@duckdb/duckdb-wasm",version:"1.30.0"},O3=iy.name,M3=iy.version,ny=iy.version.split(".");ny[0];ny[1];ny[2];var L3=()=>typeof navigator>"u";function C3(){let s="https://cdn.jsdelivr.net/npm/".concat(O3,"@").concat(M3,"/dist/");return{mvp:{mainModule:"".concat(s,"duckdb-mvp.wasm"),mainWorker:"".concat(s,"duckdb-browser-mvp.worker.js")},eh:{mainModule:"".concat(s,"duckdb-eh.wasm"),mainWorker:"".concat(s,"duckdb-browser-eh.worker.js")}}}var jd=null,Gd=null,Hd=null,qd=null,Yd=null;async function D3(){return jd==null&&(jd=typeof BigInt64Array<"u"),Gd==null&&(Gd=await x3()),Hd==null&&(Hd=await w3()),qd==null&&(qd=await E3()),Yd==null&&(Yd=await A3()),{bigInt64Array:jd,crossOriginIsolated:L3()||globalThis.crossOriginIsolated||!1,wasmExceptions:Gd,wasmSIMD:qd,wasmThreads:Hd,wasmBulkMemory:Yd}}async function B3(s){let t=await D3();if(t.wasmExceptions){if(t.wasmSIMD&&t.wasmThreads&&t.crossOriginIsolated&&s.coi)return{mainModule:s.coi.mainModule,mainWorker:s.coi.mainWorker,pthreadWorker:s.coi.pthreadWorker};if(s.eh)return{mainModule:s.eh.mainModule,mainWorker:s.eh.mainWorker,pthreadWorker:null}}return{mainModule:s.mvp.mainModule,mainWorker:s.mvp.mainWorker,pthreadWorker:null}}var I3=a3(r3());async function R3(s){let t=new Request(s),i=await fetch(t),r=URL.createObjectURL(await i.blob());return new I3.default(r)}async function N3(){const s=C3(),t=await B3(s),i=await R3(t.mainWorker),r=new h3,o=new b3(r,i);return await o.instantiate(t.mainModule,t.pthreadWorker),o}function z3(){const[s,t]=Ii.useState(null),[i,r]=Ii.useState(null),[o,c]=Ii.useState(!0);return Ii.useEffect(()=>{(async()=>{try{const d=await N3();t(d)}catch(d){r(d.toString()),console.error(d)}finally{c(!1)}})()},[]),{db:s,loading:o,error:i}}async function U3(s,t){if(!s||!t)return null;const i=await s.connect();try{return await i.query("INSTALL httpfs;"),await i.query("LOAD httpfs;"),await i.query("INSTALL spatial;"),await i.query("LOAD spatial;"),await i.query(t)}finally{await i.close()}}function F3({table:s}){if(!s)return null;const t=s.schema.fields.map(r=>r.name),i=s.toArray();return be.jsx("div",{className:"footer-table-container",children:be.jsxs("table",{className:"result-table",children:[be.jsx("thead",{children:be.jsx("tr",{children:t.map(r=>be.jsx("th",{children:r},r))})}),be.jsx("tbody",{children:i.map((r,o)=>be.jsx("tr",{children:t.map(c=>be.jsx("td",{children:String(r[c])},c))},o))})]})})}const P3={latitude:35.681236,longitude:139.767125,zoom:12,bearing:0,pitch:0};function V3(s){return!s||!s.schema.fields.find(r=>r.name==="geojson")?null:{type:"FeatureCollection",features:s.toArray().map(r=>{const o=r.geojson;if(typeof o=="string")try{const c={...r};return delete c.geojson,{type:"Feature",geometry:JSON.parse(o),properties:c}}catch(c){return console.error("Failed to parse GeoJSON string:",o,c),null}return null}).filter(Boolean)}}function j3(){const{db:s,loading:t,error:i}=z3(),[r,o]=Ii.useState(null),[c,d]=Ii.useState(null),[h,y]=Ii.useState(null),[g,v]=Ii.useState(!1),[b,E]=Ii.useState("SELECT *, ST_AsGeoJSON(geometry) as geojson FROM 'https://storage.googleapis.com/g3-open-resource/parquet/police_station2.parquet';"),M=Ii.useCallback(async()=>{if(s){v(!0),y(null),o(null),d(null);try{const j=await U3(s,b);o(j)}catch(j){y(j.toString()),console.error(j)}finally{v(!1)}}},[s,b]);Ii.useEffect(()=>{if(r){const j=V3(r);d(j)}},[r]);const V=i||h;return be.jsxs("div",{children:[V&&be.jsx("div",{className:"error-panel",children:V}),be.jsxs("div",{className:"control-panel",children:[be.jsx("input",{type:"text",value:b,onChange:j=>E(j.target.value),disabled:!s||g}),be.jsx("button",{onClick:M,disabled:!s||g,children:g?"...":""}),t&&be.jsx("span",{children:"DB..."})]}),be.jsx(AT,{initialViewState:P3,controller:!0,layers:Ax({data:c})}),be.jsx("div",{className:"attribution",children:be.jsx("a",{href:"https://maps.gsi.go.jp/development/ichiran.html",target:"_blank",rel:"noopener noreferrer",children:" "})}),be.jsx(F3,{table:r})," "]})}GT.createRoot(document.getElementById("root")).render(be.jsx(j3,{}));
//# sourceMappingURL=index-BPNzkoPl.js.map
